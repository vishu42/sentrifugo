function info_dialog(e,t,n,r){var i={width:290,height:"auto",dataheight:"auto",drag:true,resize:false,caption:"<b>"+e+"</b>",left:250,top:170,zIndex:1e3,jqModal:true,closeOnEscape:true,align:"center",buttonalign:"center",buttons:[]};jQuery.extend(i,r||{});var s=i.jqModal;if(jQuery.fn.jqm&&!s){s=false}var o="";if(i.buttons.length>0){for(var u=0;u<i.buttons.length;u++){if(typeof i.buttons[u].id=="undefined"){i.buttons[u].id="info_button_"+u}o+="<a href='javascript:void(0)' id='"+i.buttons[u].id+"' class='fm-button ui-state-default ui-corner-all'>"+i.buttons[u].text+"</a>"}}var a=isNaN(i.dataheight)?i.dataheight:i.dataheight+"px",f="text-align:"+i.align+";";var l="<div id='info_id'>";l+="<div id='infocnt' style='margin:0px;padding-bottom:1em;width:100%;overflow:auto;position:relative;height:"+a+";"+f+"'>"+t+"</div>";l+=n?"<div class='ui-widget-content ui-helper-clearfix' style='text-align:"+i.buttonalign+";padding-bottom:0.8em;padding-top:0.5em;background-image: none;border-width: 1px 0 0 0;'><a href='javascript:void(0)' id='closedialog' class='fm-button ui-state-default ui-corner-all'>"+n+"</a>"+o+"</div>":"";l+="</div>";try{if(jQuery("#info_dialog").attr("aria-hidden")=="false"){hideModal("#info_dialog",{jqm:s})}jQuery("#info_dialog").remove()}catch(c){}createModal({themodal:"info_dialog",modalhead:"info_head",modalcontent:"info_content",scrollelm:"infocnt"},l,i,"","",true);if(o){jQuery.each(i.buttons,function(e){jQuery("#"+this.id,"#info_id").bind("click",function(){i.buttons[e].onClick.call(jQuery("#info_dialog"));return false})})}jQuery("#closedialog","#info_id").click(function(e){hideModal("#info_dialog",{jqm:s});return false});jQuery(".fm-button","#info_dialog").hover(function(){jQuery(this).addClass("ui-state-hover")},function(){jQuery(this).removeClass("ui-state-hover")});viewModal("#info_dialog",{onHide:function(e){e.w.hide().remove();if(e.o){e.o.remove()}},modal:true,jqm:s})}function findPos(e){var t=curtop=0;if(e.offsetParent){do{t+=e.offsetLeft;curtop+=e.offsetTop}while(e=e.offsetParent)}return[t,curtop]}function isArray(e){if(e.constructor.toString().indexOf("Array")==-1){return false}else{return true}}function createEl(e,t,n,r,i){function o(e,t){if(jQuery.isFunction(t.dataInit)){e.id=t.id;t.dataInit(e);delete t.id;delete t.dataInit}if(t.dataEvents){jQuery.each(t.dataEvents,function(){if(this.data!=null){jQuery(e).bind(this.type,this.data,this.fn)}else{jQuery(e).bind(this.type,this.fn)}});delete t.dataEvents}return t}var s="";if(t.defaultValue){delete t.defaultValue}switch(e){case"textarea":s=document.createElement("textarea");if(r){if(!t.cols){jQuery(s).css({width:"98%"})}}else{if(!t.cols){t.cols=20}}if(!t.rows){t.rows=2}if(n==" "||n=="&#160;"||n.length==1&&n.charCodeAt(0)==160){n=""}s.value=n;t=o(s,t);jQuery(s).attr(t);break;case"checkbox":s=document.createElement("input");s.type="checkbox";if(!t.value){var u=n.toLowerCase();if(u.search(/(false|0|no|off|undefined)/i)<0&&u!==""){s.checked=true;s.defaultChecked=true;s.value=n}else{s.value="on"}jQuery(s).attr("offval","off")}else{var a=t.value.split(":");if(n===a[0]){s.checked=true;s.defaultChecked=true}s.value=a[0];jQuery(s).attr("offval",a[1]);try{delete t.value}catch(f){}}t=o(s,t);jQuery(s).attr(t);break;case"select":s=document.createElement("select");var l,c=[];if(t.multiple===true){l=true;s.multiple="multiple"}else{l=false}if(t.dataUrl!=null){jQuery.ajax(jQuery.extend({url:t.dataUrl,type:"GET",complete:function(e,r){try{delete t.dataUrl;delete t.value}catch(i){}var u;if(t.buildSelect!=null){var a=t.buildSelect(e);u=jQuery(a).html();delete t.buildSelect}else{u=jQuery(e.responseText).html()}if(u){jQuery(s).append(u);t=o(s,t);if(typeof t.size==="undefined"){t.size=l?3:1}if(l){c=n.split(",");c=jQuery.map(c,function(e){return jQuery.trim(e)})}else{c[0]=n}jQuery(s).attr(t);setTimeout(function(){jQuery("option",s).each(function(e){if(e==0){this.selected=""}if(jQuery.inArray(jQuery(this).text(),c)>-1||jQuery.inArray(jQuery(this).val(),c)>-1){this.selected="selected";if(!l){return false}}})},0)}}},i||{}))}else{if(t.value){var h;if(l){c=n.split(",");c=jQuery.map(c,function(e){return jQuery.trim(e)});if(typeof t.size==="undefined"){t.size=3}}else{t.size=1}if(typeof t.value==="function"){t.value=t.value()}if(typeof t.value==="string"){var p=t.value.split(";"),d,v;for(h=0;h<p.length;h++){d=p[h].split(":");if(d.length>2){d[1]=jQuery.map(d,function(e,t){if(t>0){return e}}).join(":")}v=document.createElement("option");v.value=d[0];v.innerHTML=d[1];if(!l&&(d[0]==n||d[1]==n)){v.selected="selected"}if(l&&(jQuery.inArray(d[1],c)>-1||jQuery.inArray(d[0],c)>-1)){v.selected="selected"}s.appendChild(v)}}else{if(typeof t.value==="object"){var m=t.value;for(var g in m){v=document.createElement("option");v.value=g;v.innerHTML=m[g];if(!l&&(g==n||m[g]==n)){v.selected="selected"}if(l&&(jQuery.inArray(m[g],c)>-1||jQuery.inArray(g,c)>-1)){v.selected="selected"}s.appendChild(v)}}}t=o(s,t);try{delete t.value}catch(f){}jQuery(s).attr(t)}}break;case"text":case"password":case"button":s=document.createElement("input");s.type=e;s.value=jQuery.jgrid.htmlDecode(n);t=o(s,t);if(e!="button"){if(r){if(!t.size){jQuery(s).css({width:"98%"})}}else{if(!t.size){t.size=20}}}jQuery(s).attr(t);break;case"image":case"file":s=document.createElement("input");s.type=e;t=o(s,t);jQuery(s).attr(t);break;case"custom":s=document.createElement("span");try{if(jQuery.isFunction(t.custom_element)){var y=t.custom_element.call(this,n,t);if(y){y=jQuery(y).addClass("customelement").attr({id:t.id,name:t.name});jQuery(s).empty().append(y)}else{throw"e2"}}else{throw"e1"}}catch(f){if(f=="e1"){info_dialog(jQuery.jgrid.errors.errcap,"function 'custom_element' "+jQuery.jgrid.edit.msg.nodefined,jQuery.jgrid.edit.bClose)}if(f=="e2"){info_dialog(jQuery.jgrid.errors.errcap,"function 'custom_element' "+jQuery.jgrid.edit.msg.novalue,jQuery.jgrid.edit.bClose)}else{info_dialog(jQuery.jgrid.errors.errcap,f.message,jQuery.jgrid.edit.bClose)}}break}return s}function checkValues(e,t,n){var r,i,s;if(typeof t=="string"){for(i=0,len=n.p.colModel.length;i<len;i++){if(n.p.colModel[i].name==t){r=n.p.colModel[i].editrules;t=i;try{s=n.p.colModel[i].formoptions.label}catch(o){}break}}}else{if(t>=0){r=n.p.colModel[t].editrules}}if(r){if(!s){s=n.p.colNames[t]}if(r.required===true){if(e.match(/^s+$/)||e==""){return[false,s+": "+jQuery.jgrid.edit.msg.required,""]}}var u=r.required===false?false:true;if(r.number===true){if(!(u===false&&isEmpty(e))){if(isNaN(e)){return[false,s+": "+jQuery.jgrid.edit.msg.number,""]}}}if(typeof r.minValue!="undefined"&&!isNaN(r.minValue)){if(parseFloat(e)<parseFloat(r.minValue)){return[false,s+": "+jQuery.jgrid.edit.msg.minValue+" "+r.minValue,""]}}if(typeof r.maxValue!="undefined"&&!isNaN(r.maxValue)){if(parseFloat(e)>parseFloat(r.maxValue)){return[false,s+": "+jQuery.jgrid.edit.msg.maxValue+" "+r.maxValue,""]}}var a;if(r.email===true){if(!(u===false&&isEmpty(e))){a=/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i;if(!a.test(e)){return[false,s+": "+jQuery.jgrid.edit.msg.email,""]}}}if(r.integer===true){if(!(u===false&&isEmpty(e))){if(isNaN(e)){return[false,s+": "+jQuery.jgrid.edit.msg.integer,""]}if(e%1!=0||e.indexOf(".")!=-1){return[false,s+": "+jQuery.jgrid.edit.msg.integer,""]}}}if(r.date===true){if(!(u===false&&isEmpty(e))){var f=n.p.colModel[t].datefmt||"Y-m-d";if(!checkDate(f,e)){return[false,s+": "+jQuery.jgrid.edit.msg.date+" - "+f,""]}}}if(r.time===true){if(!(u===false&&isEmpty(e))){if(!checkTime(e)){return[false,s+": "+jQuery.jgrid.edit.msg.date+" - hh:mm (am/pm)",""]}}}if(r.url===true){if(!(u===false&&isEmpty(e))){a=/^(((https?)|(ftp)):\/\/([\-\w]+\.)+\w{2,3}(\/[%\-\w]+(\.\w{2,})?)*(([\w\-\.\?\\\/+@&#;`~=%!]*)(\.\w{2,})?)*\/?)/i;if(!a.test(e)){return[false,s+": "+jQuery.jgrid.edit.msg.url,""]}}}if(r.custom===true){if(!(u===false&&isEmpty(e))){if(jQuery.isFunction(r.custom_func)){var l=r.custom_func.call(n,e,s);if(jQuery.isArray(l)){return l}else{return[false,jQuery.jgrid.edit.msg.customarray,""]}}else{return[false,jQuery.jgrid.edit.msg.customfcheck,""]}}}}return[true,"",""]}function checkDate(e,t){var n={},r;e=e.toLowerCase();if(e.indexOf("/")!=-1){r="/"}else{if(e.indexOf("-")!=-1){r="-"}else{if(e.indexOf(".")!=-1){r="."}else{r="/"}}}e=e.split(r);t=t.split(r);if(t.length!=3){return false}var i=-1,s,o=-1,u=-1;for(var a=0;a<e.length;a++){var f=isNaN(t[a])?0:parseInt(t[a],10);n[e[a]]=f;s=e[a];if(s.indexOf("y")!=-1){i=a}if(s.indexOf("m")!=-1){u=a}if(s.indexOf("d")!=-1){o=a}}if(e[i]=="y"||e[i]=="yyyy"){s=4}else{if(e[i]=="yy"){s=2}else{s=-1}}var l=DaysArray(12);var c;if(i===-1){return false}else{c=n[e[i]].toString();if(s==2&&c.length==1){s=1}if(c.length!=s||n[e[i]]==0){return false}}if(u===-1){return false}else{c=n[e[u]].toString();if(c.length<1||n[e[u]]<1||n[e[u]]>12){return false}}if(o===-1){return false}else{c=n[e[o]].toString();if(c.length<1||n[e[o]]<1||n[e[o]]>31||n[e[u]]==2&&n[e[o]]>daysInFebruary(n[e[i]])||n[e[o]]>l[n[e[u]]]){return false}}return true}function daysInFebruary(e){return e%4==0&&(!(e%100==0)||e%400==0)?29:28}function DaysArray(e){for(var t=1;t<=e;t++){this[t]=31;if(t==4||t==6||t==9||t==11){this[t]=30}if(t==2){this[t]=29}}return this}function isEmpty(e){if(e.match(/^s+$/)||e==""){return true}else{return false}}function checkTime(e){var t=/^(\d{1,2}):(\d{2})([ap]m)?$/,n;if(!isEmpty(e)){n=e.match(t);if(n){if(n[3]){if(n[1]<1||n[1]>12){return false}}else{if(n[1]>23){return false}}if(n[2]>59){return false}}else{return false}}return true}function tableToGrid(e,t){$(e).each(function(){if(this.grid){return}$(this).width("99%");var e=$(this).width();var n=$("input[type=checkbox]:first",$(this));var r=$("input[type=radio]:first",$(this));var i=n.length>0;var s=!i&&r.length>0;var o=i||s;var u=n.attr("name")||r.attr("name");var a=[];var f=[];$("th",$(this)).each(function(){if(a.length==0&&o){a.push({name:"__selection__",index:"__selection__",width:0,hidden:true});f.push("__selection__")}else{a.push({name:$(this).attr("id")||$(this).html(),index:$(this).attr("id")||$(this).html(),width:$(this).width()||150});f.push($(this).html())}});var l=[];var c=[];var h=[];$("tbody > tr",$(this)).each(function(){var e={};var t=0;$("td",$(this)).each(function(){if(t==0&&o){var n=$("input",$(this));var r=n.attr("value");c.push(r||l.length);if(n.attr("checked")){h.push(r)}e[a[t].name]=n.attr("value")}else{e[a[t].name]=$(this).html()}t++});if(t>0){l.push(e)}});$(this).empty();$(this).addClass("scroll");$(this).jqGrid($.extend({datatype:"local",width:e,colNames:f,colModel:a,multiselect:i},t||{}));for(var p=0;p<l.length;p++){var d=null;if(c.length>0){d=c[p];if(d&&d.replace){d=encodeURIComponent(d).replace(/[.\-%]/g,"_")}}if(d==null){d=p+1}$(this).jqGrid("addRowData",d,l[p])}for(var p=0;p<h.length;p++){$(this).jqGrid("setSelection",h[p])}})}(function($){var pagination_class="evenclass";$.jgrid=$.jgrid||{};$.extend($.jgrid,{htmlDecode:function(e){if(e==" "||e=="&#160;"||e.length==1&&e.charCodeAt(0)==160){return""}return!e?e:String(e).replace(/&/g,"&").replace(/>/g,">").replace(/</g,"<").replace(/"/g,'"')},htmlEncode:function(e){return!e?e:String(e).replace(/&/g,"&").replace(/>/g,">").replace(/</g,"<").replace(/\"/g,"\"")},format:function(e){var t=$.makeArray(arguments).slice(1);if(e===undefined){e=""}return e.replace(/\{(\d+)\}/g,function(e,n){return t[n]})},getCellIndex:function(e){e=$(e);e=(!e.is("td")&&!e.is("th")?e.closest("td,th"):e)[0];if($.browser.msie){return $.inArray(e,e.parentNode.cells)}return e.cellIndex},stripHtml:function(e){e=e+"";var t=/<("[^"]*"|'[^']*'|[^'">])*>/gi;if(e){return e.replace(t,"")}else{return e}},stringToDoc:function(e){var t;if(typeof e!=="string"){return e}try{var n=new DOMParser;t=n.parseFromString(e,"text/xml")}catch(r){t=new ActiveXObject("Microsoft.XMLDOM");t.async=false;t.loadXML(e)}return t&&t.documentElement&&t.documentElement.tagName!="parsererror"?t:null},parse:function(jsonString){var js=jsonString,msg;if(js.substr(0,9)=="while(1);"){js=js.substr(9)}if(js.substr(0,2)=="/*"){js=js.substr(2,js.length-4)}if(!js){js="{}"}$.jgrid.useJSON===true&&typeof JSON==="object"&&typeof JSON.parse==="function"?msg=JSON.parse(js):msg=eval("("+js+")");return msg.hasOwnProperty("d")?msg.d:msg},empty:function(){while(this.firstChild){this.removeChild(this.firstChild)}},jqID:function(e){e=e+"";return e.replace(/([\.\:\[\]])/g,"\\$1")},ajaxOptions:{},extend:function(e){$.extend($.fn.jqGrid,e);if(!this.no_legacy_api){$.fn.extend(e)}}});$.fn.jqGrid=function(pin){if(typeof pin=="string"){var fn=$.fn.jqGrid[pin];if(!fn){throw"jqGrid - No such method: "+pin}var args=$.makeArray(arguments).slice(1);return fn.apply(this,args)}return this.each(function(){if(this.grid){return}var p=$.extend(true,{url:"",height:150,page:1,rowNum:20,records:0,pager:"",pgbuttons:true,pginput:true,colModel:[],rowList:[],colNames:[],sortorder:"asc",sortname:"",datatype:"xml",mtype:"GET",altRows:false,selarrrow:[],savedRow:[],shrinkToFit:true,xmlReader:{},jsonReader:{},subGrid:false,subGridModel:[],reccount:0,lastpage:0,lastsort:0,selrow:null,beforeSelectRow:null,onSelectRow:null,onSortCol:null,ondblClickRow:null,onRightClickRow:null,onPaging:null,onSelectAll:null,loadComplete:null,gridComplete:null,loadError:null,loadBeforeSend:null,afterInsertRow:null,beforeRequest:null,onHeaderClick:null,viewrecords:false,loadonce:false,multiselect:false,multikey:false,editurl:null,search:false,caption:"",hidegrid:true,hiddengrid:false,postData:{},userData:{},treeGrid:false,treeGridModel:"nested",treeReader:{},treeANode:-1,ExpandColumn:null,tree_root_level:0,prmNames:{page:"page",rows:"rows",sort:"sidx",order:"sord",search:"_search",nd:"nd"},forceFit:false,gridstate:"visible",cellEdit:false,cellsubmit:"remote",nv:0,loadui:"enable",toolbar:[false,""],scroll:false,multiboxonly:false,deselectAfterSort:true,scrollrows:false,autowidth:false,scrollOffset:18,cellLayout:5,subGridWidth:20,multiselectWidth:20,gridview:false,rownumWidth:25,rownumbers:false,pagerpos:"center",recordpos:"right",footerrow:false,userDataOnFooter:false,hoverrows:true,altclass:"ui-priority-secondary",viewsortcols:[false,"vertical",true],resizeclass:"",autoencode:false,remapColumns:[],ajaxGridOptions:{},direction:"ltr"},$.jgrid.defaults,pin||{});var grid={headers:[],cols:[],footers:[],dragStart:function(e,t,n){this.resizing={idx:e,startX:t.clientX,sOL:n[0]};this.hDiv.style.cursor="col-resize";this.curGbox=$("#rs_m"+p.id,"#gbox_"+p.id);this.curGbox.css({display:"block",left:n[0],top:n[1],height:n[2]});if($.isFunction(p.resizeStart)){p.resizeStart.call(this,t,e)}document.onselectstart=new Function("return false")},dragMove:function(e){if(this.resizing){var t=e.clientX-this.resizing.startX,n=this.headers[this.resizing.idx],r=p.direction==="ltr"?n.width+t:n.width-t,i,s;if(r>33){this.curGbox.css({left:this.resizing.sOL+t});if(p.forceFit===true){i=this.headers[this.resizing.idx+p.nv];s=p.direction==="ltr"?i.width-t:i.width+t;if(s>33){n.newWidth=r;i.newWidth=s}}else{this.newWidth=p.direction==="ltr"?p.tblwidth+t:p.tblwidth-t;n.newWidth=r}}}},dragEnd:function(){this.hDiv.style.cursor="default";if(this.resizing){var e=this.resizing.idx,t=this.headers[e].newWidth||this.headers[e].width;t=parseInt(t);this.resizing=false;$("#rs_m"+p.id).css("display","none");p.colModel[e].width=t;this.headers[e].width=t;this.headers[e].el.style.width=t+"px";if(this.cols.length>0){this.cols[e].style.width=t+"px"}if(this.footers.length>0){this.footers[e].style.width=t+"px"}if(p.forceFit===true){t=this.headers[e+p.nv].newWidth||this.headers[e+p.nv].width;this.headers[e+p.nv].width=t;this.headers[e+p.nv].el.style.width=t+"px";if(this.cols.length>0){this.cols[e+p.nv].style.width=t+"px"}if(this.footers.length>0){this.footers[e+p.nv].style.width=t+"px"}p.colModel[e+p.nv].width=t}else{p.tblwidth=this.newWidth||p.tblwidth;$("table:first",this.bDiv).css("width",p.tblwidth+"px");$("table:first",this.hDiv).css("width",p.tblwidth+"px");this.hDiv.scrollLeft=this.bDiv.scrollLeft;if(p.footerrow){$("table:first",this.sDiv).css("width",p.tblwidth+"px");this.sDiv.scrollLeft=this.bDiv.scrollLeft}}if($.isFunction(p.resizeStop)){p.resizeStop.call(this,t,e)}}this.curGbox=null;document.onselectstart=new Function("return true")},populateVisible:function(){if(grid.timer){clearTimeout(grid.timer)}grid.timer=null;var e=$(grid.bDiv).height();if(!e){return}var t=$("table:first",grid.bDiv);var n=$("> tbody > tr:visible:first",t);var r=n.outerHeight()||grid.prevRowHeight;if(!r){return}grid.prevRowHeight=r;var i=p.rowNum;if(i<10){i=parseInt(e/r)+1<<1;if(i<10){i=10}p.rowNum=i}var s=grid.scrollTop=grid.bDiv.scrollTop;var o=Math.round(t.position().top)-s;var u=o+t.height();var a=r*i;var f,l,c;if(o<=0&&u<e&&(p.lastpage==null||parseInt((u+s+a-1)/a)<p.lastpage)){l=parseInt((e-u+a-1)/a);if(u>=0||l<2||p.scroll===true){f=parseInt((u+s)/a)+1;o=-1}else{o=1}}if(o>0){f=parseInt(s/a)+1;l=parseInt((s+e)/a)+2-f;c=true}if(l){if(p.lastpage&&f>p.lastpage){return}if(grid.hDiv.loading){grid.timer=setTimeout(grid.populateVisible,200)}else{p.page=f;if(c){grid.selectionPreserver(t[0]);grid.emptyRows(grid.bDiv)}grid.populate(l)}}},scrollGrid:function(){if(p.scroll){var e=grid.bDiv.scrollTop;if(e!=grid.scrollTop){grid.scrollTop=e;if(grid.timer){clearTimeout(grid.timer)}grid.timer=setTimeout(grid.populateVisible,200)}}grid.hDiv.scrollLeft=grid.bDiv.scrollLeft;if(p.footerrow){grid.sDiv.scrollLeft=grid.bDiv.scrollLeft}},selectionPreserver:function(e){var t=e.p;var n=t.selrow,r=t.selarrrow?$.makeArray(t.selarrrow):null;var i=e.grid.bDiv.scrollLeft;var s=t.gridComplete;t.gridComplete=function(){t.selrow=null;t.selarrrow=[];if(t.multiselect&&r&&r.length>0){for(var o=0;o<r.length;o++){if(r[o]!=n){$(e).jqGrid("setSelection",r[o],false)}}}if(n){$(e).jqGrid("setSelection",n,false)}e.grid.bDiv.scrollLeft=i;if(t.gridComplete=s){s()}}}};this.p=p;var i,dir,ts;if(this.p.colNames.length===0){for(i=0;i<this.p.colModel.length;i++){this.p.colNames[i]=this.p.colModel[i].label||this.p.colModel[i].name}}if(this.p.colNames.length!==this.p.colModel.length){alert($.jgrid.errors.model);return}var gv=$("<div class='ui-jqgrid-view'></div>"),ii,isMSIE=$.browser.msie?true:false,isSafari=$.browser.safari?true:false;ts=this;ts.p.direction=$.trim(ts.p.direction.toLowerCase());if($.inArray(ts.p.direction,["ltr","rtl"])==-1){ts.p.direction="ltr"}dir=ts.p.direction;$(gv).insertBefore(this);$(this).appendTo(gv).removeClass("scroll");var eg=$("<div class='ui-jqgrid ui-widget ui-widget-content ui-corner-all'></div>");$(eg).insertBefore(gv).attr({id:"gbox_"+this.id,dir:dir});$(gv).appendTo(eg).attr("id","gview_"+this.id);if(isMSIE&&$.browser.version<=6){ii='<iframe style="display:block;position:absolute;z-index:-1;filter:Alpha(Opacity=\'0\');" src="javascript:false;"></iframe>'}else{ii=""}$("<div class='ui-widget-overlay jqgrid-overlay' id='lui_"+this.id+"'></div>").append(ii).insertBefore(gv);$("<div class='loading' id='load_"+this.id+"'> </div>").insertBefore(gv);$(this).attr({cellSpacing:"0",cellPadding:"0",border:"0",role:"grid","aria-multiselectable":!!this.p.multiselect,"aria-labelledby":"gbox_"+this.id});var sortkeys=["shiftKey","altKey","ctrlKey"],IntNum=function(e,t){e=parseInt(e,10);if(isNaN(e)){return t?t:0}else{return e}},formatCol=function(e,t){var n=ts.p.colModel[e].align,r='style="',i=ts.p.colModel[e].classes;if(n){r+="text-align:"+n+";"}if(ts.p.colModel[e].hidden===true){r+="display:none;"}if(t===0){r+="width: "+grid.headers[e].width+"px;"}return r+'"'+(i!==undefined?' class="'+i+'"':"")},addCell=function(e,t,n,r,i){var s,o;s=formatter(e,t,n,i,"add");o=formatCol(n,r);return'<td role="gridcell" '+o+' title="'+$.jgrid.stripHtml(s)+'">'+s+"</td>"},formatter=function(e,t,n,r,i){var s=ts.p.colModel[n],o;if(typeof s.formatter!=="undefined"){var u={rowId:e,colModel:s};if($.isFunction(s.formatter)){o=s.formatter(t,u,r,i)}else{if($.fmatter){o=$.fn.fmatter(s.formatter,t,u,r,i)}else{o=cellVal(t)}}}else{o=cellVal(t)}return o},cellVal=function(e){return e===undefined||e===null||e===""?"&#160;":ts.p.autoencode?$.jgrid.htmlEncode(e+""):e+""},addMulti=function(e,t,n){var r='<input type="checkbox" id="jqg_'+e+'" class="cbox" name="jqg_'+e+'"/>',i=formatCol(t,n);return"<td role='gridcell' "+i+">"+r+"</td>"},addRowNum=function(e,t,n,r){var i=(parseInt(n)-1)*parseInt(r)+1+t,s=formatCol(e,t);return'<td role="gridcell" class="ui-state-default jqgrid-rownum" '+s+">"+i+"</td>"},reader=function(e){var t,n=[],r=0,i;for(i=0;i<ts.p.colModel.length;i++){t=ts.p.colModel[i];if(t.name!=="cb"&&t.name!=="subgrid"&&t.name!=="rn"){n[r]=e=="xml"?t.xmlmap||t.name:t.jsonmap||t.name;r++}}return n},orderedCols=function(e){var t=ts.p.remapColumns;if(!t||!t.length){t=$.map(ts.p.colModel,function(e,t){return t})}if(e){t=$.map(t,function(t){return t<e?null:t-e})}return t},emptyRows=function(e,t){var n=$("tbody:first",e);if(!ts.p.gridview||ts.p.jqgdnd){$("*",n).children().unbind()}if(isMSIE){$.jgrid.empty.apply(n[0])}else{n[0].innerHTML=""}if(t&&ts.p.scroll){$(">div:first",e).css({height:"auto"}).children("div:first").css({height:0,display:"none"});e.scrollTop=0}n=null},addXmlData=function(e,t,n,r,i){var s=new Date;ts.p.reccount=0;if($.isXMLDoc(e)){if(ts.p.treeANode===-1&&!ts.p.scroll){emptyRows(t);n=0}else{n=n>0?n:0}}else{return}var o,u,a=0,f,l,c=0,h=0,p=0,d,v,m=[],g,y={},b=ts.rows.length,w,E,S=[],x=0,T=ts.p.altRows===true?" "+ts.p.altclass:"",N;if(!ts.p.xmlReader.repeatitems){m=reader("xml")}if(ts.p.keyIndex===false){d=ts.p.xmlReader.id}else{d=ts.p.keyIndex}if(m.length>0&&!isNaN(d)){if(ts.p.remapColumns&&ts.p.remapColumns.length){d=$.inArray(d,ts.p.remapColumns)}d=m[d]}if((d+"").indexOf("[")===-1){if(m.length){v=function(e,t){return $(d,e).text()||t}}else{v=function(e,t){return $(ts.p.xmlReader.cell,e).eq(d).text()||t}}}else{v=function(e,t){return e.getAttribute(d.replace(/[\[\]]/g,""))||t}}$(ts.p.xmlReader.page,e).each(function(){ts.p.page=this.textContent||this.text||1});$(ts.p.xmlReader.total,e).each(function(){ts.p.lastpage=this.textContent||this.text||1});$(ts.p.xmlReader.records,e).each(function(){ts.p.records=this.textContent||this.text||0});$(ts.p.xmlReader.userdata,e).each(function(){ts.p.userData[this.getAttribute("name")]=this.textContent||this.text});var C=$(ts.p.xmlReader.root+" "+ts.p.xmlReader.row,e),k=C.length,L=0;if(C&&k){var A=parseInt(ts.p.rowNum),O=ts.p.scroll?(parseInt(ts.p.page)-1)*A+1:1;if(i){A*=i+1}var M=$.isFunction(ts.p.afterInsertRow);while(L<k){w=C[L];E=v(w,O+L);N=L%2==1?T:"";S[x++]='<tr id="'+E+'" role="row" class ="ui-widget-content jqgrow ui-row-'+ts.p.direction+""+N+'">';if(ts.p.rownumbers===true){S[x++]=addRowNum(0,L,ts.p.page,ts.p.rowNum);p=1}if(ts.p.multiselect===true){S[x++]=addMulti(E,p,L);c=1}if(ts.p.subGrid===true){S[x++]=$(ts).jqGrid("addSubGridCell",c+p,L+n);h=1}if(ts.p.xmlReader.repeatitems){if(!g){g=orderedCols(c+h+p)}var _=$(ts.p.xmlReader.cell,w);$.each(g,function(e){var t=_[this];if(!t){return false}f=t.textContent||t.text;y[ts.p.colModel[e+c+h+p].name]=f;S[x++]=addCell(E,f,e+c+h+p,L+n,w)})}else{for(o=0;o<m.length;o++){f=$(m[o],w).text();y[ts.p.colModel[o+c+h+p].name]=f;S[x++]=addCell(E,f,o+c+h+p,L+n,w)}}S[x++]="</tr>";if(ts.p.gridview===false){if(ts.p.treeGrid===true){u=ts.p.treeANode>=-1?ts.p.treeANode:0;l=$(S.join(""))[0];try{$(ts).jqGrid("setTreeNode",y,l)}catch(D){}b===0?$("tbody:first",t).append(l):$(ts.rows[L+u+n]).after(l)}else{$("tbody:first",t).append(S.join(""))}if(ts.p.subGrid===true){try{$(ts).jqGrid("addSubGrid",ts.rows[ts.rows.length-1],c+p)}catch(D){}}if(M){ts.p.afterInsertRow.call(ts,E,y,w)}S=[];x=0}y={};a++;L++;if(a==A){break}}}if(ts.p.gridview===true){$("tbody:first",t).append(S.join(""))}ts.p.totaltime=new Date-s;if(a>0){ts.grid.cols=ts.rows[0].cells;if(ts.p.records===0){ts.p.records=k}}S=null;if(!ts.p.treeGrid&&!ts.p.scroll){ts.grid.bDiv.scrollTop=0}ts.p.reccount=a;ts.p.treeANode=-1;if(ts.p.userDataOnFooter){$(ts).jqGrid("footerData","set",ts.p.userData,true)}if(!r){updatepager(false,true)}},addJSONData=function(data,t,rcnt,more,adjust){var startReq=new Date;ts.p.reccount=0;if(data){if(ts.p.treeANode===-1&&!ts.p.scroll){emptyRows(t);rcnt=0}else{rcnt=rcnt>0?rcnt:0}}else{return}var ir=0,v,i,j,row,f=[],F,cur,gi=0,si=0,ni=0,len,drows,idn,rd={},fpos,rl=ts.rows.length,idr,rowData=[],ari=0,cn=ts.p.altRows===true?" "+ts.p.altclass:"",cn1;ts.p.page=data[ts.p.jsonReader.page]||1;ts.p.lastpage=data[ts.p.jsonReader.total]||1;ts.p.records=data[ts.p.jsonReader.records]||0;ts.p.userData=data[ts.p.jsonReader.userdata]||{};if(!ts.p.jsonReader.repeatitems){F=f=reader("json")}if(ts.p.keyIndex===false){idn=ts.p.jsonReader.id}else{idn=ts.p.keyIndex}if(f.length>0&&!isNaN(idn)){if(ts.p.remapColumns&&ts.p.remapColumns.length){idn=$.inArray(idn,ts.p.remapColumns)}idn=f[idn]}drows=data[ts.p.jsonReader.root];if(drows){len=drows.length,i=0;var rn=parseInt(ts.p.rowNum),br=ts.p.scroll?(parseInt(ts.p.page)-1)*rn+1:1;if(adjust){rn*=adjust+1}var afterInsRow=$.isFunction(ts.p.afterInsertRow);while(i<len){cur=drows[i];idr=cur[idn];if(idr===undefined){idr=br+i;if(f.length===0){if(ts.p.jsonReader.cell){var ccur=cur[ts.p.jsonReader.cell];idr=ccur[idn]||idr;ccur=null}}}cn1=i%2==1?cn:"";rowData[ari++]='<tr id="'+idr+'" role="row" class= "ui-widget-content jqgrow ui-row-'+ts.p.direction+""+cn1+'">';if(ts.p.rownumbers===true){rowData[ari++]=addRowNum(0,i,ts.p.page,ts.p.rowNum);ni=1}if(ts.p.multiselect){rowData[ari++]=addMulti(idr,ni,i);gi=1}if(ts.p.subGrid){rowData[ari++]=$(ts).jqGrid("addSubGridCell",gi+ni,i+rcnt);si=1}if(ts.p.jsonReader.repeatitems){if(ts.p.jsonReader.cell){cur=cur[ts.p.jsonReader.cell]}if(!F){F=orderedCols(gi+si+ni)}}var noOfTds=F.length;for(j=0;j<F.length;j++){v=cur[F[j]];if(v===undefined){try{v=eval("cur."+F[j])}catch(e){}}rowData[ari++]=addCell(idr,v,j+gi+si+ni,i+rcnt,cur);rd[ts.p.colModel[j+gi+si+ni].name]=v}rowData[ari++]="</tr>";if(ts.p.gridview===false){if(ts.p.treeGrid===true){fpos=ts.p.treeANode>=-1?ts.p.treeANode:0;row=$(rowData.join(""))[0];try{$(ts).jqGrid("setTreeNode",rd,row)}catch(e){}rl===0?$("tbody:first",t).append(row):$(ts.rows[i+fpos+rcnt]).after(row)}else{$("tbody:first",t).append(rowData.join(""))}if(ts.p.subGrid===true){try{$(ts).jqGrid("addSubGrid",ts.rows[ts.rows.length-1],gi+ni)}catch(e){}}if(afterInsRow){ts.p.afterInsertRow(idr,rd,cur)}rowData=[];ari=0}rd={};ir++;i++;if(ir==rn){break}}if(len<5){var min=5;var count=min-len;var numRows=len+1;for(i=0;i<count;i++){rowData[ari++]='<tr id="'+numRows+'" role="row" class="ui-widget-content jqgrow ui-row-ltr">';numRows++;for(j=0;j<noOfTds;j++){rowData[ari++]='<td role="gridcell" class="ui-state-default jqgrid-rownum" style="text-align:center;"></td>'}rowData[ari++]="</tr>"}}if(ts.p.gridview===true){$("tbody:first",t).append(rowData.join(""))}ts.p.totaltime=new Date-startReq;if(ir>0){ts.grid.cols=ts.rows[0].cells;if(ts.p.records===0){ts.p.records=len}}}if(!ts.p.treeGrid&&!ts.p.scroll){ts.grid.bDiv.scrollTop=0}ts.p.reccount=ir;ts.p.treeANode=-1;if(ts.p.userDataOnFooter){$(ts).jqGrid("footerData","set",ts.p.userData,true)}if(!more){updatepager(false,true)}},updatepager=function(e,t){var n,r,i,s,o,u,a,f;i=(parseInt(ts.p.page)-1)*parseInt(ts.p.rowNum);u=i+ts.p.reccount;if(ts.p.scroll){var l=$("tbody:first > tr",ts.grid.bDiv);i=u-l.length;var c=l.outerHeight();if(c){var h=i*c;var p=parseInt(ts.p.records,10)*c;$(">div:first",ts.grid.bDiv).css({height:p}).children("div:first").css({height:h,display:h?"":"none"})}}if(ts.p.pager){f=$.jgrid.formatter.integer||{};if(ts.p.loadonce){n=r=1;ts.p.lastpage=ts.page=1;$(".selbox",ts.p.pager).attr("disabled",true)}else{n=IntNum(ts.p.page);r=IntNum(ts.p.lastpage);$(".selbox",ts.p.pager).attr("disabled",false)}if(ts.p.pginput===true){$(".ui-pg-input",ts.p.pager).val(ts.p.page);$("#sp_1",ts.p.pager).html($.fmatter?$.fmatter.util.NumberFormat(ts.p.lastpage,f):ts.p.lastpage).width()}if(ts.p.viewrecords){if(ts.p.reccount===0){$(".ui-paging-info",ts.p.pager).html(ts.p.emptyrecords)}else{o=i+1;a=ts.p.records;if($.fmatter){o=$.fmatter.util.NumberFormat(o,f);u=$.fmatter.util.NumberFormat(u,f);a=$.fmatter.util.NumberFormat(a,f)}$(".ui-paging-info",ts.p.pager).html($.jgrid.format(ts.p.recordtext,o,u,a))}}if(ts.p.pgbuttons===true){if(n<=0){n=r=1}if(n==1){$("#first, #prev",ts.p.pager).addClass("ui-state-disabled").removeClass("ui-state-hover")}else{$("#first, #prev",ts.p.pager).removeClass("ui-state-disabled")}if(n==r){$("#next, #last",ts.p.pager).addClass("ui-state-disabled").removeClass("ui-state-hover")}else{$("#next, #last",ts.p.pager).removeClass("ui-state-disabled")}}}if(e===true&&ts.p.rownumbers===true){$("td.jqgrid-rownum",ts.rows).each(function(e){$(this).html(i+1+e)})}if(t&&ts.p.jqgdnd){$(ts).jqGrid("gridDnD","updateDnD")}if($.isFunction(ts.p.gridComplete)){ts.p.gridComplete()}},populate=function(e){if(!ts.grid.hDiv.loading){var t=ts.p.scroll&&e==false;var n={},r,i,s=ts.p.prmNames;if(s.search!==null){n[s.search]=ts.p.search}if(s.nd!=null){n[s.nd]=(new Date).getTime()}if(s.rows!==null){n[s.rows]=ts.p.rowNum}if(s.page!==null){n[s.page]=ts.p.page}if(s.sort!==null){n[s.sort]=ts.p.sortname}if(s.order!==null){n[s.order]=ts.p.sortorder}var o=ts.p.loadComplete;var u=$.isFunction(o);if(!u){o=null}var a=0;e=e||1;if(e>1){if(s.npage!=null){n[s.npage]=e;a=e-1;e=1}else{o=function(t){if(u){ts.p.loadComplete.call(ts,t)}ts.grid.hDiv.loading=false;ts.p.page++;populate(e-1)}}}else{if(s.npage!=null){delete ts.p.postData[s.npage]}}$.extend(ts.p.postData,n);var f=!ts.p.scroll?0:ts.rows.length-1;if($.isFunction(ts.p.datatype)){ts.p.datatype(ts.p.postData,"load_"+ts.p.id);return}else{if($.isFunction(ts.p.beforeRequest)){ts.p.beforeRequest.call(ts)}}r=ts.p.datatype.toLowerCase();switch(r){case"json":case"jsonp":case"xml":case"script":$.ajax($.extend({url:ts.p.url,type:ts.p.mtype,dataType:r,data:$.isFunction(ts.p.serializeGridData)?ts.p.serializeGridData(ts.p.postData):ts.p.postData,complete:function(n,i){if(i=="success"||n.statusText=="OK"&&n.status=="200"){if(r==="xml"){addXmlData(n.responseXML,ts.grid.bDiv,f,e>1,a)}else{addJSONData($.jgrid.parse(n.responseText),ts.grid.bDiv,f,e>1,a)}if(o){o.call(ts,n)}if(t){ts.grid.populateVisible()}}n=null;endReq()},error:function(e,t,n){if($.isFunction(ts.p.loadError)){ts.p.loadError.call(ts,e,t,n)}endReq();e=null},beforeSend:function(e){beginReq();if($.isFunction(ts.p.loadBeforeSend)){ts.p.loadBeforeSend.call(this,e)}}},$.jgrid.ajaxOptions,ts.p.ajaxGridOptions));if(ts.p.loadonce||ts.p.treeGrid){ts.p.datatype="local"}break;case"xmlstring":beginReq();addXmlData(i=$.jgrid.stringToDoc(ts.p.datastr),ts.grid.bDiv);ts.p.datatype="local";if(u){ts.p.loadComplete.call(ts,i)}ts.p.datastr=null;endReq();break;case"jsonstring":beginReq();if(typeof ts.p.datastr=="string"){i=$.jgrid.parse(ts.p.datastr)}else{i=ts.p.datastr}addJSONData(i,ts.grid.bDiv);ts.p.datatype="local";if(u){ts.p.loadComplete.call(ts,i)}ts.p.datastr=null;endReq();break;case"local":case"clientside":beginReq();ts.p.datatype="local";sortArrayData();endReq();break}}},beginReq=function(){ts.grid.hDiv.loading=true;if(ts.p.hiddengrid){return}switch(ts.p.loadui){case"disable":break;case"enable":$("#load_"+ts.p.id).show();break;case"block":$("#lui_"+ts.p.id).show();$("#load_"+ts.p.id).show();break}},endReq=function(){ts.grid.hDiv.loading=false;switch(ts.p.loadui){case"disable":break;case"enable":$("#load_"+ts.p.id).hide();break;case"block":$("#lui_"+ts.p.id).hide();$("#load_"+ts.p.id).hide();break}},sortArrayData=function(){var e=/[\$,%]/g;var t=[],n=0,r,i,s,o=ts.p.sortorder=="asc"?1:-1;$.each(ts.p.colModel,function(e,t){if(this.index==ts.p.sortname||this.name==ts.p.sortname){n=ts.p.lastsort=e;r=this.sorttype;return false}});if(r=="float"||r=="number"||r=="currency"){s=function(t){var n=parseFloat(t.replace(e,""));return isNaN(n)?0:n}}else{if(r=="int"||r=="integer"){s=function(t){return IntNum(t.replace(e,""))}}else{if(r=="date"){s=function(e){var t=ts.p.colModel[n].datefmt||"Y-m-d";return parseDate(t,e).getTime()}}else{s=function(e){return $.trim(e.toUpperCase())}}}}$.each(ts.rows,function(e,r){try{i=$.unformat($(r).children("td").eq(n),{colModel:ts.p.colModel[n]},n,true)}catch(o){i=$(r).children("td").eq(n).text()}r.sortKey=s(i);t[e]=this});if(ts.p.treeGrid){$(ts).jqGrid("SortTree",o)}else{t.sort(function(e,t){if(e.sortKey<t.sortKey){return-o}if(e.sortKey>t.sortKey){return o}return 0});if(t[0]){$("td",t[0]).each(function(e){$(this).css("width",grid.headers[e].width+"px")});ts.grid.cols=t[0].cells}var u="";if(ts.p.altRows){u=ts.p.altclass}$.each(t,function(e,t){if(u){if(e%2==1){$(t).addClass(u)}else{$(t).removeClass(u)}}$("tbody",ts.grid.bDiv).append(t);t.sortKey=null})}ts.grid.bDiv.scrollTop=0},parseDate=function(e,t){var n={m:1,d:1,y:1970,h:0,i:0,s:0},r,i,s;t=t.split(/[\\\/:_;.\t\T\s-]/);e=e.split(/[\\\/:_;.\t\T\s-]/);var o=$.jgrid.formatter.date.monthNames;for(r=0,i=e.length;r<i;r++){if(e[r]=="M"){s=$.inArray(t[r],o);if(s!==-1&&s<12){t[r]=s+1}}if(e[r]=="F"){s=$.inArray(t[r],o);if(s!==-1&&s>11){t[r]=s+1-12}}n[e[r].toLowerCase()]=parseInt(t[r],10)}n.m=parseInt(n.m,10)-1;var u=n.y;if(u>=70&&u<=99){n.y=1900+n.y}else{if(u>=0&&u<=69){n.y=2e3+n.y}}return new Date(n.y,n.m,n.d,n.h,n.i,n.s,0)},setPager=function(){var e="<td class='ui-pg-button ui-state-disabled' style='width:4px;'><span class='ui-separator'></span></td>",t=$(ts.p.pager).attr("id")||"pager",n="",r="<table cellspacing='0' cellpadding='0' border='0' style='table-layout:auto;' class='ui-pg-table'><tbody><tr>",i="",s,o,u,a,f,l,c,h=function(e){if($.isFunction(ts.p.onPaging)){ts.p.onPaging(e)}ts.p.selrow=null;if(ts.p.multiselect){ts.p.selarrrow=[];$("#cb_"+$.jgrid.jqID(ts.p.id),ts.grid.hDiv).attr("checked",false)}ts.p.savedRow=[]};s="pg_"+t;o=t+"_left";u=t+"_center";a=t+"_right";$(ts.p.pager).addClass("ui-jqgrid-pager ui-corner-bottom").append("<div id='"+s+"' class='ui-pager-control' role='group'><table cellspacing='0' cellpadding='0' border='0' class='ui-pg-table' style='width:100%;table-layout:fixed;' role='row'><tbody><tr><td id='"+o+"' align='left'></td><td id='"+u+"' align='center' style='white-space:pre;'></td><td id='"+a+"' align='right'></td></tr></tbody></table></div>").attr("dir","ltr");ts.p.rowList=[15,20,30,40,50];ts.p.rowNum=15;if(ts.p.rowList.length>0){i="<td dir='"+dir+"'>";i+="<select class='ui-pg-selbox' role='listbox'>";for(c=0;c<ts.p.rowList.length;c++){i+="<option role='option' value='"+ts.p.rowList[c]+"'"+(ts.p.rowNum==ts.p.rowList[c]?" selected":"")+">"+ts.p.rowList[c]+"</option>"}i+="</select></td>"}if(dir=="rtl"){r+=i}if(ts.p.pginput===true){n="<td dir='"+dir+"'>"+$.jgrid.format(ts.p.pgtext||"","<input class='ui-pg-input' type='text' size='2' maxlength='7' value='0' role='textbox'/>","<span id='sp_1'></span>")+"</td>"}if(ts.p.pgbuttons===true){var p=["first","prev","next","last"];if(dir=="rtl"){p.reverse()}r+="<td id='"+p[0]+"' class='ui-pg-button ui-corner-all'><span class='ui-icon ui-icon-seek-first'></span></td><td> </td>";r+="<td id='"+p[1]+"' class='ui-pg-button ui-corner-all'><span class='ui-icon ui-icon-seek-prev'></span></td><td> </td>";r+=n!=""?e+n+e:"";r+="<td id='"+p[2]+"' class='ui-pg-button ui-corner-all'><span class='ui-icon ui-icon-seek-next'></span></td><td> </td>";r+="<td id='"+p[3]+"' class='ui-pg-button ui-corner-all'><span class='ui-icon ui-icon-seek-end'></span></td><td>   </td><td>   </td>"}else{if(n!=""){r+=n}}if(dir=="ltr"){r+=i}r+="</tr></tbody></table>";if(ts.p.viewrecords===true){$("td#"+t+"_"+ts.p.recordpos,"#"+s).append("<div dir='"+dir+"' style='text-align:"+ts.p.recordpos+"' class='ui-paging-info'></div>")}$("td#"+t+"_"+ts.p.pagerpos,"#"+s).append(r);l=$(".ui-jqgrid").css("font-size")||"11px";$("body").append("<div id='testpg' class='ui-jqgrid ui-widget ui-widget-content' style='font-size:"+l+";visibility:hidden;' ></div>");f=$(r).clone().appendTo("#testpg").width();$("#testpg").remove();if(f>0){if(n!=""){f+=50}$("td#"+t+"_"+ts.p.pagerpos,"#"+s).width(f)}ts.p._nvtd=[];ts.p._nvtd[0]=f?Math.floor((ts.p.width-f)/2):Math.floor(ts.p.width/3);ts.p._nvtd[1]=0;r=null;$(".ui-pg-selbox","#"+s).bind("change",function(){ts.p.page=Math.round(ts.p.rowNum*(ts.p.page-1)/this.value-.5)+1;ts.p.rowNum=this.value;h("records");populate();return false});if(ts.p.pgbuttons===true){$(".ui-pg-button","#"+s).hover(function(e){if($(this).hasClass("ui-state-disabled")){this.style.cursor="default"}else{$(this).addClass("ui-state-hover");this.style.cursor="pointer"}},function(e){if($(this).hasClass("ui-state-disabled")){}else{$(this).removeClass("ui-state-hover");this.style.cursor="default"}});$("#first, #prev, #next, #last",ts.p.pager).click(function(e){var t=IntNum(ts.p.page),n=IntNum(ts.p.lastpage),r=false,i=true,s=true,o=true,u=true;if(n===0||n===1){i=false;s=false;o=false;u=false}else{if(n>1&&t>=1){if(t===1){i=false;s=false}else{if(t>1&&t<n){}else{if(t===n){o=false;u=false}}}}else{if(n>1&&t===0){o=false;u=false;t=n-1}}}if(this.id==="first"&&i){ts.p.page=1;r=true}if(this.id==="prev"&&s){ts.p.page=t-1;r=true}if(this.id==="next"&&o){ts.p.page=t+1;r=true}if(this.id==="last"&&u){ts.p.page=n;r=true}if(r){h(this.id);populate()}return false})}if(ts.p.pginput===true){$("input.ui-pg-input","#"+s).keypress(function(e){var t=e.charCode?e.charCode:e.keyCode?e.keyCode:0;if(t==13){ts.p.page=$(this).val()>0?$(this).val():ts.p.page;h("user");populate();return false}return this})}},sortData=function(e,t,n,r){if(!ts.p.colModel[t].sortable){return}var i,s;if(ts.p.savedRow.length>0){return}if(!n){if(ts.p.lastsort==t){if(ts.p.sortorder=="asc"){ts.p.sortorder="desc"}else{if(ts.p.sortorder=="desc"){ts.p.sortorder="asc"}}}else{ts.p.sortorder="asc"}ts.p.page=1}if(r){if(ts.p.lastsort==t&&ts.p.sortorder==r){return}else{ts.p.sortorder=r}}var o=$("thead:first",ts.grid.hDiv).get(0);$("tr th:eq("+ts.p.lastsort+") span.ui-grid-ico-sort",o).addClass("ui-state-disabled");$("tr th:eq("+ts.p.lastsort+")",o).attr("aria-selected","false");$("tr th:eq("+t+") span.ui-icon-"+ts.p.sortorder,o).removeClass("ui-state-disabled");$("tr th:eq("+t+")",o).attr("aria-selected","true");if(!ts.p.viewsortcols[0]){if(ts.p.lastsort!=t){$("tr th:eq("+ts.p.lastsort+") span.s-ico",o).hide();$("tr th:eq("+t+") span.s-ico",o).show()}}ts.p.lastsort=t;e=e.substring(5);ts.p.sortname=ts.p.colModel[t].index||e;s=ts.p.sortorder;if($.isFunction(ts.p.onSortCol)){ts.p.onSortCol.call(ts,e,t,s)}if(ts.p.datatype=="local"){if(ts.p.deselectAfterSort){$(ts).jqGrid("resetSelection")}}else{ts.p.selrow=null;if(ts.p.multiselect){$("#cb_"+$.jgrid.jqID(ts.p.id),ts.grid.hDiv).attr("checked",false)}ts.p.selarrrow=[];ts.p.savedRow=[];if(ts.p.scroll){emptyRows(ts.grid.bDiv,true)}}if(ts.p.subGrid&&ts.p.datatype=="local"){$("td.sgexpanded","#"+ts.p.id).each(function(){$(this).trigger("click")})}populate();if(ts.p.sortname!=e&&t){ts.p.lastsort=t}},setColWidth=function(){var e=0,t=ts.p.cellLayout,n=0,r,i=ts.p.scrollOffset,s,o=false,u,a=0,f=0,l=0,c;if(isSafari){t=0}$.each(ts.p.colModel,function(r){if(typeof this.hidden==="undefined"){this.hidden=false}if(this.hidden===false){e+=IntNum(this.width);if(this.fixed){a+=this.width;f+=this.width+t}else{n++}l++}});if(isNaN(ts.p.width)){ts.p.width=grid.width=e}else{grid.width=ts.p.width}ts.p.tblwidth=e;if(ts.p.shrinkToFit===false&&ts.p.forceFit===true){ts.p.forceFit=false}if(ts.p.shrinkToFit===true&&n>0){u=grid.width-t*n-f;if(isNaN(ts.p.height)){}else{u-=i;o=true}e=0;$.each(ts.p.colModel,function(t){if(this.hidden===false&&!this.fixed){s=Math.floor(u/(ts.p.tblwidth-a)*this.width);this.width=s;e+=s;r=t}});c=0;if(o){if(grid.width-f-(e+t*n)!==i){c=grid.width-f-(e+t*n)-i}}else{if(!o&&Math.abs(grid.width-f-(e+t*n))!==1){c=grid.width-f-(e+t*n)}}ts.p.colModel[r].width+=c;ts.p.tblwidth=e+c+a+l*t}},nextVisible=function(e){var t=e,n=e,r;for(r=e+1;r<ts.p.colModel.length;r++){if(ts.p.colModel[r].hidden!==true){n=r;break}}return n-t},getOffset=function(e){var t,n={},r=isSafari?0:ts.p.cellLayout;n[0]=n[1]=n[2]=0;for(t=0;t<=e;t++){if(ts.p.colModel[t].hidden===false){n[0]+=ts.p.colModel[t].width+r}}if(ts.p.direction=="rtl"){n[0]=ts.p.width-n[0]}n[0]=n[0]-ts.grid.bDiv.scrollLeft;if($(ts.grid.cDiv).is(":visible")){n[1]+=$(ts.grid.cDiv).height()+parseInt($(ts.grid.cDiv).css("padding-top"))+parseInt($(ts.grid.cDiv).css("padding-bottom"))}if(ts.p.toolbar[0]==true&&(ts.p.toolbar[1]=="top"||ts.p.toolbar[1]=="both")){n[1]+=$(ts.grid.uDiv).height()+parseInt($(ts.grid.uDiv).css("border-top-width"))+parseInt($(ts.grid.uDiv).css("border-bottom-width"))}n[2]+=$(ts.grid.bDiv).height()+$(ts.grid.hDiv).height();return n};this.p.id=this.id;if($.inArray(ts.p.multikey,sortkeys)==-1){ts.p.multikey=false}ts.p.keyIndex=false;for(i=0;i<ts.p.colModel.length;i++){if(ts.p.colModel[i].key===true){ts.p.keyIndex=i;break}}ts.p.sortorder=ts.p.sortorder.toLowerCase();if(this.p.treeGrid===true){try{$(this).jqGrid("setTreeGrid")}catch(_){}}if(this.p.subGrid){try{$(ts).jqGrid("setSubGrid")}catch(_){}}if(this.p.multiselect){this.p.colNames.unshift("<input id='cb_"+this.p.id+"' class='cbox' type='checkbox'/>");this.p.colModel.unshift({name:"cb",width:isSafari?ts.p.multiselectWidth+ts.p.cellLayout:ts.p.multiselectWidth,sortable:false,resizable:false,hidedlg:true,search:false,align:"center",fixed:true})}if(this.p.rownumbers){this.p.colNames.unshift("");this.p.colModel.unshift({name:"rn",width:ts.p.rownumWidth,sortable:false,resizable:false,hidedlg:true,search:false,align:"center",fixed:true})}ts.p.xmlReader=$.extend({root:"rows",row:"row",page:"rows>page",total:"rows>total",records:"rows>records",repeatitems:true,cell:"cell",id:"[id]",userdata:"userdata",subgrid:{root:"rows",row:"row",repeatitems:true,cell:"cell"}},ts.p.xmlReader);ts.p.jsonReader=$.extend({root:"rows",page:"page",total:"total",records:"records",repeatitems:true,cell:"cell",id:"id",userdata:"userdata",subgrid:{root:"rows",repeatitems:true,cell:"cell"}},ts.p.jsonReader);if(ts.p.scroll){ts.p.pgbuttons=false;ts.p.pginput=false;ts.p.rowList=[]}var thead="<thead><tr class='ui-jqgrid-labels' role='rowheader'>",tdc,idn,w,res,sort,td,ptr,tbody,imgs,iac="",idc="";if(ts.p.shrinkToFit===true&&ts.p.forceFit===true){for(i=ts.p.colModel.length-1;i>=0;i--){if(!ts.p.colModel[i].hidden){ts.p.colModel[i].resizable=false;break}}}if(ts.p.viewsortcols[1]=="horizontal"){iac=" ui-i-asc";idc=" ui-i-desc"}tdc=isMSIE?"class='ui-th-div-ie'":"";imgs="<span class='s-ico' style='display:none'><span sort='asc' class='ui-grid-ico-sort ui-icon-asc"+iac+" ui-state-disabled ui-icon ui-icon-triangle-1-n ui-sort-"+dir+"'></span>";imgs+="<span sort='desc' class='ui-grid-ico-sort ui-icon-desc"+idc+" ui-state-disabled ui-icon ui-icon-triangle-1-s ui-sort-"+dir+"'></span></span>";for(i=0;i<this.p.colNames.length;i++){thead+="<th role='columnheader' class='ui-state-default ui-th-column ui-th-"+dir+"'>";idn=ts.p.colModel[i].index||ts.p.colModel[i].name;thead+="<div id='jqgh_"+ts.p.colModel[i].name+"' "+tdc+">"+ts.p.colNames[i];if(idn==ts.p.sortname){ts.p.lastsort=i}thead+=imgs+"</div></th>"}thead+="</tr></thead>";$(this).append(thead);$("thead tr:first th",this).hover(function(){$(this).addClass("ui-state-hover")},function(){$(this).removeClass("ui-state-hover")});if(this.p.multiselect){var onSA=true,emp=[],chk;if(typeof ts.p.onSelectAll!=="function"){onSA=false}$("#cb_"+$.jgrid.jqID(ts.p.id),this).bind("click",function(){if(this.checked){$("[id^=jqg_]",ts.rows).attr("checked",true);$(ts.rows).each(function(e){if(!$(this).hasClass("subgrid")){$(this).addClass("ui-state-highlight").attr("aria-selected","true");ts.p.selarrrow[e]=ts.p.selrow=this.id}});chk=true;emp=[]}else{$("[id^=jqg_]",ts.rows).attr("checked",false);$(ts.rows).each(function(e){if(!$(this).hasClass("subgrid")){$(this).removeClass("ui-state-highlight").attr("aria-selected","false");emp[e]=this.id}});ts.p.selarrrow=[];ts.p.selrow=null;chk=false}if(onSA){ts.p.onSelectAll(chk?ts.p.selarrrow:emp,chk)}})}$.each(ts.p.colModel,function(e){if(!this.width){this.width=150}this.width=parseInt(this.width)});if(ts.p.autowidth===true){var pw=$(eg).innerWidth();ts.p.width=pw>0?pw:"nw"}setColWidth();$(eg).css("width","100%").append("<div class='ui-jqgrid-resize-mark' id='rs_m"+ts.p.id+"'>&#160;</div>");$(gv).css("width","100%");thead=$("thead:first",ts).get(0);var tfoot="<table role='grid' style='width:"+ts.p.tblwidth+"px' class='ui-jqgrid-ftable' cellspacing='0' cellpadding='0' border='0'><tbody><tr role='row' class='ui-widget-content footrow footrow-"+dir+"'>";var thr=$("tr:first",thead);ts.p.disableClick=false;$("th",thr).each(function(e){var t=$("div",this)[0];w=ts.p.colModel[e].width;if(typeof ts.p.colModel[e].resizable==="undefined"){ts.p.colModel[e].resizable=true}if(ts.p.colModel[e].resizable){res=document.createElement("span");$(res).html("&#160;").addClass("ui-jqgrid-resize ui-jqgrid-resize-"+dir);!$.browser.opera?$(res).css("cursor","col-resize"):"";$(this).addClass(ts.p.resizeclass)}else{res=""}$(this).css("width",w+"px").prepend(res);if(ts.p.colModel[e].hidden){$(this).css("display","none")}grid.headers[e]={width:w,el:this};sort=ts.p.colModel[e].sortable;if(typeof sort!=="boolean"){ts.p.colModel[e].sortable=true;sort=true}var n=ts.p.colModel[e].name;if(!(n=="cb"||n=="subgrid"||n=="rn")){if(ts.p.viewsortcols[2]){$("div",this).addClass("ui-jqgrid-sortable")}}if(sort){if(ts.p.viewsortcols[0]){$("div span.s-ico",this).show();if(e==ts.p.lastsort){$("div span.ui-icon-"+ts.p.sortorder,this).removeClass("ui-state-disabled")}}else{if(e==ts.p.lastsort){$("div span.s-ico",this).show();$("div span.ui-icon-"+ts.p.sortorder,this).removeClass("ui-state-disabled")}}}tfoot+="<td role='gridcell' "+formatCol(e,0)+">&#160;</td>"}).mousedown(function(e){if($(e.target).closest("th>span.ui-jqgrid-resize").length!=1){return}var t=$.jgrid.getCellIndex(this);if(ts.p.forceFit===true){ts.p.nv=nextVisible(t)}grid.dragStart(t,e,getOffset(t));return false}).click(function(e){if(ts.p.disableClick){ts.p.disableClick=false;return false}var t="th>div.ui-jqgrid-sortable",n,r;if(!ts.p.viewsortcols[2]){t="th>div>span>span.ui-grid-ico-sort"}var i=$(e.target).closest(t);if(i.length!=1){return}var s=$.jgrid.getCellIndex(this);if(!ts.p.viewsortcols[2]){n=true,r=i.attr("sort")}sortData($("div",this)[0].id,s,n,r);return false});if(ts.p.sortable&&$.fn.sortable){try{$(ts).jqGrid("sortableColumns",thr)}catch(e){}}tfoot+="</tr></tbody></table>";tbody=document.createElement("tbody");this.appendChild(tbody);$(this).addClass("ui-jqgrid-btable");var hTable=$("<table class='ui-jqgrid-htable' style='width:100%' role='grid' aria-labelledby='gbox_"+this.id+"' cellspacing='0' cellpadding='0' border='0'></table>").append(thead),hg=ts.p.caption&&ts.p.hiddengrid===true?true:false,hb=$("<div class='ui-jqgrid-hbox"+(dir=="rtl"?"-rtl":"")+"' style='width:100%'></div>");grid.hDiv=document.createElement("div");$(grid.hDiv).css({width:"100%"}).addClass("ui-state-default ui-jqgrid-hdiv").append(hb);$(hb).append(hTable);if(hg){$(grid.hDiv).hide()}ts.p._height=0;if(ts.p.pager){if(typeof ts.p.pager=="string"){if(ts.p.pager.substr(0,1)!="#"){ts.p.pager="#"+ts.p.pager}}$(ts.p.pager).css({width:"100%"}).appendTo(eg).addClass("ui-state-default ui-jqgrid-pager");ts.p._height+=parseInt($(ts.p.pager).height(),10);if(hg){$(ts.p.pager).hide()}setPager()}if(ts.p.cellEdit===false&&ts.p.hoverrows===true){$(ts).bind("mouseover",function(e){ptr=$(e.target).closest("tr.jqgrow");if($(ptr).attr("class")!=="subgrid"){$(ptr).addClass("ui-state-hover")}return false}).bind("mouseout",function(e){ptr=$(e.target).closest("tr.jqgrow");$(ptr).removeClass("ui-state-hover");return false})}var ri,ci;$(ts).before(grid.hDiv).click(function(e){td=e.target;var t=$(td).hasClass("cbox");ptr=$(td,ts.rows).closest("tr.jqgrow");if($(ptr).length===0){return this}var n=true;if($.isFunction(ts.p.beforeSelectRow)){n=ts.p.beforeSelectRow.call(ts,ptr[0].id,e)}if(td.tagName=="A"||(td.tagName=="INPUT"||td.tagName=="TEXTAREA"||td.tagName=="OPTION"||td.tagName=="SELECT")&&!t){return true}if(n===true){if(ts.p.cellEdit===true){if(ts.p.multiselect&&t){$(ts).jqGrid("setSelection",ptr[0].id,true)}else{ri=ptr[0].rowIndex;ci=$.jgrid.getCellIndex(td);try{$(ts).jqGrid("editCell",ri,ci,true)}catch(r){}}}else{if(!ts.p.multikey){if(ts.p.multiselect&&ts.p.multiboxonly){if(t){$(ts).jqGrid("setSelection",ptr[0].id,true)}else{$(ts.p.selarrrow).each(function(e,t){var n=ts.rows.namedItem(t);$(n).removeClass("ui-state-highlight");$("#jqg_"+$.jgrid.jqID(t),n).attr("checked",false)});ts.p.selarrrow=[];$("#cb_"+$.jgrid.jqID(ts.p.id),ts.grid.hDiv).attr("checked",false);$(ts).jqGrid("setSelection",ptr[0].id,true)}}else{$(ts).jqGrid("setSelection",ptr[0].id,true)}}else{if(e[ts.p.multikey]){$(ts).jqGrid("setSelection",ptr[0].id,true)}else{if(ts.p.multiselect&&t){t=$("[id^=jqg_]",ptr).attr("checked");$("[id^=jqg_]",ptr).attr("checked",!t)}}}}if($.isFunction(ts.p.onCellSelect)){ri=ptr[0].id;ci=$.jgrid.getCellIndex(td);ts.p.onCellSelect.call(ts,ri,ci,$(td).html(),e)}}e.stopPropagation()}).bind("reloadGrid",function(e,t){if(ts.p.treeGrid===true){ts.p.datatype=ts.p.treedatatype}if(t&&t.current){ts.grid.selectionPreserver(ts)}if(ts.p.datatype=="local"){$(ts).jqGrid("resetSelection")}else{if(!ts.p.treeGrid){ts.p.selrow=null;if(ts.p.multiselect){ts.p.selarrrow=[];$("#cb_"+$.jgrid.jqID(ts.p.id),ts.grid.hDiv).attr("checked",false)}ts.p.savedRow=[];if(ts.p.scroll){emptyRows(ts.grid.bDiv)}}}if(t&&t.page){var n=t.page;if(n>ts.p.lastpage){n=ts.p.lastpage}if(n<1){n=1}ts.p.page=n;if(ts.grid.prevRowHeight){ts.grid.bDiv.scrollTop=(n-1)*ts.grid.prevRowHeight*ts.p.rowNum}else{ts.grid.bDiv.scrollTop=0}}if(ts.grid.prevRowHeight&&ts.p.scroll){delete ts.p.lastpage;ts.grid.populateVisible()}else{ts.grid.populate()}return false});if($.isFunction(this.p.ondblClickRow)){$(this).dblclick(function(e){td=e.target;ptr=$(td,ts.rows).closest("tr.jqgrow");if($(ptr).length===0){return false}ri=ptr[0].rowIndex;ci=$.jgrid.getCellIndex(td);ts.p.ondblClickRow.call(ts,$(ptr).attr("id"),ri,ci,e);return false})}if($.isFunction(this.p.onRightClickRow)){$(this).bind("contextmenu",function(e){td=e.target;ptr=$(td,ts.rows).closest("tr.jqgrow");if($(ptr).length===0){return false}if(!ts.p.multiselect){$(ts).jqGrid("setSelection",ptr[0].id,true)}ri=ptr[0].rowIndex;ci=$.jgrid.getCellIndex(td);ts.p.onRightClickRow.call(ts,$(ptr).attr("id"),ri,ci,e);return false})}grid.bDiv=document.createElement("div");$(grid.bDiv).append($('<div style="position:relative;>'+(isMSIE&&$.browser.version<8?"height:0.01%;":"")+'"</div>').append("<div></div>").append(this)).addClass("ui-jqgrid-bdiv").css({height:ts.p.height+(isNaN(ts.p.height)?"":"px"),width:"100%"}).scroll(grid.scrollGrid);$("table:first",grid.bDiv).css({width:"100%"});if(isMSIE){if($("tbody",this).size()==2){$("tbody:first",this).remove()}if(ts.p.multikey){$(grid.bDiv).bind("selectstart",function(){return false})}}else{if(ts.p.multikey){$(grid.bDiv).bind("mousedown",function(){return false})}}if(hg){$(grid.bDiv).hide()}grid.cDiv=document.createElement("div");var tbCaption=ts.p.caption.split("|");var arf=ts.p.hidegrid===true?$("<a role='link' href='javascript:void(0)'/>").addClass("ui-jqgrid-titlebar-close HeaderButton").hover(function(){arf.addClass("ui-state-hover")},function(){arf.removeClass("ui-state-hover")}).append("<span class='ui-icon ui-icon-circle-triangle-n'></span>").css(dir=="rtl"?"left":"right","0px"):"";$(grid.cDiv).append(tbCaption[1]).append(arf).append("<span class='ui-jqgrid-title"+(dir=="rtl"?"-rtl":"")+"'>"+tbCaption[0]+"</span>").addClass("ui-jqgrid-titlebar ui-widget-header ui-corner-tl ui-corner-tr ui-helper-clearfix");$(grid.cDiv).insertBefore(grid.hDiv);if(ts.p.toolbar[0]){grid.uDiv=document.createElement("div");if(ts.p.toolbar[1]=="top"){$(grid.uDiv).insertBefore(grid.hDiv)}else{if(ts.p.toolbar[1]=="bottom"){$(grid.uDiv).insertAfter(grid.hDiv)}}if(ts.p.toolbar[1]=="both"){grid.ubDiv=document.createElement("div");$(grid.uDiv).insertBefore(grid.hDiv).addClass("ui-userdata ui-state-default").attr("id","t_"+this.id);$(grid.ubDiv).insertAfter(grid.hDiv).addClass("ui-userdata ui-state-default").attr("id","tb_"+this.id);ts.p._height+=IntNum($(grid.ubDiv).height());if(hg){$(grid.ubDiv).hide()}}else{$(grid.uDiv).width(grid.width).addClass("ui-userdata ui-state-default").attr("id","t_"+this.id)}ts.p._height+=IntNum($(grid.uDiv).height());if(hg){$(grid.uDiv).hide()}}if(ts.p.footerrow){grid.sDiv=$("<div class='ui-jqgrid-sdiv'></div>")[0];hb=$("<div class='ui-jqgrid-hbox"+(dir=="rtl"?"-rtl":"")+"'></div>");$(grid.sDiv).append(hb).insertAfter(grid.hDiv).width(grid.width);$(hb).append(tfoot);grid.footers=$(".ui-jqgrid-ftable",grid.sDiv)[0].rows[0].cells;if(ts.p.rownumbers){grid.footers[0].className="ui-state-default jqgrid-rownum"}if(hg){$(grid.sDiv).hide()}}if(ts.p.caption){ts.p._height+=parseInt($(grid.cDiv,ts).height(),10);var tdt=ts.p.datatype;if(ts.p.hidegrid===true){$(".ui-jqgrid-titlebar-close",grid.cDiv).click(function(e){var t=$.isFunction(ts.p.onHeaderClick);if(ts.p.gridstate=="visible"){$(".ui-jqgrid-bdiv, .ui-jqgrid-hdiv","#gview_"+ts.p.id).slideUp("fast");if(ts.p.pager){$(ts.p.pager).slideUp("fast")}if(ts.p.toolbar[0]===true){if(ts.p.toolbar[1]=="both"){$(grid.ubDiv).slideUp("fast")}$(grid.uDiv).slideUp("fast")}if(ts.p.footerrow){$(".ui-jqgrid-sdiv","#gbox_"+ts.p.id).slideUp("fast")}$("span",this).removeClass("ui-icon-circle-triangle-n").addClass("ui-icon-circle-triangle-s");ts.p.gridstate="hidden";if(t){if(!hg){ts.p.onHeaderClick.call(ts,ts.p.gridstate,e)}}}else{if(ts.p.gridstate=="hidden"){$(".ui-jqgrid-hdiv, .ui-jqgrid-bdiv","#gview_"+ts.p.id).slideDown("fast");if(ts.p.pager){$(ts.p.pager).slideDown("fast")}if(ts.p.toolbar[0]===true){if(ts.p.toolbar[1]=="both"){$(grid.ubDiv).slideDown("fast")}$(grid.uDiv).slideDown("fast")}if(ts.p.footerrow){$(".ui-jqgrid-sdiv","#gbox_"+ts.p.id).slideDown("fast")}$("span",this).removeClass("ui-icon-circle-triangle-s").addClass("ui-icon-circle-triangle-n");if(hg){ts.p.datatype=tdt;populate();hg=false}ts.p.gridstate="visible";if(t){ts.p.onHeaderClick.call(ts,ts.p.gridstate,e)}}}return false});if(hg){ts.p.datatype="local";$(".ui-jqgrid-titlebar-close",grid.cDiv).trigger("click")}}}else{$(grid.cDiv).hide()}$(grid.hDiv).after(grid.bDiv).mousemove(function(e){if(grid.resizing){grid.dragMove(e);return false}});$(".ui-jqgrid-labels",grid.hDiv).bind("selectstart",function(){return false});ts.p._height+=parseInt($(grid.hDiv).height(),10);$(document).mouseup(function(e){if(grid.resizing){grid.dragEnd();return false}return true});this.updateColumns=function(){var e=this.rows[0],t=this;if(e){$("td",e).each(function(e){$(this).css("width",t.grid.headers[e].width+"px")});this.grid.cols=e.cells}return this};$(".ui-jqgrid-bdiv").slimScrollHorizontal({height:"auto",width:"auto",alwaysVisible:false,start:"left",position:"bottom",wheelStep:10}).css({background:"#ccc",paddingBottom:"10px"});ts.formatCol=formatCol;ts.sortData=sortData;ts.updatepager=updatepager;ts.formatter=function(e,t,n,r,i){return formatter(e,t,n,r,i)};$.extend(grid,{populate:populate,emptyRows:emptyRows});this.grid=grid;ts.addXmlData=function(e){addXmlData(e,ts.grid.bDiv)};ts.addJSONData=function(e){addJSONData(e,ts.grid.bDiv)};populate();ts.p.hiddengrid=false;$(window).unload(function(){$(this).empty();this.grid=null;this.p=null})})};$.jgrid.extend({getGridParam:function(e){var t=this[0];if(!t.grid){return}if(!e){return t.p}else{return typeof t.p[e]!="undefined"?t.p[e]:null}},setGridParam:function(e){return this.each(function(){if(this.grid&&typeof e==="object"){$.extend(true,this.p,e)}})},getDataIDs:function(){var e=[],t=0,n;this.each(function(){n=this.rows.length;if(n&&n>0){while(t<n){e[t]=this.rows[t].id;t++}}});return e},setSelection:function(e,t){return this.each(function(){function f(e,t){var r=$(n.grid.bDiv)[0].clientHeight,i=$(n.grid.bDiv)[0].scrollTop,s=n.rows[e].offsetTop+n.rows[e].clientHeight,o=n.rows[e].offsetTop;if(t=="d"){if(s>=r){$(n.grid.bDiv)[0].scrollTop=i+s-o}}if(t=="u"){if(o<i){$(n.grid.bDiv)[0].scrollTop=i-s+o}}}var n=this,r,i,s,o,u,a;if(e===undefined){return}t=t===false?false:true;i=n.rows.namedItem(e);if(i==null){return}if(n.p.selrow&&n.p.scrollrows===true){s=n.rows.namedItem(n.p.selrow).rowIndex;o=n.rows.namedItem(e).rowIndex;if(o>=0){if(o>s){f(o,"d")}else{f(o,"u")}}}if(!n.p.multiselect){if($(i).attr("class")!=="subgrid"){if(n.p.selrow){$("tr#"+$.jgrid.jqID(n.p.selrow),n.grid.bDiv).removeClass("ui-state-highlight").attr("aria-selected","false")}n.p.selrow=i.id;$(i).addClass("ui-state-highlight").attr("aria-selected","true");if(n.p.onSelectRow&&t){n.p.onSelectRow(n.p.selrow,true)}}}else{n.p.selrow=i.id;u=$.inArray(n.p.selrow,n.p.selarrrow);if(u===-1){if($(i).attr("class")!=="subgrid"){$(i).addClass("ui-state-highlight").attr("aria-selected","true")}r=true;$("#jqg_"+$.jgrid.jqID(n.p.selrow),n.rows).attr("checked",r);n.p.selarrrow.push(n.p.selrow);if(n.p.onSelectRow&&t){n.p.onSelectRow(n.p.selrow,r)}}else{if($(i).attr("class")!=="subgrid"){$(i).removeClass("ui-state-highlight").attr("aria-selected","false")}r=false;$("#jqg_"+$.jgrid.jqID(n.p.selrow),n.rows).attr("checked",r);n.p.selarrrow.splice(u,1);if(n.p.onSelectRow&&t){n.p.onSelectRow(n.p.selrow,r)}a=n.p.selarrrow[0];n.p.selrow=a===undefined?null:a}}})},resetSelection:function(){return this.each(function(){var e=this,t;if(!e.p.multiselect){if(e.p.selrow){$("tr#"+$.jgrid.jqID(e.p.selrow),e.grid.bDiv).removeClass("ui-state-highlight").attr("aria-selected","false");e.p.selrow=null}}else{$(e.p.selarrrow).each(function(n,r){t=e.rows.namedItem(r);$(t).removeClass("ui-state-highlight").attr("aria-selected","false");$("#jqg_"+$.jgrid.jqID(r),t).attr("checked",false)});$("#cb_"+$.jgrid.jqID(e.p.id),e.grid.hDiv).attr("checked",false);e.p.selarrrow=[]}e.p.savedRow=[]})},getRowData:function(e){var t={},n,r=false,i,s=0;this.each(function(){var o=this,u,a;if(typeof e=="undefined"){r=true;n=[];i=o.rows.length}else{a=o.rows.namedItem(e);if(!a){return t}i=1}while(s<i){if(r){a=o.rows[s]}$("td",a).each(function(e){u=o.p.colModel[e].name;if(u!=="cb"&&u!=="subgrid"){if(o.p.treeGrid===true&&u==o.p.ExpandColumn){t[u]=$.jgrid.htmlDecode($("span:first",this).html())}else{try{t[u]=$.unformat(this,{colModel:o.p.colModel[e]},e)}catch(n){t[u]=$.jgrid.htmlDecode($(this).html())}}}});s++;if(r){n.push(t);t={}}}});return n?n:t},delRowData:function(e){var t=false,n,r,i;this.each(function(){var s=this;n=s.rows.namedItem(e);if(!n){return false}else{i=n.rowIndex;$(n).remove();s.p.records--;s.p.reccount--;s.updatepager(true,false);t=true;if(e==s.p.selrow){s.p.selrow=null}r=$.inArray(e,s.p.selarrrow);if(r!=-1){s.p.selarrrow.splice(r,1)}}if(i==0&&t){s.updateColumns()}if(s.p.altRows===true&&t){var o=s.p.altclass;$(s.rows).each(function(e){if(e%2==1){$(this).addClass(o)}else{$(this).removeClass(o)}})}});return t},setRowData:function(e,t,n){var r,i=false;this.each(function(){var s=this,o,u,a=typeof n;if(!s.grid){return false}u=s.rows.namedItem(e);if(!u){return false}if(t){$(this.p.colModel).each(function(n){r=this.name;if(t[r]!=undefined){o=s.formatter(e,t[r],n,t,"edit");if(s.p.treeGrid===true&&r==s.p.ExpandColumn){$("td:eq("+n+") > span:first",u).html(o).attr("title",$.jgrid.stripHtml(o))}else{$("td:eq("+n+")",u).html(o).attr("title",$.jgrid.stripHtml(o))}i=true}})}if(a==="string"){$(u).addClass(n)}else{if(a==="object"){$(u).css(n)}}});return i},addRowData:function(e,t,n,r){if(!n){n="last"}var i=false,s,o="",u=0,a=0,f=0,l,c,h,p="";if(t){this.each(function(){var d=this;if(d.p.rownumbers===true){p=d.formatCol(f,1);o+='<td role="gridcell" class="ui-state-default jqgrid-rownum" '+p+">0</td>";f=1}if(d.p.multiselect){h='<input type="checkbox" id="jqg_'+e+'" class="cbox"/>';p=d.formatCol(f,1);o+='<td role="gridcell" '+p+">"+h+"</td>";u=1}if(d.p.subGrid===true){o+=$(d).jqGrid("addSubGridCell",u+f,1);a=1}if(typeof e!="undefined"){e=e+""}else{e=d.p.records+1+"";if(d.p.keyIndex!==false){var m=d.p.colModel[d.p.keyIndex+u+a+f].name;if(typeof t[m]!="undefined"){e=t[m]}}}for(c=u+a+f;c<this.p.colModel.length;c++){s=this.p.colModel[c].name;h=d.formatter(e,t[s],c,t,"add");p=d.formatCol(c,1);o+='<td role="gridcell" '+p+' title="'+$.jgrid.stripHtml(h)+'">'+h+"</td>"}o='<tr id="'+e+'" role="row" class="ui-widget-content jqgrow ui-row-'+d.p.direction+'">'+o+"</tr>";if(d.p.subGrid===true){o=$(o)[0];$(d).jqGrid("addSubGrid",o,u+f)}if(d.rows.length===0){$("table:first",d.grid.bDiv).append(o)}else{switch(n){case"last":$(d.rows[d.rows.length-1]).after(o);break;case"first":$(d.rows[0]).before(o);break;case"after":l=d.rows.namedItem(r);if(l){$(d.rows[l.rowIndex+1]).hasClass("ui-subgrid")?$(d.rows[l.rowIndex+1]).after(o):$(l).after(o)}break;case"before":l=d.rows.namedItem(r);if(l){$(l).before(o);l=l.rowIndex}break}}d.p.records++;d.p.reccount++;if(!d.grid.cols||!d.grid.cols.length){d.grid.cols=d.rows[0].cells}if(n==="first"||n==="before"&&l<=1||d.rows.length===1){d.updateColumns()}if(d.p.altRows===true){var g=d.p.altclass;if(n=="last"){if((d.rows.length-1)%2==1){$(d.rows[d.rows.length-1]).addClass(g)}}else{$(d.rows).each(function(e){if(e%2==1){$(this).addClass(g)}else{$(this).removeClass(g)}})}}try{d.p.afterInsertRow(e,t)}catch(y){}d.updatepager(true,true);i=true})}return i},footerData:function(e,t,n){function o(e){for(var t in e){return false}return true}var r,i=false,s={};if(typeof e=="undefined"){e="get"}if(typeof n!="boolean"){n=true}e=e.toLowerCase();this.each(function(){var u=this,a,f;if(!u.grid||!u.p.footerrow){return false}if(e=="set"){if(o(t)){return false}}i=true;$(this.p.colModel).each(function(o){r=this.name;if(e=="set"){if(t[r]!=undefined){a=n?u.formatter("",t[r],o,t,"edit"):t[r];$("tr.footrow td:eq("+o+")",u.grid.sDiv).html(a).attr("title",$.jgrid.stripHtml(a));i=true}}else{if(e=="get"){s[r]=$("tr.footrow td:eq("+o+")",u.grid.sDiv).html()}}})});return e=="get"?s:i},ShowHideCol:function(e,t){return this.each(function(){var n=this,r=false;if(!n.grid){return}if(typeof e==="string"){e=[e]}t=t!="none"?"":"none";var i=t==""?true:false;$(this.p.colModel).each(function(s){if($.inArray(this.name,e)!==-1&&this.hidden===i){$("tr",n.grid.hDiv).each(function(){$("th:eq("+s+")",this).css("display",t)});$(n.rows).each(function(e){$("td:eq("+s+")",n.rows[e]).css("display",t)});if(n.p.footerrow){$("td:eq("+s+")",n.grid.sDiv).css("display",t)}if(t=="none"){n.p.tblwidth-=this.width}else{n.p.tblwidth+=this.width}this.hidden=!i;r=true}});if(r===true){$("table:first",n.grid.hDiv).width(n.p.tblwidth);$("table:first",n.grid.bDiv).width(n.p.tblwidth);n.grid.hDiv.scrollLeft=n.grid.bDiv.scrollLeft;if(n.p.footerrow){$("table:first",n.grid.sDiv).width(n.p.tblwidth);n.grid.sDiv.scrollLeft=n.grid.bDiv.scrollLeft}}})},hideCol:function(e){return this.each(function(){$(this).jqGrid("ShowHideCol",e,"none")})},showCol:function(e){return this.each(function(){$(this).jqGrid("ShowHideCol",e,"")})},remapColumns:function(e,t,n){function r(t){var n;if(t.length){n=$.makeArray(t)}else{n=$.extend({},t)}$.each(e,function(e){t[e]=n[this]})}function s(t,n){$(">tr"+(n||""),t).each(function(){var t=this;var n=$.makeArray(t.cells);$.each(e,function(){var e=n[this];if(e){t.appendChild(e)}})})}var i=this.get(0);r(i.p.colModel);r(i.p.colNames);r(i.grid.headers);s($("thead:first",i.grid.hDiv),n&&":not(.ui-jqgrid-labels)");if(t){s($("tbody:first",i.grid.bDiv),".jqgrow")}if(i.p.footerrow){s($("tbody:first",i.grid.sDiv))}if(i.p.remapColumns){if(!i.p.remapColumns.length){i.p.remapColumns=$.makeArray(e)}else{r(i.p.remapColumns)}}i.p.lastsort=$.inArray(i.p.lastsort,e);if(i.p.treeGrid){i.p.expColInd=$.inArray(i.p.expColInd,e)}},setGridWidth:function(e,t){return this.each(function(){var n=this,r,i=0,s=n.p.cellLayout,o,u=0,a=false,f=n.p.scrollOffset,l,c=0,h=0,p=0,d;if(!n.grid){return}if(typeof t!="boolean"){t=n.p.shrinkToFit}if(isNaN(e)){return}else{e=parseInt(e);n.grid.width=n.p.width=e}$("#gbox_"+n.p.id).css("width",e+"px");$("#gview_"+n.p.id).css("width",e+"px");$(n.grid.bDiv).css("width",e+"px");$(n.grid.hDiv).css("width",e+"px");if(n.p.pager){$(n.p.pager).css("width",e+"px")}if(n.p.toolbar[0]===true){$(n.grid.uDiv).css("width",e+"px");if(n.p.toolbar[1]=="both"){$(n.grid.ubDiv).css("width",e+"px")}}if(n.p.footerrow){$(n.grid.sDiv).css("width",e+"px")}if(t===false&&n.p.forceFit==true){n.p.forceFit=false}if(t===true){if($.browser.safari){s=0}$.each(n.p.colModel,function(e){if(this.hidden===false){i+=parseInt(this.width,10);if(this.fixed){h+=this.width;c+=this.width+s}else{u++}p++}});if(u==0){return}n.p.tblwidth=i;l=e-s*u-c;if(!isNaN(n.p.height)){if($(n.grid.bDiv)[0].clientHeight<$(n.grid.bDiv)[0].scrollHeight){a=true;l-=f}}i=0;var v=n.grid.cols.length>0;$.each(n.p.colModel,function(e){var t=this.name;if(this.hidden===false&&!this.fixed){r=Math.floor(l/(n.p.tblwidth-h)*this.width);this.width=r;i+=r;n.grid.headers[e].width=r;n.grid.headers[e].el.style.width=r+"px";if(n.p.footerrow){n.grid.footers[e].style.width=r+"px"}if(v){n.grid.cols[e].style.width=r+"px"}o=e}});d=0;if(a){if(e-c-(i+s*u)!==f){d=e-c-(i+s*u)-f}}else{if(Math.abs(e-c-(i+s*u))!==1){d=e-c-(i+s*u)}}n.p.colModel[o].width+=d;r=n.p.colModel[o].width;n.grid.headers[o].width=r;n.grid.headers[o].el.style.width=r+"px";if(v){n.grid.cols[o].style.width=r+"px"}n.p.tblwidth=i+d+h+s*p;$("table:first",n.grid.bDiv).css("width",n.p.tblwidth+"px");$("table:first",n.grid.hDiv).css("width",n.p.tblwidth+"px");n.grid.hDiv.scrollLeft=n.grid.bDiv.scrollLeft;if(n.p.footerrow){n.grid.footers[o].style.width=r+"px";$("table:first",n.grid.sDiv).css("width",n.p.tblwidth+"px")}}})},setGridHeight:function(e){return this.each(function(){var t=this;if(!t.grid){return}$(t.grid.bDiv).css({height:e+(isNaN(e)?"":"px")});t.p.height=e;if(t.p.scroll){t.grid.populateVisible()}})},setCaption:function(e){return this.each(function(){this.p.caption=e;$("span.ui-jqgrid-title",this.grid.cDiv).html(e);$(this.grid.cDiv).show()})},setLabel:function(e,t,n,r){return this.each(function(){var i=this,s=-1;if(!i.grid){return}if(isNaN(e)){$(i.p.colModel).each(function(t){if(this.name==e){s=t;return false}})}else{s=parseInt(e,10)}if(s>=0){var o=$("tr.ui-jqgrid-labels th:eq("+s+")",i.grid.hDiv);if(t){var u=$(".s-ico",o);$("[id^=jqgh_]",o).empty().html(t).append(u);i.p.colNames[s]=t}if(n){if(typeof n==="string"){$(o).addClass(n)}else{$(o).css(n)}}if(typeof r==="object"){$(o).attr(r)}}})},setCell:function(e,t,n,r,i){return this.each(function(){var s=this,o=-1,u;if(!s.grid){return}if(isNaN(t)){$(s.p.colModel).each(function(e){if(this.name==t){o=e;return false}})}else{o=parseInt(t,10)}if(o>=0){var a=s.rows.namedItem(e);if(a){var f=$("td:eq("+o+")",a);if(n!==""){u=s.formatter(e,n,o,a,"edit");if(s.p.treeGrid&&$(".tree-wrap",$(f)).length>0){$("span",$(f)).html(u).attr("title",$.jgrid.stripHtml(u))}else{$(f).html(u).attr("title",$.jgrid.stripHtml(u))}}if(typeof r==="string"){if(r){$(f).addClass(r)}else{$(f).removeClass()}}else{if(r){$(f).css(r)}}if(typeof i==="object"){$(f).attr(i)}}}})},getCell:function(e,t){var n=false;this.each(function(){var r=this,i=-1;if(!r.grid){return}if(isNaN(t)){$(r.p.colModel).each(function(e){if(this.name===t){i=e;return false}})}else{i=parseInt(t,10)}if(i>=0){var s=r.rows.namedItem(e);if(s){try{n=$.unformat($("td:eq("+i+")",s),{colModel:r.p.colModel[i]},i)}catch(o){n=$.jgrid.htmlDecode($("td:eq("+i+")",s).html())}}}});return n},getCol:function(e,t,n){var r=[],i,s=0;t=typeof t!="boolean"?false:t;if(typeof n=="undefined"){n=false}this.each(function(){var o=this,u=-1;if(!o.grid){return}if(isNaN(e)){$(o.p.colModel).each(function(t){if(this.name===e){u=t;return false}})}else{u=parseInt(e,10)}if(u>=0){var a=o.rows.length,f=0;if(a&&a>0){while(f<a){try{i=$.unformat($(o.rows[f].cells[u]),{colModel:o.p.colModel[u]},u)}catch(l){i=$.jgrid.htmlDecode(o.rows[f].cells[u].innerHTML)}n?s+=parseFloat(i,10):t?r.push({id:o.rows[f].id,value:i}):r[f]=i;f++}if(n){switch(n.toLowerCase()){case"sum":r=s;break;case"avg":r=s/a;break;case"count":r=a;break}}}}});return r},clearGridData:function(e){return this.each(function(){var t=this;if(!t.grid){return}if(typeof e!="boolean"){e=false}$("tbody:first tr",t.grid.bDiv).remove();if(t.p.footerrow&&e){$(".ui-jqgrid-ftable td",t.grid.sDiv).html("&#160;")}t.p.selrow=null;t.p.selarrrow=[];t.p.savedRow=[];t.p.records=0;t.p.page="0";t.p.lastpage="0";t.p.reccount=0;t.updatepager(true,false)})},getInd:function(e,t){var n=false,r;this.each(function(){r=this.rows.namedItem(e);if(r){n=t===true?r:r.rowIndex}});return n}})})(jQuery);(function(e){function t(t,n,r,i,s){var o=n;if(e.fn.fmatter[t]){o=e.fn.fmatter[t](n,r,i,s)}return o}function n(e){if(window.console&&window.console.log){window.console.log(e)}}e.fmatter={};e.fn.fmatter=function(n,r,i,s,o){i=e.extend({},e.jgrid.formatter,i);return t(n,r,i,s,o)};e.fmatter.util={NumberFormat:function(e,t){if(!isNumber(e)){e*=1}if(isNumber(e)){var n=e<0;var r=e+"";var i=t.decimalSeparator?t.decimalSeparator:".";var s;if(isNumber(t.decimalPlaces)){var o=t.decimalPlaces;var u=Math.pow(10,o);r=Math.round(e*u)/u+"";s=r.lastIndexOf(".");if(o>0){if(s<0){r+=i;s=r.length-1}else{if(i!=="."){r=r.replace(".",i)}}while(r.length-1-s<o){r+="0"}}}if(t.thousandsSeparator){var a=t.thousandsSeparator;s=r.lastIndexOf(i);s=s>-1?s:r.length;var f=r.substring(s);var l=-1;for(var c=s;c>0;c--){l++;if(l%3===0&&c!==s&&(!n||c>1)){f=a+f}f=r.charAt(c-1)+f}r=f}r=t.prefix?t.prefix+r:r;r=t.suffix?r+t.suffix:r;return r}else{return e}},DateFormat:function(t,n,r,i){var s=/\\.|[dDjlNSwzWFmMntLoYyaABgGhHisueIOPTZcrU]/g,o=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,u=/[^-+\dA-Z]/g,a=function(e,t){e=String(e);t=parseInt(t)||2;while(e.length<t){e="0"+e}return e},f={m:1,d:1,y:1970,h:0,i:0,s:0},l=0,h,p,d,v=["i18n"];v.i18n={dayNames:i.dayNames,monthNames:i.monthNames};if(t in i.masks){t=i.masks[t]}n=n.split(/[\\\/:_;.\t\T\s-]/);t=t.split(/[\\\/:_;.\t\T\s-]/);for(p=0,d=t.length;p<d;p++){if(t[p]=="M"){h=e.inArray(n[p],v.i18n.monthNames);if(h!==-1&&h<12){n[p]=h+1}}if(t[p]=="F"){h=e.inArray(n[p],v.i18n.monthNames);if(h!==-1&&h>11){n[p]=h+1-12}}f[t[p].toLowerCase()]=parseInt(n[p],10)}f.m=parseInt(f.m)-1;var m=f.y;if(m>=70&&m<=99){f.y=1900+f.y}else{if(m>=0&&m<=69){f.y=2e3+f.y}}l=new Date(f.y,f.m,f.d,f.h,f.i,f.s,0);if(r in i.masks){r=i.masks[r]}else{if(!r){r="Y-m-d"}}var g=l.getHours(),y=l.getMinutes(),b=l.getDate(),w=l.getMonth()+1,E=l.getTimezoneOffset(),S=l.getSeconds(),x=l.getMilliseconds(),T=l.getDay(),N=l.getFullYear(),C=(T+6)%7+1,k=(new Date(N,w-1,b)-new Date(N,0,1))/864e5,L={d:a(b),D:v.i18n.dayNames[T],j:b,l:v.i18n.dayNames[T+7],N:C,S:i.S(b),w:T,z:k,W:C<5?Math.floor((k+C-1)/7)+1:Math.floor((k+C-1)/7)||(((new Date(N-1,0,1)).getDay()+6)%7<4?53:52),F:v.i18n.monthNames[w-1+12],m:a(w),M:v.i18n.monthNames[w-1],n:w,t:"?",L:"?",o:"?",Y:N,y:String(N).substring(2),a:g<12?i.AmPm[0]:i.AmPm[1],A:g<12?i.AmPm[2]:i.AmPm[3],B:"?",g:g%12||12,G:g,h:a(g%12||12),H:a(g),i:a(y),s:a(S),u:x,e:"?",I:"?",O:(E>0?"-":"+")+a(Math.floor(Math.abs(E)/60)*100+Math.abs(E)%60,4),P:"?",T:(String(l).match(o)||[""]).pop().replace(u,""),Z:"?",c:"?",r:"?",U:Math.floor(l/1e3)};return r.replace(s,function(e){return e in L?L[e]:e.substring(1)})}};e.fn.fmatter.defaultFormat=function(e,t){return isValue(e)&&e!==""?e:t.defaultValue?t.defaultValue:"&#160;"};e.fn.fmatter.email=function(t,n){if(!isEmpty(t)){return'<a href="mailto:'+t+'">'+t+"</a>"}else{return e.fn.fmatter.defaultFormat(t,n)}};e.fn.fmatter.checkbox=function(t,n){var r=e.extend({},n.checkbox),i;if(!isUndefined(n.colModel.formatoptions)){r=e.extend({},r,n.colModel.formatoptions)}if(r.disabled===true){i="disabled"}else{i=""}if(isEmpty(t)||isUndefined(t)){t=e.fn.fmatter.defaultFormat(t,r)}t=t+"";t=t.toLowerCase();var s=t.search(/(false|0|no|off)/i)<0?" checked='checked' ":"";return'<input type="checkbox" '+s+' value="'+t+'" offval="no" '+i+"/>"},e.fn.fmatter.link=function(t,n){var r={target:n.target};var i="";if(!isUndefined(n.colModel.formatoptions)){r=e.extend({},r,n.colModel.formatoptions)}if(r.target){i="target="+r.target}if(!isEmpty(t)){return"<a "+i+' href="'+t+'">'+t+"</a>"}else{return e.fn.fmatter.defaultFormat(t,n)}};e.fn.fmatter.showlink=function(t,n){var r={baseLinkUrl:n.baseLinkUrl,showAction:n.showAction,addParam:n.addParam||"",target:n.target,idName:n.idName},i="";if(!isUndefined(n.colModel.formatoptions)){r=e.extend({},r,n.colModel.formatoptions)}if(r.target){i="target="+r.target}idUrl=r.baseLinkUrl+r.showAction+"?"+r.idName+"="+n.rowId+r.addParam;if(isString(t)){return"<a "+i+' href="'+idUrl+'">'+t+"</a>"}else{return e.fn.fmatter.defaultFormat(t,n)}};e.fn.fmatter.integer=function(t,n){var r=e.extend({},n.integer);if(!isUndefined(n.colModel.formatoptions)){r=e.extend({},r,n.colModel.formatoptions)}if(isEmpty(t)){return r.defaultValue}return e.fmatter.util.NumberFormat(t,r)};e.fn.fmatter.number=function(t,n){var r=e.extend({},n.number);if(!isUndefined(n.colModel.formatoptions)){r=e.extend({},r,n.colModel.formatoptions)}if(isEmpty(t)){return r.defaultValue}return e.fmatter.util.NumberFormat(t,r)};e.fn.fmatter.currency=function(t,n){var r=e.extend({},n.currency);if(!isUndefined(n.colModel.formatoptions)){r=e.extend({},r,n.colModel.formatoptions)}if(isEmpty(t)){return r.defaultValue}return e.fmatter.util.NumberFormat(t,r)};e.fn.fmatter.date=function(t,n,r,i){var s=e.extend({},n.date);if(!isUndefined(n.colModel.formatoptions)){s=e.extend({},s,n.colModel.formatoptions)}if(!s.reformatAfterEdit&&i=="edit"){return e.fn.fmatter.defaultFormat(t,n)}else{if(!isEmpty(t)){return e.fmatter.util.DateFormat(s.srcformat,t,s.newformat,s)}else{return e.fn.fmatter.defaultFormat(t,n)}}};e.fn.fmatter.select=function(t,n,r,i){t=t+"";var s=false,o=[];if(!isUndefined(n.colModel.editoptions)){s=n.colModel.editoptions.value}if(s){var u=n.colModel.editoptions.multiple===true?true:false,a=[],f;if(u){a=t.split(",");a=e.map(a,function(t){return e.trim(t)})}if(isString(s)){var l=s.split(";"),h=0;for(var p=0;p<l.length;p++){f=l[p].split(":");if(u){if(jQuery.inArray(f[0],a)>-1){o[h]=f[1];h++}}else{if(e.trim(f[0])==e.trim(t)){o[0]=f[1];break}}}}else{if(isObject(s)){if(u){o=jQuery.map(a,function(e,t){return s[e]})}else{o[0]=s[t]||""}}}}t=o.join(", ");return t==""?e.fn.fmatter.defaultFormat(t,n):t};e.unformat=function(t,n,r,i){var s,o=n.colModel.formatter,u=n.colModel.formatoptions||{},a,f=/([\.\*\_\'\(\)\{\}\+\?\\])/g;unformatFunc=n.colModel.unformat||e.fn.fmatter[o]&&e.fn.fmatter[o].unformat;if(typeof unformatFunc!=="undefined"&&isFunction(unformatFunc)){s=unformatFunc(e(t).text(),n,t)}else{if(typeof o!=="undefined"&&isString(o)){var l=e.jgrid.formatter||{},h;switch(o){case"integer":u=e.extend({},l.integer,u);a=u.thousandsSeparator.replace(f,"\\$1");h=new RegExp(a,"g");s=e(t).text().replace(h,"");break;case"number":u=e.extend({},l.number,u);a=u.thousandsSeparator.replace(f,"\\$1");h=new RegExp(a,"g");s=e(t).text().replace(h,"").replace(u.decimalSeparator,".");break;case"currency":u=e.extend({},l.currency,u);a=u.thousandsSeparator.replace(f,"\\$1");h=new RegExp(a,"g");s=e(t).text().replace(h,"").replace(u.decimalSeparator,".").replace(u.prefix,"").replace(u.suffix,"");break;case"checkbox":var p=n.colModel.editoptions?n.colModel.editoptions.value.split(":"):["Yes","No"];s=e("input",t).attr("checked")?p[0]:p[1];break;case"select":s=e.unformat.select(t,n,r,i);break;default:s=e(t).text();break}}}return s?s:i===true?e(t).text():e.jgrid.htmlDecode(e(t).html())};e.unformat.select=function(t,n,r,i){var s=[];var o=e(t).text();if(i==true){return o}var u=e.extend({},n.colModel.editoptions);if(u.value){var a=u.value,f=u.multiple===true?true:false,l=[],h;if(f){l=o.split(",");l=e.map(l,function(t){return e.trim(t)})}if(isString(a)){var p=a.split(";"),d=0;for(var v=0;v<p.length;v++){h=p[v].split(":");if(f){if(jQuery.inArray(h[1],l)>-1){s[d]=h[0];d++}}else{if(e.trim(h[1])==e.trim(o)){s[0]=h[0];break}}}}else{if(isObject(a)){if(!f){l[0]=o}s=jQuery.map(l,function(t){var n;e.each(a,function(e,r){if(r==t){n=e;return false}});if(n){return n}})}}return s.join(", ")}else{return o||""}};isValue=function(e){return isObject(e)||isString(e)||isNumber(e)||isBoolean(e)};isBoolean=function(e){return typeof e==="boolean"};isNull=function(e){return e===null};isNumber=function(e){return typeof e==="number"&&isFinite(e)};isString=function(e){return typeof e==="string"};isEmpty=function(t){if(!isString(t)&&isValue(t)){return false}else{if(!isValue(t)){return true}}t=e.trim(t).replace(/\&nbsp\;/ig,"").replace(/\&#160\;/ig,"");return t===""};isUndefined=function(e){return typeof e==="undefined"};isObject=function(e){return e&&(typeof e==="object"||isFunction(e))||false};isFunction=function(e){return typeof e==="function"}})(jQuery);(function(e){e.jgrid.extend({getColProp:function(e){var t={},n=this[0];if(!n.grid){return}var r=n.p.colModel;for(var i=0;i<r.length;i++){if(r[i].name==e){t=r[i];break}}return t},setColProp:function(t,n){return this.each(function(){if(this.grid){if(n){var r=this.p.colModel;for(var i=0;i<r.length;i++){if(r[i].name==t){e.extend(this.p.colModel[i],n);break}}}}})},sortGrid:function(e,t){return this.each(function(){var n=this,r=-1;if(!n.grid){return}if(!e){e=n.p.sortname}for(var i=0;i<n.p.colModel.length;i++){if(n.p.colModel[i].index==e||n.p.colModel[i].name==e){r=i;break}}if(r!=-1){var s=n.p.colModel[r].sortable;if(typeof s!=="boolean"){s=true}if(typeof t!=="boolean"){t=false}if(s){n.sortData("jqgh_"+e,r,t)}}})},GridDestroy:function(){return this.each(function(){if(this.grid){if(this.p.pager){e(this.p.pager).remove()}var t=this.id;try{e("#gbox_"+t).remove()}catch(n){}}})},GridUnload:function(){return this.each(function(){if(!this.grid){return}var t={id:e(this).attr("id"),cl:e(this).attr("class")};if(this.p.pager){e(this.p.pager).empty().removeClass("ui-state-default ui-jqgrid-pager corner-bottom")}var n=document.createElement("table");e(n).attr({id:t.id});n.className=t.cl;var r=this.id;e(n).removeClass("ui-jqgrid-btable");if(e(this.p.pager).parents("#gbox_"+r).length===1){e(n).insertBefore("#gbox_"+r).show();e(this.p.pager).insertBefore("#gbox_"+r)}else{e(n).insertBefore("#gbox_"+r).show()}e("#gbox_"+r).remove()})},setGridState:function(t){return this.each(function(){if(!this.grid){return}$t=this;if(t=="hidden"){e(".ui-jqgrid-bdiv, .ui-jqgrid-hdiv","#gview_"+$t.p.id).slideUp("fast");if($t.p.pager){e($t.p.pager).slideUp("fast")}if($t.p.toolbar[0]===true){if($t.p.toolbar[1]=="both"){e($t.grid.ubDiv).slideUp("fast")}e($t.grid.uDiv).slideUp("fast")}if($t.p.footerrow){e(".ui-jqgrid-sdiv","#gbox_"+$s.p.id).slideUp("fast")}e(".ui-jqgrid-titlebar-close span",$t.grid.cDiv).removeClass("ui-icon-circle-triangle-n").addClass("ui-icon-circle-triangle-s");$t.p.gridstate="hidden"}else{if(t=="visible"){e(".ui-jqgrid-hdiv, .ui-jqgrid-bdiv","#gview_"+$t.p.id).slideDown("fast");if($t.p.pager){e($t.p.pager).slideDown("fast")}if($t.p.toolbar[0]===true){if($t.p.toolbar[1]=="both"){e($t.grid.ubDiv).slideDown("fast")}e($t.grid.uDiv).slideDown("fast")}if($t.p.footerrow){e(".ui-jqgrid-sdiv","#gbox_"+$t.p.id).slideDown("fast")}e(".ui-jqgrid-titlebar-close span",$t.grid.cDiv).removeClass("ui-icon-circle-triangle-s").addClass("ui-icon-circle-triangle-n");$t.p.gridstate="visible"}}})},updateGridRows:function(t,n,r){var i,s=false;this.each(function(){var o=this,u,l,h,p;if(!o.grid){return false}if(!n){n="id"}if(t&&t.length>0){e(t).each(function(t){h=this;l=o.rows.namedItem(h[n]);if(l){p=h[n];if(r===true){if(o.p.jsonReader.repeatitems===true){if(o.p.jsonReader.cell){h=h[o.p.jsonReader.cell]}for(var v=0;v<h.length;v++){u=o.formatter(p,h[v],v,h,"edit");if(o.p.treeGrid===true&&i==o.p.ExpandColumn){e("td:eq("+v+") > span:first",l).html(u).attr("title",e.jgrid.stripHtml(u))}else{e("td:eq("+v+")",l).html(u).attr("title",e.jgrid.stripHtml(u))}}s=true;return true}}e(o.p.colModel).each(function(t){i=r===true?this.jsonmap||this.name:this.name;if(h[i]!=undefined){u=o.formatter(p,h[i],t,h,"edit");if(o.p.treeGrid===true&&i==o.p.ExpandColumn){e("td:eq("+t+") > span:first",l).html(u).attr("title",e.jgrid.stripHtml(u))}else{e("td:eq("+t+")",l).html(u).attr("title",e.jgrid.stripHtml(u))}s=true}})}})}});return s},filterGrid:function(t,n){n=e.extend({gridModel:false,gridNames:false,gridToolbar:false,filterModel:[],formtype:"horizontal",autosearch:true,formclass:"filterform",tableclass:"filtertable",buttonclass:"filterbutton",searchButton:"Search",clearButton:"Clear",enableSearch:false,enableClear:false,beforeSearch:null,afterSearch:null,beforeClear:null,afterClear:null,url:"",marksearched:true},n||{});return this.each(function(){var r=this;this.p=n;if(this.p.filterModel.length==0&&this.p.gridModel===false){alert("No filter is set");return}if(!t){alert("No target grid is set!");return}this.p.gridid=t.indexOf("#")!=-1?t:"#"+t;var i=e(this.p.gridid).jqGrid("getGridParam","colModel");if(i){if(this.p.gridModel===true){var s=e(this.p.gridid)[0];var o;e.each(i,function(e,t){var n=[];this.search=this.search===false?false:true;if(this.editrules&&this.editrules.searchhidden===true){o=true}else{if(this.hidden===true){o=false}else{o=true}}if(this.search===true&&o===true){if(r.p.gridNames===true){n.label=s.p.colNames[e]}else{n.label=""}n.name=this.name;n.index=this.index||this.name;n.stype=this.edittype||"text";if(n.stype!="select"){n.stype="text"}n.defval=this.defval||"";n.surl=this.surl||"";n.sopt=this.editoptions||{};n.width=this.width;r.p.filterModel.push(n)}})}else{e.each(r.p.filterModel,function(e,t){for(var n=0;n<i.length;n++){if(this.name==i[n].name){this.index=i[n].index||this.name;break}}if(!this.index){this.index=this.name}})}}else{alert("Could not get grid colModel");return}var u=function(){var t={},n=0,i;var s=e(r.p.gridid)[0],o;s.p.searchdata={};if(e.isFunction(r.p.beforeSearch)){r.p.beforeSearch()}e.each(r.p.filterModel,function(u,f){o=this.index;switch(this.stype){case"select":i=e("select[name="+o+"]",r).val();if(i){t[o]=i;if(r.p.marksearched){e("#jqgh_"+this.name,s.grid.hDiv).addClass("dirty-cell")}n++}else{if(r.p.marksearched){e("#jqgh_"+this.name,s.grid.hDiv).removeClass("dirty-cell")}try{delete s.p.postData[this.index]}catch(l){}}break;default:i=e("input[name="+o+"]",r).val();if(i){t[o]=i;if(r.p.marksearched){e("#jqgh_"+this.name,s.grid.hDiv).addClass("dirty-cell")}n++}else{if(r.p.marksearched){e("#jqgh_"+this.name,s.grid.hDiv).removeClass("dirty-cell")}try{delete s.p.postData[this.index]}catch(l){}}}});var u=n>0?true:false;e.extend(s.p.postData,t);var f;if(r.p.url){f=e(s).jqGrid("getGridParam","url");e(s).jqGrid("setGridParam",{url:r.p.url})}e(s).jqGrid("setGridParam",{search:u}).trigger("reloadGrid",[{page:1}]);if(f){e(s).jqGrid("setGridParam",{url:f})}if(e.isFunction(r.p.afterSearch)){r.p.afterSearch()}};var f=function(){var t={},n,i=0;var s=e(r.p.gridid)[0],o;if(e.isFunction(r.p.beforeClear)){r.p.beforeClear()}e.each(r.p.filterModel,function(u,f){o=this.index;n=this.defval?this.defval:"";if(!this.stype){this.stype=="text"}switch(this.stype){case"select":var l;e("select[name="+o+"] option",r).each(function(t){if(t==0){this.selected=true}if(e(this).text()==n){this.selected=true;l=e(this).val();return false}});if(l){t[o]=l;if(r.p.marksearched){e("#jqgh_"+this.name,s.grid.hDiv).addClass("dirty-cell")}i++}else{if(r.p.marksearched){e("#jqgh_"+this.name,s.grid.hDiv).removeClass("dirty-cell")}try{delete s.p.postData[this.index]}catch(c){}}break;case"text":e("input[name="+o+"]",r).val(n);if(n){t[o]=n;if(r.p.marksearched){e("#jqgh_"+this.name,s.grid.hDiv).addClass("dirty-cell")}i++}else{if(r.p.marksearched){e("#jqgh_"+this.name,s.grid.hDiv).removeClass("dirty-cell")}try{delete s.p.postData[this.index]}catch(c){}}break}});var u=i>0?true:false;e.extend(s.p.postData,t);var f;if(r.p.url){f=e(s).jqGrid("getGridParam","url");e(s).jqGrid("setGridParam",{url:r.p.url})}e(s).jqGrid("setGridParam",{search:u}).trigger("reloadGrid",[{page:1}]);if(f){e(s).jqGrid("setGridParam",{url:f})}if(e.isFunction(r.p.afterClear)){r.p.afterClear()}};var l=function(){var t=document.createElement("tr");var n,i,s,o,l,c;if(r.p.formtype=="horizontal"){e(p).append(t)}e.each(r.p.filterModel,function(i,s){o=document.createElement("td");e(o).append("<label for='"+this.name+"'>"+this.label+"</label>");l=document.createElement("td");var f=this;if(!this.stype){this.stype="text"}switch(this.stype){case"select":if(this.surl){e(l).load(this.surl,function(){if(f.defval){e("select",this).val(f.defval)}e("select",this).attr({name:f.index||f.name,id:"sg_"+f.name});if(f.sopt){e("select",this).attr(f.sopt)}if(r.p.gridToolbar===true&&f.width){e("select",this).width(f.width)}if(r.p.autosearch===true){e("select",this).change(function(e){u();return false})}})}else{if(f.sopt.value){var c=f.sopt.value;var h=document.createElement("select");e(h).attr({name:f.index||f.name,id:"sg_"+f.name}).attr(f.sopt);if(typeof c==="string"){var d=c.split(";"),v,m;for(var g=0;g<d.length;g++){v=d[g].split(":");m=document.createElement("option");m.value=v[0];m.innerHTML=v[1];if(v[1]==f.defval){m.selected="selected"}h.appendChild(m)}}else{if(typeof c==="object"){for(var y in c){i++;m=document.createElement("option");m.value=y;m.innerHTML=c[y];if(c[y]==f.defval){m.selected="selected"}h.appendChild(m)}}}if(r.p.gridToolbar===true&&f.width){e(h).width(f.width)}e(l).append(h);if(r.p.autosearch===true){e(h).change(function(e){u();return false})}}}break;case"text":var b=this.defval?this.defval:"";e(l).append("<input type='text' name='"+(this.index||this.name)+"' id='sg_"+this.name+"' value='"+b+"'/>");if(f.sopt){e("input",l).attr(f.sopt)}if(r.p.gridToolbar===true&&f.width){if(e.browser.msie){e("input",l).width(f.width-4)}else{e("input",l).width(f.width-2)}}if(r.p.autosearch===true){e("input",l).keypress(function(e){var t=e.charCode?e.charCode:e.keyCode?e.keyCode:0;if(t==13){u();return false}return this})}break}if(r.p.formtype=="horizontal"){if(r.p.gridToolbar===true&&r.p.gridNames===false){e(t).append(l)}else{e(t).append(o).append(l)}e(t).append(l)}else{n=document.createElement("tr");e(n).append(o).append(l);e(p).append(n)}});l=document.createElement("td");if(r.p.enableSearch===true){i="<input type='button' id='sButton' class='"+r.p.buttonclass+"' value='"+r.p.searchButton+"'/>";e(l).append(i);e("input#sButton",l).click(function(){u();return false})}if(r.p.enableClear===true){s="<input type='button' id='cButton' class='"+r.p.buttonclass+"' value='"+r.p.clearButton+"'/>";e(l).append(s);e("input#cButton",l).click(function(){f();return false})}if(r.p.enableClear===true||r.p.enableSearch===true){if(r.p.formtype=="horizontal"){e(t).append(l)}else{n=document.createElement("tr");e(n).append("<td>&#160;</td>").append(l);e(p).append(n)}}};var h=e("<form name='SearchForm' style=display:inline;' class='"+this.p.formclass+"'></form>");var p=e("<table class='"+this.p.tableclass+"' cellspacing='0' cellpading='0' border='0'><tbody></tbody></table>");e(h).append(p);l();e(this).append(h);this.triggerSearch=u;this.clearSearch=f})},filterToolbar:function(t){t=e.extend({autosearch:true,searchOnEnter:false,beforeSearch:null,afterSearch:null,beforeClear:null,afterClear:null,searchurl:"",stringResult:false,groupOp:"AND"},t||{});return this.each(function(){function o(t,n){var r=e(t);if(r[0]!=null){jQuery.each(n,function(){if(this.data!=null){r.bind(this.type,this.data,this.fn)}else{r.bind(this.type,this.fn)}})}}var n=this;var r=function(){var r={},i=0,s,o,u={};e.each(n.p.colModel,function(t,f){o=this.index||this.name;var l=this.searchoptions&&this.searchoptions.sopt?this.searchoptions.sopt[0]:"eq";switch(this.stype){case"select":s=e("select[name="+o+"]",n.grid.hDiv).val();if(s){r[o]=s;u[o]=l;i++}else{try{delete n.p.postData[o]}catch(c){}}break;case"text":s=e("input[name="+o+"]",n.grid.hDiv).val();if(s){r[o]=s;u[o]=l;i++}else{try{delete n.p.postData[o]}catch(c){}}break}});var f=i>0?true:false;if(!t.stringResult){e.extend(n.p.postData,r)}else{var l='{"groupOp":"'+t.groupOp+'","rules":[';var c=0;e.each(r,function(e,t){if(c>0){l+=","}l+='{"field":"'+e+'",';l+='"op":"'+u[e]+'",';l+='"data":"'+t+'"}';c++});l+="]}";e.extend(n.p.postData,{filters:l})}var h;if(n.p.searchurl){h=n.p.url;e(n).jqGrid("setGridParam",{url:n.p.searchurl})}var p=false;if(e.isFunction(t.beforeSearch)){p=t.beforeSearch.call(n)}if(!p){e(n).jqGrid("setGridParam",{search:f}).trigger("reloadGrid",[{page:1}])}if(h){e(n).jqGrid("setGridParam",{url:h})}if(e.isFunction(t.afterSearch)){t.afterSearch()}};var i=function(r){var i={},s,o=0,u;r=typeof r!="boolean"?true:r;e.each(n.p.colModel,function(t,r){s=this.searchoptions&&this.searchoptions.defaultValue?this.searchoptions.defaultValue:"";u=this.index||this.name;switch(this.stype){case"select":var f;e("select[name="+u+"] option",n.grid.hDiv).each(function(t){if(t==0){this.selected=true}if(e(this).text()==s){this.selected=true;f=e(this).val();return false}});if(f){i[u]=f;o++}else{try{delete n.p.postData[u]}catch(l){}}break;case"text":e("input[name="+u+"]",n.grid.hDiv).val(s);if(s){i[u]=s;o++}else{try{delete n.p.postData[u]}catch(l){}}break}});var f=o>0?true:false;if(!t.stringResult){e.extend(n.p.postData,i)}else{var l='{"groupOp":"'+t.groupOp+'","rules":[';var c=0;e.each(i,function(e,t){if(c>0){l+=","}l+='{"field":"'+e+'",';l+='"op":"eq",';l+='"data":"'+t+'"}';c++});l+="]}";e.extend(n.p.postData,{filters:l})}var h;if(n.p.searchurl){h=n.p.url;e(n).jqGrid("setGridParam",{url:n.p.searchurl})}var p=false;if(e.isFunction(t.beforeClear)){p=t.beforeClear.call(n)}if(!p){if(r){e(n).jqGrid("setGridParam",{search:f}).trigger("reloadGrid",[{page:1}])}}if(h){e(n).jqGrid("setGridParam",{url:h})}if(e.isFunction(t.afterClear)){t.afterClear()}};var s=function(){var t=e("tr.ui-search-toolbar",n.grid.hDiv);if(t.css("display")=="none"){t.show()}else{t.hide()}};var u=e("<tr class='ui-search-toolbar' role='rowheader'></tr>"),f,l,c;var h;e.each(n.p.colModel,function(i,s){var p=this;f=e("<th role='columnheader' class='ui-state-default ui-th-column ui-th-"+n.p.direction+"'></th>");l=e("<div class='toggle-search'></div>");if(this.hidden===true){e(f).css("display","none")}this.search=this.search===false?false:true;if(typeof this.stype=="undefined"){this.stype="text"}c=e.extend({},this.searchoptions||{});if(this.search){switch(this.stype){case"select":var v=this.surl||c.dataUrl;if(v){var m=l;e.ajax(e.extend({url:v,dataType:"html",complete:function(n,i){if(c.buildSelect!=null){var s=c.buildSelect(n);if(s){e(m).append(s)}}else{e(m).append(n.responseText)}if(c.defaultValue){e("select",m).val(c.defaultValue)}e("select",m).attr({name:p.index||p.name,id:"gs_"+p.name});if(c.attr){e("select",m).attr(c.attr)}e("select",m).css({width:"100%"});if(c.dataInit!=null){c.dataInit(e("select",m)[0])}if(c.dataEvents!=null){o(e("select",m)[0],c.dataEvents)}if(t.autosearch===true){e("select",m).change(function(e){r();return false})}}},e.jgrid.ajaxOptions,n.p.ajaxSelectOptions||{}))}else{var y;if(p.searchoptions&&p.searchoptions.value){y=p.searchoptions.value}else{if(p.editoptions&&p.editoptions.value){y=p.editoptions.value}}if(y){var w=document.createElement("select");w.style.width="100%";e(w).attr({name:p.index||p.name,id:"gs_"+p.name});if(typeof y==="string"){var E=y.split(";"),S,x;for(var T=0;T<E.length;T++){S=E[T].split(":");x=document.createElement("option");x.value=S[0];x.innerHTML=S[1];w.appendChild(x)}}else{if(typeof y==="object"){for(var N in y){x=document.createElement("option");x.value=N;x.innerHTML=y[N];w.appendChild(x)}}}if(c.defaultValue){e(w).val(c.defaultValue)}if(c.attr){e(w).attr(c.attr)}if(c.dataInit!=null){c.dataInit(w)}if(c.dataEvents!=null){o(w,c.dataEvents)}e(l).append(w);if(t.autosearch===true){e(w).change(function(e){r();return false})}}}break;case"text":var C=c.defaultValue?c.defaultValue:"";e(l).append("<input type='text' class='toggle-search' name='"+(p.index||p.name)+"' id='gs_"+p.name+"' value='"+C+"'/>");if(c.attr){e("input",l).attr(c.attr)}if(c.dataInit!=null){c.dataInit(e("input",l)[0])}if(c.dataEvents!=null){o(e("input",l)[0],c.dataEvents)}if(t.autosearch===true){if(t.searchOnEnter){e("input",l).keypress(function(e){var t=e.charCode?e.charCode:e.keyCode?e.keyCode:0;if(t==13){r();return false}return this})}else{e("input",l).keydown(function(e){var t=e.which;if(t!=9&&t!=16){if(h){clearTimeout(h)}h=setTimeout(function(){r()},500)}})}}break}}e(f).append(l);e(u).append(f)});e("table thead",n.grid.hDiv).append(u);this.triggerToolbar=r;this.clearToolbar=i;this.toggleToolbar=s})}})})(jQuery);var showModal=function(e){e.w.show()};var closeModal=function(e){e.w.hide().attr("aria-hidden","true");if(e.o){e.o.remove()}};var createModal=function(e,t,n,r,i,s){var o=document.createElement("div"),u;u=jQuery(n.gbox).attr("dir")=="rtl"?true:false;o.className="ui-widget ui-widget-content ui-corner-all ui-jqdialog";o.id=e.themodal;var a=document.createElement("div");a.className="ui-jqdialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix";a.id=e.modalhead;jQuery(a).append("<span class='ui-jqdialog-title'>"+n.caption+"</span>");var f=jQuery("<a href='javascript:void(0)' class='ui-jqdialog-titlebar-close ui-corner-all'></a>").hover(function(){f.addClass("ui-state-hover")},function(){f.removeClass("ui-state-hover")}).append("<span class='ui-icon ui-icon-closethick'></span>");jQuery(a).append(f);if(u){o.dir="rtl";jQuery(".ui-jqdialog-title",a).css("float","right");jQuery(".ui-jqdialog-titlebar-close",a).css("left",.3+"em")}else{o.dir="ltr";jQuery(".ui-jqdialog-title",a).css("float","left")}var l=document.createElement("div");jQuery(l).addClass("ui-jqdialog-content ui-widget-content").attr("id",e.modalcontent);jQuery(l).append(t);o.appendChild(l);jQuery(o).prepend(a);if(s===true){jQuery("body").append(o)}else{jQuery(o).insertBefore(r)}if(typeof n.jqModal==="undefined"){n.jqModal=true}var c={};if(jQuery.fn.jqm&&n.jqModal===true){if(n.left==0&&n.top==0){var h=[];h=findPos(i);n.left=h[0]+4;n.top=h[1]+4}c.top=n.top+"px";c.left=n.left}else{if(n.left!=0||n.top!=0){c.left=n.left;c.top=n.top+"px"}}jQuery("a.ui-jqdialog-titlebar-close",a).click(function(t){var r=jQuery("#"+e.themodal).data("onClose")||n.onClose;var i=jQuery("#"+e.themodal).data("gbox")||n.gbox;hideModal("#"+e.themodal,{gb:i,jqm:n.jqModal,onClose:r});return false});if(n.width==0||!n.width){n.width=300}if(n.height==0||!n.height){n.height=200}if(!n.zIndex){n.zIndex=950}var p=0;if(u&&c.left&&!s){p=jQuery(n.gbox).width()-(!isNaN(n.width)?parseInt(n.width):0)-8;c.left=parseInt(c.left)+parseInt(p)}if(c.left){c.left+="px"}jQuery(o).css(jQuery.extend({width:isNaN(n.width)?"auto":n.width+"px",height:isNaN(n.height)?"auto":n.height+"px",zIndex:n.zIndex,overflow:"hidden"},c)).attr({tabIndex:"-1",role:"dialog","aria-labelledby":e.modalhead,"aria-hidden":"true"});if(typeof n.drag=="undefined"){n.drag=true}if(typeof n.resize=="undefined"){n.resize=true}if(n.drag){jQuery(a).css("cursor","move");if(jQuery.fn.jqDrag){jQuery(o).jqDrag(a)}else{try{jQuery(o).draggable({handle:jQuery("#"+a.id)})}catch(d){}}}if(n.resize){if(jQuery.fn.jqResize){jQuery(o).append("<div class='jqResize ui-resizable-handle ui-resizable-se ui-icon ui-icon-gripsmall-diagonal-se ui-icon-grip-diagonal-se'></div>");jQuery("#"+e.themodal).jqResize(".jqResize",e.scrollelm?"#"+e.scrollelm:false)}else{try{jQuery(o).resizable({handles:"se, sw",alsoResize:e.scrollelm?"#"+e.scrollelm:false})}catch(d){}}}if(n.closeOnEscape===true){jQuery(o).keydown(function(t){if(t.which==27){var r=jQuery("#"+e.themodal).data("onClose")||n.onClose;hideModal(this,{gb:n.gbox,jqm:n.jqModal,onClose:r})}})}};var viewModal=function(e,t){t=jQuery.extend({toTop:true,overlay:10,modal:false,onShow:showModal,onHide:closeModal,gbox:"",jqm:true,jqM:true},t||{});if(jQuery.fn.jqm&&t.jqm==true){if(t.jqM){jQuery(e).attr("aria-hidden","false").jqm(t).jqmShow()}else{jQuery(e).attr("aria-hidden","false").jqmShow()}}else{if(t.gbox!=""){jQuery(".jqgrid-overlay:first",t.gbox).show();jQuery(e).data("gbox",t.gbox)}jQuery(e).show().attr("aria-hidden","false");try{jQuery(":input:visible",e)[0].focus()}catch(n){}}};var hideModal=function(e,t){t=jQuery.extend({jqm:true,gb:""},t||{});if(t.onClose){var n=t.onClose(e);if(typeof n=="boolean"&&!n){return}}if(jQuery.fn.jqm&&t.jqm===true){jQuery(e).attr("aria-hidden","true").jqmHide()}else{if(t.gb!=""){try{jQuery(".jqgrid-overlay:first",t.gb).hide()}catch(r){}}jQuery(e).hide().attr("aria-hidden","true")}};(function(e){var t=null;e.jgrid.extend({searchGrid:function(t){t=e.extend({recreateFilter:false,drag:true,sField:"searchField",sValue:"searchString",sOper:"searchOper",sFilter:"filters",beforeShowSearch:null,afterShowSearch:null,onInitializeSearch:null,closeAfterSearch:false,closeOnEscape:false,multipleSearch:false,sopt:null,onClose:null},e.jgrid.search,t||{});return this.each(function(){function v(i){var s=i!==undefined,o=e("#"+n.p.id),u={};if(t.multipleSearch===false){u[t.sField]=i.rules[0].field;u[t.sValue]=i.rules[0].data;u[t.sOper]=i.rules[0].op}else{u[t.sFilter]=i}o[0].p.search=s;e.extend(o[0].p.postData,u);o.trigger("reloadGrid",[{page:1}]);if(t.closeAfterSearch){g(e("#"+r))}}function m(r){var i=r!==undefined,s=e("#"+n.p.id),o=[];s[0].p.search=i;if(t.multipleSearch===false){o[t.sField]=o[t.sValue]=o[t.sOper]=""}else{o[t.sFilter]=""}e.extend(s[0].p.postData,o);s.trigger("reloadGrid",[{page:1}])}function g(r){if(t.onClose){var i=t.onClose(r);if(typeof i=="boolean"&&!i){return}}r.hide();e(".jqgrid-overlay:first","#gbox_"+n.p.id).hide()}function y(){var t=e(".ui-searchFilter").length;if(t>1){var i=e("#"+r).css("zIndex");e("#"+r).css({zIndex:parseInt(i)+t})}e("#"+r).show();e(".jqgrid-overlay:first","#gbox_"+n.p.id).show();try{e(":input:visible","#"+r)[0].focus()}catch(s){}}var n=this;if(!n.grid){return}if(e.fn.searchFilter){var r="fbox_"+n.p.id;if(t.recreateFilter===true){e("#"+r).remove()}if(e("#"+r).html()!=null){if(e.isFunction(t.beforeShowSearch)){t.beforeShowSearch(e("#"+r))}y();if(e.isFunction(t.afterShowSearch)){t.afterShowSearch(e("#"+r))}}else{var i=[],s=e("#"+n.p.id).jqGrid("getGridParam","colNames"),o=e("#"+n.p.id).jqGrid("getGridParam","colModel"),u=["eq","ne","lt","le","gt","ge","bw","bn","in","ni","ew","en","cn","nc"],a,f,l,h;h=jQuery.fn.searchFilter.defaults.operators;if(t.sopt!=null){h=[];l=0;for(a=0;a<t.sopt.length;a++){if((f=e.inArray(t.sopt[a],u))!=-1){h[l]={op:t.sopt[a],text:t.odata[f]};l++}}}var p;e.each(o,function(n,r){p=typeof r.search==="undefined"?true:r.search,hidden=r.hidden===true,soptions=e.extend({},{text:s[n],itemval:r.index||r.name},this.searchoptions),ignoreHiding=soptions.searchhidden===true;if(typeof soptions.sopt=="undefined"){soptions.sopt=t.sopt||u}l=0;soptions.ops=[];if(soptions.sopt.length>0){for(a=0;a<soptions.sopt.length;a++){if((f=e.inArray(soptions.sopt[a],u))!=-1){soptions.ops[l]={op:soptions.sopt[a],text:t.odata[f]};l++}}}if(typeof this.stype==="undefined"){this.stype="text"}if(this.stype=="select"){if(soptions.dataUrl!=null){}else{var o;if(soptions.value){o=soptions.value}else{if(this.editoptions){o=this.editoptions.value}}if(o){soptions.dataValues=[];if(typeof o==="string"){var h=o.split(";"),d;for(a=0;a<h.length;a++){d=h[a].split(":");soptions.dataValues[a]={value:d[0],text:d[1]}}}else{if(typeof o==="object"){a=0;for(var v in o){soptions.dataValues[a]={value:v,text:o[v]};a++}}}}}}if(ignoreHiding&&p||p&&!hidden){i.push(soptions)}});if(i.length>0){e("<div id='"+r+"' role='dialog' tabindex='-1'></div>").insertBefore("#gview_"+n.p.id);e("#"+r).searchFilter(i,{groupOps:t.groupOps,operators:h,onClose:g,resetText:t.Reset,searchText:t.Find,windowTitle:t.caption,rulesText:t.rulesText,matchText:t.matchText,onSearch:v,onReset:m,stringResult:t.multipleSearch,ajaxSelectOptions:e.extend({},e.jgrid.ajaxOptions,n.p.ajaxSelectOptions||{})});e(".ui-widget-overlay","#"+r).remove();if(n.p.direction=="rtl"){e(".ui-closer","#"+r).css("float","left")}if(t.drag===true){e("#"+r+" table thead tr:first td:first").css("cursor","move");if(jQuery.fn.jqDrag){e("#"+r).jqDrag(e("#"+r+" table thead tr:first td:first"))}else{try{e("#"+r).draggable({handle:e("#"+r+" table thead tr:first td:first")})}catch(d){}}}if(t.multipleSearch===false){e(".ui-del, .ui-add, .ui-del, .ui-add-last, .matchText, .rulesText","#"+r).hide();e("select[name='groupOp']","#"+r).hide()}if(e.isFunction(t.onInitializeSearch)){t.onInitializeSearch(e("#"+r))}if(e.isFunction(t.beforeShowSearch)){t.beforeShowSearch(e("#"+r))}y();if(e.isFunction(t.afterShowSearch)){t.afterShowSearch(e("#"+r))}if(t.closeOnEscape===true){e("#"+r).keydown(function(t){if(t.which==27){g(e("#"+r))}})}}}}})},editGridRow:function(n,r){r=e.extend({top:0,left:0,width:300,height:"auto",dataheight:"auto",modal:false,drag:true,resize:true,url:null,mtype:"POST",clearAfterAdd:true,closeAfterEdit:false,reloadAfterSubmit:true,onInitializeForm:null,beforeInitData:null,beforeShowForm:null,afterShowForm:null,beforeSubmit:null,afterSubmit:null,onclickSubmit:null,afterComplete:null,onclickPgButtons:null,afterclickPgButtons:null,editData:{},recreateForm:false,jqModal:true,closeOnEscape:false,addedrow:"first",topinfo:"",bottominfo:"",saveicon:[],closeicon:[],savekey:[false,13],navkeys:[false,38,40],checkOnSubmit:false,checkOnUpdate:false,_savedData:{},onClose:null,ajaxEditOptions:{},serializeEditData:null},e.jgrid.edit,r||{});t=r;return this.each(function(){function V(t,n,r){if(t==0){e("#pData","#"+u+"_2").addClass("ui-state-disabled")}else{e("#pData","#"+u+"_2").removeClass("ui-state-disabled")}if(t==n){e("#nData","#"+u+"_2").addClass("ui-state-disabled")}else{e("#nData","#"+u+"_2").removeClass("ui-state-disabled")}}function $(){var t=e(i).jqGrid("getDataIDs"),n=e("#id_g","#"+u).val(),r=e.inArray(n,t);return[r,t]}function J(){var n=true;e("#FormError","#"+u).hide();if(t.checkOnUpdate){E={};x={};K();T=e.extend({},E,x);N=Z(T,t._savedData);if(N){e("#"+o).data("disabled",true);e(".confirm","#"+f.themodal).show();n=false}}return n}function K(){e(".FormElement","#"+u).each(function(t){var n=e(".customelement",this);if(n.length){var r=n[0],s=r.name;e.each(i.p.colModel,function(t,n){if(this.name==s&&this.editoptions&&e.isFunction(this.editoptions.custom_value)){try{E[s]=this.editoptions.custom_value(e("#"+s,"#"+u),"get");if(E[s]===undefined){throw"e1"}}catch(r){if(r=="e1"){info_dialog(jQuery.jgrid.errors.errcap,"function 'custom_value' "+e.jgrid.edit.msg.novalue,jQuery.jgrid.edit.bClose)}else{info_dialog(jQuery.jgrid.errors.errcap,r.message,jQuery.jgrid.edit.bClose)}}return true}})}else{switch(e(this).get(0).type){case"checkbox":if(e(this).attr("checked")){E[this.name]=e(this).val()}else{var o=e(this).attr("offval");E[this.name]=o}break;case"select-one":E[this.name]=e("option:selected",this).val();x[this.name]=e("option:selected",this).text();break;case"select-multiple":E[this.name]=e(this).val();if(E[this.name]){E[this.name]=E[this.name].join(",")}else{E[this.name]=""}var a=[];e("option:selected",this).each(function(t,n){a[t]=e(n).text()});x[this.name]=a.join(",");break;case"password":case"text":case"textarea":case"button":E[this.name]=e(this).val();E[this.name]=!i.p.autoencode?E[this.name]:e.jgrid.htmlEncode(E[this.name]);break}}});return true}function Q(n,r,i,s){var o,u,f,l=0,c,h,p,d=[],v=false,m,g,y="<td class='CaptionTD ui-widget-content'>&#160;</td><td class='DataTD ui-widget-content' style='white-space:pre'>&#160;</td>",w="";for(var E=1;E<=s;E++){w+=y}if(n!="_empty"){v=e(r).jqGrid("getInd",n)}e(r.p.colModel).each(function(y){o=this.name;if(this.editrules&&this.editrules.edithidden==true){u=false}else{u=this.hidden===true?true:false}h=u?"style='display:none'":"";if(o!=="cb"&&o!=="subgrid"&&this.editable===true&&o!=="rn"){if(v===false){c=""}else{if(o==r.p.ExpandColumn&&r.p.treeGrid===true){c=e("td:eq("+y+")",r.rows[v]).text()}else{try{c=e.unformat(e("td:eq("+y+")",r.rows[v]),{colModel:this},y)}catch(E){c=e("td:eq("+y+")",r.rows[v]).html()}}}var S=e.extend({},this.editoptions||{},{id:o,name:o});frmopt=e.extend({},{elmprefix:"",elmsuffix:"",rowabove:false,rowcontent:""},this.formoptions||{}),m=parseInt(frmopt.rowpos)||l+1,g=parseInt((parseInt(frmopt.colpos)||1)*2);if(n=="_empty"&&S.defaultValue){c=e.isFunction(S.defaultValue)?S.defaultValue():S.defaultValue}if(!this.edittype){this.edittype="text"}p=createEl(this.edittype,S,c,false,e.extend({},e.jgrid.ajaxOptions,r.p.ajaxSelectOptions||{}));if(c==""&&this.edittype=="checkbox"){c=e(p).attr("offval")}if(t.checkOnSubmit||t.checkOnUpdate){t._savedData[o]=c}e(p).addClass("FormElement");f=e(i).find("tr[rowpos="+m+"]");if(frmopt.rowabove){var x=e("<tr><td class='contentinfo' colspan='"+s*2+"'>"+frmopt.rowcontent+"</td></tr>");e(i).append(x);x[0].rp=m}if(f.length==0){f=e("<tr "+h+" rowpos='"+m+"'></tr>").addClass("FormData").attr("id","tr_"+o);e(f).append(w);e(i).append(f);f[0].rp=m}e("td:eq("+(g-2)+")",f[0]).html(typeof frmopt.label==="undefined"?r.p.colNames[y]:frmopt.label);e("td:eq("+(g-1)+")",f[0]).append(frmopt.elmprefix).append(p).append(frmopt.elmsuffix);d[l]=y;l++}});if(l>0){var S=e("<tr class='FormData' style='display:none'><td class='CaptionTD'></td><td colspan='"+(s*2-1)+"' class='DataTD'><input class='FormElement' id='id_g' type='text' name='id' value='"+n+"'/></td></tr>");S[0].rp=l+999;e(i).append(S);if(t.checkOnSubmit||t.checkOnUpdate){t._savedData.id=n}}return d}function G(n,r,i){var s,o,f=0,l,c,h,p,d;if(t.checkOnSubmit||t.checkOnUpdate){t._savedData={};t._savedData.id=n}var v=r.p.colModel;if(n=="_empty"){e(v).each(function(n){s=this.name;h=e.extend({},this.editoptions||{});c=e("#"+e.jgrid.jqID(s),"#"+i);if(c[0]!=null){p="";if(h.defaultValue){p=e.isFunction(h.defaultValue)?h.defaultValue():h.defaultValue;if(c[0].type=="checkbox"){d=p.toLowerCase();if(d.search(/(false|0|no|off|undefined)/i)<0&&d!==""){c[0].checked=true;c[0].defaultChecked=true;c[0].value=p}else{c.attr({checked:"",defaultChecked:""})}}else{c.val(p)}}else{if(c[0].type=="checkbox"){c[0].checked=false;c[0].defaultChecked=false;p=e(c).attr("offval")}else{if(c[0].type.substr(0,6)=="select"){c[0].selectedIndex=0}else{c.val(p)}}}if(t.checkOnSubmit===true||t.checkOnUpdate){t._savedData[s]=p}}});e("#id_g","#"+i).val("_empty");return}var m=e(r).jqGrid("getInd",n,true);if(!m){return}e("td",m).each(function(n){s=v[n].name;if(s!=="cb"&&s!=="subgrid"&&s!=="rn"&&v[n].editable===true){if(s==r.p.ExpandColumn&&r.p.treeGrid===true){l=e(this).text()}else{try{l=e.unformat(this,{colModel:v[n]},n)}catch(o){l=e(this).html()}}if(t.checkOnSubmit===true||t.checkOnUpdate){t._savedData[s]=l}s=e.jgrid.jqID(s);switch(v[n].edittype){case"password":case"text":case"button":case"image":l=e.jgrid.htmlDecode(l);e("#"+s,"#"+i).val(l);break;case"textarea":if(l==" "||l=="&#160;"||l.length==1&&l.charCodeAt(0)==160){l=""}e("#"+s,"#"+i).val(l);break;case"select":var u=l.split(",");u=e.map(u,function(t){return e.trim(t)});e("#"+s+" option","#"+i).each(function(t){if(!v[n].editoptions.multiple&&(u[0]==e(this).text()||u[0]==e(this).val())){this.selected=true}else{if(v[n].editoptions.multiple){if(e.inArray(e(this).text(),u)>-1||e.inArray(e(this).val(),u)>-1){this.selected=true}else{this.selected=false}}else{this.selected=false}}});break;case"checkbox":l=l+"";l=l.toLowerCase();if(l.search(/(false|0|no|off|undefined)/i)<0&&l!==""){e("#"+s,"#"+i).attr("checked",true);e("#"+s,"#"+i).attr("defaultChecked",true)}else{e("#"+s,"#"+i).attr("checked",false);e("#"+s,"#"+i).attr("defaultChecked","")}break;case"custom":try{if(v[n].editoptions&&e.isFunction(v[n].editoptions.custom_value)){var c=v[n].editoptions.custom_value(e("#"+s,"#"+i),"set",l)}else{throw"e1"}}catch(h){if(h=="e1"){info_dialog(jQuery.jgrid.errors.errcap,"function 'custom_value' "+e.jgrid.edit.msg.nodefined,jQuery.jgrid.edit.bClose)}else{info_dialog(jQuery.jgrid.errors.errcap,h.message,jQuery.jgrid.edit.bClose)}}break}f++}});if(f>0){e("#id_g","#"+u).val(n)}}function Y(){var n,l=[true,"",""],c={};if(e.isFunction(t.beforeCheckValues)){var h=t.beforeCheckValues(E,e("#"+o),E.id=="_empty"?"add":"edit");if(h&&typeof h==="object"){E=h}}for(var p in E){l=checkValues(E[p],p,i);if(l[0]==false){break}}if(l[0]){if(e.isFunction(t.onclickSubmit)){c=t.onclickSubmit(t,E)||{}}if(e.isFunction(t.beforeSubmit)){l=t.beforeSubmit(E,e("#"+o))}}w=t.url?t.url:e(i).jqGrid("getGridParam","editurl");if(l[0]){if(!w){l[0]=false;l[1]+=" "+e.jgrid.errors.nourl}}if(l[0]===false){e("#FormError>td","#"+u).html(l[1]);e("#FormError","#"+u).show();return}if(!r.processing){r.processing=true;e("#sData","#"+u+"_2").addClass("ui-state-active");E.oper=E.id=="_empty"?"add":"edit";E=e.extend(E,t.editData,c);e.ajax(e.extend({url:w,type:t.mtype,data:e.isFunction(t.serializeEditData)?t.serializeEditData(E):E,complete:function(c,h){if(h!="success"){l[0]=false;if(e.isFunction(t.errorTextFormat)){l[1]=t.errorTextFormat(c)}else{l[1]=h+" Status: '"+c.statusText+"'. Error code: "+c.status}}else{if(e.isFunction(t.afterSubmit)){l=t.afterSubmit(c,E)}}if(l[0]===false){e("#FormError>td","#"+u).html(l[1]);e("#FormError","#"+u).show()}else{e.each(i.p.colModel,function(e,t){if(x[this.name]&&this.formatter&&this.formatter=="select"){try{delete x[this.name]}catch(n){}}});E=e.extend(E,x);if(E.id=="_empty"){if(!l[2]){l[2]=parseInt(i.p.records)+1}E.id=l[2];if(t.closeAfterAdd){if(t.reloadAfterSubmit){e(i).trigger("reloadGrid")}else{e(i).jqGrid("addRowData",l[2],E,r.addedrow);e(i).jqGrid("setSelection",l[2])}hideModal("#"+f.themodal,{gb:"#gbox_"+s,jqm:r.jqModal,onClose:t.onClose})}else{if(t.clearAfterAdd){if(t.reloadAfterSubmit){e(i).trigger("reloadGrid")}else{e(i).jqGrid("addRowData",l[2],E,r.addedrow)}G("_empty",i,o)}else{if(t.reloadAfterSubmit){e(i).trigger("reloadGrid")}else{e(i).jqGrid("addRowData",l[2],E,r.addedrow)}}}}else{if(t.reloadAfterSubmit){e(i).trigger("reloadGrid");if(!t.closeAfterEdit){setTimeout(function(){e(i).jqGrid("setSelection",E.id)},1e3)}}else{if(i.p.treeGrid===true){e(i).jqGrid("setTreeRow",E.id,E)}else{e(i).jqGrid("setRowData",E.id,E)}}if(t.closeAfterEdit){hideModal("#"+f.themodal,{gb:"#gbox_"+s,jqm:r.jqModal,onClose:t.onClose})}}if(e.isFunction(t.afterComplete)){n=c;setTimeout(function(){t.afterComplete(n,E,e("#"+o));n=null},500)}}r.processing=false;if(t.checkOnSubmit||t.checkOnUpdate){e("#"+o).data("disabled",false);if(t._savedData.id!="_empty"){t._savedData=E}}e("#sData","#"+u+"_2").removeClass("ui-state-active");try{e(":input:visible","#"+o)[0].focus()}catch(p){}},error:function(t,n,i){e("#FormError>td","#"+u).html(n+" : "+i);e("#FormError","#"+u).show();r.processing=false;e("#"+o).data("disabled",false);e("#sData","#"+u+"_2").removeClass("ui-state-active")}},e.jgrid.ajaxOptions,t.ajaxEditOptions))}}function Z(e,t){var n=false,r;for(r in e){if(e[r]!=t[r]){n=true;break}}return n}var i=this;if(!i.grid||!n){return}var s=i.p.id,o="FrmGrid_"+s,u="TblGrid_"+s,f={themodal:"editmod"+s,modalhead:"edithd"+s,modalcontent:"editcnt"+s,scrollelm:o},l=e.isFunction(t.beforeShowForm)?t.beforeShowForm:false,h=e.isFunction(t.afterShowForm)?t.afterShowForm:false,p=e.isFunction(t.beforeInitData)?t.beforeInitData:false,v=e.isFunction(t.onInitializeForm)?t.onInitializeForm:false,m=null,g=1,y=0,w,E,S,x,T,N;if(n=="new"){n="_empty";r.caption=r.addCaption}else{r.caption=r.editCaption}if(r.recreateForm===true&&e("#"+f.themodal).html()!=null){e("#"+f.themodal).remove()}var C=true;if(r.checkOnUpdate&&r.jqModal&&!r.modal){C=false}if(e("#"+f.themodal).html()!=null){e(".ui-jqdialog-title","#"+f.modalhead).html(r.caption);e("#FormError","#"+u).hide();if(t.topinfo){e(".topinfo","#"+u+"_2").html(t.topinfo);e(".tinfo","#"+u+"_2").show()}else{e(".tinfo","#"+u+"_2").hide()}if(t.bottominfo){e(".bottominfo","#"+u+"_2").html(t.bottominfo);e(".binfo","#"+u+"_2").show()}else{e(".binfo","#"+u+"_2").hide()}if(p){p(e("#"+o))}G(n,i,o);if(n=="_empty"){e("#pData, #nData","#"+u+"_2").hide()}else{e("#pData, #nData","#"+u+"_2").show()}if(r.processing===true){r.processing=false;e("#sData","#"+u+"_2").removeClass("ui-state-active")}if(e("#"+o).data("disabled")===true){e(".confirm","#"+f.themodal).hide();e("#"+o).data("disabled",false)}if(l){l(e("#"+o))}e("#"+f.themodal).data("onClose",t.onClose);viewModal("#"+f.themodal,{gbox:"#gbox_"+s,jqm:r.jqModal,jqM:false,closeoverlay:C,modal:r.modal});if(!C){e(".jqmOverlay").click(function(){if(!J()){return false}hideModal("#"+f.themodal,{gb:"#gbox_"+s,jqm:r.jqModal,onClose:t.onClose});return false})}if(h){h(e("#"+o))}}else{e(i.p.colModel).each(function(e){var t=this.formoptions;g=Math.max(g,t?t.colpos||0:0);y=Math.max(y,t?t.rowpos||0:0)});var k=isNaN(r.dataheight)?r.dataheight:r.dataheight+"px";var L,A=e("<form name='FormPost' id='"+o+"' class='FormGrid' style='width:100%;overflow:auto;position:relative;height:"+k+";'></form>").data("disabled",false),O=e("<table id='"+u+"' class='EditTable' cellspacing='0' cellpading='0' border='0'><tbody></tbody></table>");e(A).append(O);L=e("<tr id='FormError' style='display:none'><td class='ui-state-error' colspan='"+g*2+"'></td></tr>");L[0].rp=0;e(O).append(L);L=e("<tr style='display:none' class='tinfo'><td class='topinfo' colspan='"+g*2+"'>"+t.topinfo+"</td></tr>");L[0].rp=0;e(O).append(L);if(p){p(e("#"+o))}var M=i.p.direction=="rtl"?true:false,_=M?"nData":"pData",D=M?"pData":"nData",P=Q(n,i,O,g),H="<a href='javascript:void(0)' id='"+_+"' class='fm-button ui-state-default ui-corner-left'><span class='ui-icon ui-icon-triangle-1-w'></span></div>",B="<a href='javascript:void(0)' id='"+D+"' class='fm-button ui-state-default ui-corner-right'><span class='ui-icon ui-icon-triangle-1-e'></span></div>",j="<a href='javascript:void(0)' id='sData' class='fm-button ui-state-default ui-corner-all'>"+r.bSubmit+"</a>",F="<a href='javascript:void(0)' id='cData' class='fm-button ui-state-default ui-corner-all'>"+r.bCancel+"</a>";var I="<table border='0' class='EditTable' id='"+u+"_2'><tbody><tr id='Act_Buttons'><td class='navButton ui-widget-content'>"+(M?B+H:H+B)+"</td><td class='EditButton ui-widget-content'>"+j+F+"</td></tr>";I+="<tr style='display:none' class='binfo'><td class='bottominfo' colspan='2'>"+t.bottominfo+"</td></tr>";I+="</tbody></table>";if(y>0){var q=[];e.each(e(O)[0].rows,function(e,t){q[e]=t});q.sort(function(e,t){if(e.rp>t.rp){return 1}if(e.rp<t.rp){return-1}return 0});e.each(q,function(t,n){e("tbody",O).append(n)})}r.gbox="#gbox_"+s;var R=false;if(r.closeOnEscape===true){r.closeOnEscape=false;R=true}var U=e("<span></span>").append(A).append(I);createModal(f,U,r,"#gview_"+i.p.id,e("#gview_"+i.p.id)[0]);if(M){e("#pData, #nData","#"+u+"_2").css("float","right");e(".EditButton","#"+u+"_2").css("text-align","left")}if(t.topinfo){e(".tinfo","#"+u+"_2").show()}if(t.bottominfo){e(".binfo","#"+u+"_2").show()}U=null;I=null;e("#"+f.themodal).keydown(function(n){var i=n.target;if(e("#"+o).data("disabled")===true){return false}if(t.savekey[0]===true&&n.which==t.savekey[1]){if(i.tagName!="TEXTAREA"){e("#sData","#"+u+"_2").trigger("click");return false}}if(n.which===27){if(!J()){return false}if(R){hideModal(this,{gb:r.gbox,jqm:r.jqModal,onClose:t.onClose})}return false}if(t.navkeys[0]===true){if(e("#id_g","#"+u).val()=="_empty"){return true}if(n.which==t.navkeys[1]){e("#pData","#"+u+"_2").trigger("click");return false}if(n.which==t.navkeys[2]){e("#nData","#"+u+"_2").trigger("click");return false}}});if(r.checkOnUpdate){e("a.ui-jqdialog-titlebar-close span","#"+f.themodal).removeClass("jqmClose");e("a.ui-jqdialog-titlebar-close","#"+f.themodal).unbind("click").click(function(){if(!J()){return false}hideModal("#"+f.themodal,{gb:"#gbox_"+s,jqm:r.jqModal,onClose:t.onClose});return false})}r.saveicon=e.extend([true,"left","ui-icon-disk"],r.saveicon);r.closeicon=e.extend([true,"left","ui-icon-close"],r.closeicon);if(r.saveicon[0]==true){e("#sData","#"+u+"_2").addClass(r.saveicon[1]=="right"?"fm-button-icon-right":"fm-button-icon-left").append("<span class='ui-icon "+r.saveicon[2]+"'></span>")}if(r.closeicon[0]==true){e("#cData","#"+u+"_2").addClass(r.closeicon[1]=="right"?"fm-button-icon-right":"fm-button-icon-left").append("<span class='ui-icon "+r.closeicon[2]+"'></span>")}if(t.checkOnSubmit||t.checkOnUpdate){j="<a href='javascript:void(0)' id='sNew' class='fm-button ui-state-default ui-corner-all' style='z-index:1002'>"+r.bYes+"</a>";B="<a href='javascript:void(0)' id='nNew' class='fm-button ui-state-default ui-corner-all' style='z-index:1002'>"+r.bNo+"</a>";F="<a href='javascript:void(0)' id='cNew' class='fm-button ui-state-default ui-corner-all' style='z-index:1002'>"+r.bExit+"</a>";var z,W=r.zIndex||999;W++;if(e.browser.msie&&e.browser.version==6){z='<iframe style="display:block;position:absolute;z-index:-1;filter:Alpha(Opacity=\'0\');" src="javascript:false;"></iframe>'}else{z=""}e("<div class='ui-widget-overlay jqgrid-overlay confirm' style='z-index:"+W+";display:none;'>&#160;"+z+"</div><div class='confirm ui-widget-content ui-jqconfirm' style='z-index:"+(W+1)+"'>"+r.saveData+"<br/><br/>"+j+B+F+"</div>").insertAfter("#"+o);e("#sNew","#"+f.themodal).click(function(){Y();e("#"+o).data("disabled",false);e(".confirm","#"+f.themodal).hide();return false});e("#nNew","#"+f.themodal).click(function(){e(".confirm","#"+f.themodal).hide();e("#"+o).data("disabled",false);setTimeout(function(){e(":input","#"+o)[0].focus()},0);return false});e("#cNew","#"+f.themodal).click(function(){e(".confirm","#"+f.themodal).hide();e("#"+o).data("disabled",false);hideModal("#"+f.themodal,{gb:"#gbox_"+s,jqm:r.jqModal,onClose:t.onClose});return false})}if(v){v(e("#"+o))}if(n=="_empty"){e("#pData,#nData","#"+u+"_2").hide()}else{e("#pData,#nData","#"+u+"_2").show()}if(l){l(e("#"+o))}e("#"+f.themodal).data("onClose",t.onClose);viewModal("#"+f.themodal,{gbox:"#gbox_"+s,jqm:r.jqModal,closeoverlay:C,modal:r.modal});if(!C){e(".jqmOverlay").click(function(){if(!J()){return false}hideModal("#"+f.themodal,{gb:"#gbox_"+s,jqm:r.jqModal,onClose:t.onClose});return false})}if(h){h(e("#"+o))}e(".fm-button","#"+f.themodal).hover(function(){e(this).addClass("ui-state-hover")},function(){e(this).removeClass("ui-state-hover")});e("#sData","#"+u+"_2").click(function(n){E={};x={};e("#FormError","#"+u).hide();K();if(E.id=="_empty"){Y()}else{if(r.checkOnSubmit===true){T=e.extend({},E,x);N=Z(T,t._savedData);if(N){e("#"+o).data("disabled",true);e(".confirm","#"+f.themodal).show()}else{Y()}}else{Y()}}return false});e("#cData","#"+u+"_2").click(function(e){if(!J()){return false}hideModal("#"+f.themodal,{gb:"#gbox_"+s,jqm:r.jqModal,onClose:t.onClose});return false});e("#nData","#"+u+"_2").click(function(t){if(!J()){return false}e("#FormError","#"+u).hide();var n=$();n[0]=parseInt(n[0]);if(n[0]!=-1&&n[1][n[0]+1]){if(e.isFunction(r.onclickPgButtons)){r.onclickPgButtons("next",e("#"+o),n[1][n[0]])}G(n[1][n[0]+1],i,o);e(i).jqGrid("setSelection",n[1][n[0]+1]);if(e.isFunction(r.afterclickPgButtons)){r.afterclickPgButtons("next",e("#"+o),n[1][n[0]+1])}V(n[0]+1,n[1].length-1)}return false});e("#pData","#"+u+"_2").click(function(t){if(!J()){return false}e("#FormError","#"+u).hide();var n=$();if(n[0]!=-1&&n[1][n[0]-1]){if(e.isFunction(r.onclickPgButtons)){r.onclickPgButtons("prev",e("#"+o),n[1][n[0]])}G(n[1][n[0]-1],i,o);e(i).jqGrid("setSelection",n[1][n[0]-1]);if(e.isFunction(r.afterclickPgButtons)){r.afterclickPgButtons("prev",e("#"+o),n[1][n[0]-1])}V(n[0]-1,n[1].length-1)}return false})}var X=$();V(X[0],X[1].length-1)})},viewGridRow:function(t,n){n=e.extend({top:0,left:0,width:"620",height:"auto",dataheight:"auto",altclass:"ui-priority-secondary",altRows:true,modal:false,drag:true,resize:false,jqModal:true,closeOnEscape:true,labelswidth:"30%",closeicon:[],navkeys:[false,38,40],onClose:null},e.jgrid.view,n||{});return this.each(function(){function k(){if(n.closeOnEscape===true||n.navkeys[0]===true){setTimeout(function(){e(".ui-jqdialog-titlebar-close","#"+u.modalhead).focus()},0)}}function A(t,n,r){if(t==0){e("#pData","#"+o+"_2").addClass("ui-state-disabled")}else{e("#pData","#"+o+"_2").removeClass("ui-state-disabled")}if(t+1==n){e("#nData","#"+o+"_2").addClass("ui-state-disabled")}else{e("#nData","#"+o+"_2").removeClass("ui-state-disabled")}}function O(){var t=e(r).jqGrid("getDataIDs"),n=e("#id_g","#"+o).val(),i=e.inArray(n,t);return[i,t]}function M(t,r,i,s){var o,u,a,f,l,c=0,h,p,v=[],m=false,g="<td class='CaptionTD form-view-label' width='"+n.labelswidth+"'>&#160;</td><td class='DataTD form-view-data ui-helper-reset'>&#160;</td>",y="",w="<td class='CaptionTD form-view-label '>&#160;</td><td class='DataTD form-view-data '>&#160;</td>",E=["integer","number","currency"],S=0,x=0,T,N,C;for(var k=1;k<=s;k++){y+=k==1?g:w}e(r.p.colModel).each(function(t){if(this.editrules&&this.editrules.edithidden===true){u=false}else{u=this.hidden===true?true:false}if(!u&&this.align==="right"){if(this.formatter&&e.inArray(this.formatter,E)!==-1){S=Math.max(S,parseInt(this.width,10))}else{x=Math.max(x,parseInt(this.width,10))}}});T=S!==0?S:x!==0?x:0;m=e(r).jqGrid("getInd",t);var L=r.p.colModel.length;if(L%2==0){pagination_class="oddclass"}else{pagination_class="evenclass"}e(r.p.colModel).each(function(t){o=this.name;N=false;if(this.editrules&&this.editrules.edithidden===true){u=false}else{u=this.hidden===true?true:false}p=u?"style='display:none'":"";C=typeof this.viewable!="boolean"?true:this.viewable;if(o!=="cb"&&o!=="subgrid"&&o!=="rn"&&C){if(m===false){h=""}else{if(o==r.p.ExpandColumn&&r.p.treeGrid===true){h=e("td:eq("+t+")",r.rows[m]).text()}else{h=e("td:eq("+t+")",r.rows[m]).html()}}N=this.align==="right"&&T!==0?true:false;var n=e.extend({},this.editoptions||{},{id:o,name:o}),f=e.extend({},{rowabove:false,rowcontent:""},this.formoptions||{}),l=parseInt(f.rowpos)||c+1,d=parseInt((parseInt(f.colpos)||1)*2);if(f.rowabove){var g=e("<tr><td class='contentinfo' colspan='"+s*2+"'>"+f.rowcontent+"</td></tr>");e(i).append(g);g[0].rp=l}a=e(i).find("tr[rowpos="+l+"]");var w="";if(l%2==0)w="oddclass";else w="evenclass";if(a.length==0){a=e("<tr "+p+" rowpos='"+l+"'></tr>").addClass(w).attr("id","trv_"+o);e(a).append(y);e(i).append(a);a[0].rp=l}e("td:eq("+(d-2)+")",a[0]).html("<b>"+(typeof f.label==="undefined"?r.p.colNames[t]:f.label)+"</b>");e("td:eq("+(d-1)+")",a[0]).append("<span>"+h+"</span>").attr("id","v_"+o);if(N){e("td:eq("+(d-1)+") span",a[0]).css({"text-align":"right",width:T+"px"})}v[c]=t;c++}});if(c>0){var A=e("<tr class='FormData' style='display:none'><td class='CaptionTD'></td><td colspan='"+(s*2-1)+"' class='DataTD'><input class='FormElement' id='id_g' type='text' name='id' value='"+t+"'/></td></tr>");A[0].rp=c+99;e(i).append(A)}return v}function _(t,n){var r,i,s=0,u,a,f;f=e(n).jqGrid("getInd",t,true);if(!f){return}e("td",f).each(function(t){r=n.p.colModel[t].name;if(n.p.colModel[t].editrules&&n.p.colModel[t].editrules.edithidden===true){i=false}else{i=n.p.colModel[t].hidden===true?true:false}if(r!=="cb"&&r!=="subgrid"&&r!=="rn"){if(r==n.p.ExpandColumn&&n.p.treeGrid===true){u=e(this).text()}else{u=e(this).html()}a=e.extend({},n.p.colModel[t].editoptions||{});r=e.jgrid.jqID("v_"+r);e("#"+r+" span","#"+o).html(u);if(i){e("#"+r,"#"+o).parents("tr:first").hide()}s++}});if(s>0){e("#id_g","#"+o).val(t)}}var r=this;if(!r.grid||!t){return}if(!n.imgpath){n.imgpath=r.p.imgpath}var i=r.p.id,s="ViewGrid_"+i,o="ViewTbl_"+i,u={themodal:"viewmod"+i,modalhead:"viewhd"+i,modalcontent:"viewcnt"+i,scrollelm:s},a=1,f=0;if(e("#"+u.themodal).html()!=null){e(".ui-jqdialog-title","#"+u.modalhead).html(n.caption);e("#FormError","#"+o).hide();_(t,r);viewModal("#"+u.themodal,{gbox:"#gbox_"+i,jqm:n.jqModal,jqM:false,modal:n.modal});k()}else{e(r.p.colModel).each(function(e){var t=this.formoptions;a=Math.max(a,t?t.colpos||0:0);f=Math.max(f,t?t.rowpos||0:0)});var l=isNaN(n.dataheight)?n.dataheight:n.dataheight+"px";var h,p=e("<form name='FormPost' id='"+s+"' class='FormGrid' style='width:100%;overflow:auto;position:relative;height:"+l+";'></form>"),v=e("<table id='"+o+"' class='EditTable' cellspacing='0' cellpading='0' border='0' style='table-layout:fixed'><tbody></tbody></table>");e(p).append(v);var m=M(t,r,v,a),g=r.p.direction=="rtl"?true:false,y=g?"nData":"pData",w=g?"pData":"nData",E="<div class='nav_content'><a href='javascript:void(0)' id='"+y+"' class='fm-button '><span class='ui-icon ui-icon-triangle-1-w'></span>",S="<a href='javascript:void(0)' id='"+w+"' class='fm-button '><span class='ui-icon ui-icon-triangle-1-e'></span>",x="<a href='javascript:void(0)' id='cData' class='fm-button ui-state-default ui-corner-all'>"+n.bClose+"</a></div>";if(f>0){var T=[];e.each(e(v)[0].rows,function(e,t){T[e]=t});T.sort(function(e,t){if(e.rp>t.rp){return 1}if(e.rp<t.rp){return-1}return 0});e.each(T,function(t,n){e("tbody",v).append(n)})}n.gbox="#gbox_"+i;var N=false;if(n.closeOnEscape===true){n.closeOnEscape=false;N=true}var C=e("<span></span>").append(p).append("<div border='0' class='EditTable' id='"+o+"_2'><div id='Act_Buttons' class='"+pagination_class+"'><div class='navButton1' >"+(g?S+E:E+S)+"</div></div></div>");createModal(u,C,n,"#gview_"+r.p.id,e("#gview_"+r.p.id)[0]);if(g){e("#pData, #nData","#"+o+"_2").css("float","right");e(".EditButton","#"+o+"_2").css("text-align","left")}C=null;e("#"+u.themodal).keydown(function(t){if(t.which===27){if(N){hideModal(this,{gb:n.gbox,jqm:n.jqModal,onClose:n.onClose})}return false}if(n.navkeys[0]===true){if(t.which===n.navkeys[1]){e("#pData","#"+o+"_2").trigger("click");return false}if(t.which===n.navkeys[2]){e("#nData","#"+o+"_2").trigger("click");return false}}});n.closeicon=e.extend([true,"left","ui-icon-close"],n.closeicon);if(n.closeicon[0]==true){e("#cData","#"+o+"_2").addClass(n.closeicon[1]=="right"?"fm-button-icon-right":"fm-button-icon-left").append("<span class='ui-icon "+n.closeicon[2]+"'></span>")}viewModal("#"+u.themodal,{gbox:"#gbox_"+i,jqm:n.jqModal,modal:n.modal});e(".fm-button:not(.ui-state-disabled)","#"+o+"_2").hover(function(){e(this).addClass("ui-state-hover")},function(){e(this).removeClass("ui-state-hover")});k();e("#cData","#"+o+"_2").click(function(e){hideModal("#"+u.themodal,{gb:"#gbox_"+i,jqm:n.jqModal,onClose:n.onClose});return false});e("#nData","#"+o+"_2").click(function(t){e("#FormError","#"+o).hide();var i=O();i[0]=parseInt(i[0]);if(i[0]!=-1&&i[1][i[0]+1]){if(e.isFunction(n.onclickPgButtons)){n.onclickPgButtons("next",e("#"+s),i[1][i[0]])}_(i[1][i[0]+1],r);e(r).jqGrid("setSelection",i[1][i[0]+1]);if(e.isFunction(n.afterclickPgButtons)){n.afterclickPgButtons("next",e("#"+s),i[1][i[0]+1])}A(i[0]+1,i[1].length-1)}k();return false});e("#pData","#"+o+"_2").click(function(t){e("#FormError","#"+o).hide();var i=O();if(i[0]!=-1&&i[1][i[0]-1]){if(e.isFunction(n.onclickPgButtons)){n.onclickPgButtons("prev",e("#"+s),i[1][i[0]])}_(i[1][i[0]-1],r);e(r).jqGrid("setSelection",i[1][i[0]-1]);if(e.isFunction(n.afterclickPgButtons)){n.afterclickPgButtons("prev",e("#"+s),i[1][i[0]-1])}A(i[0]-1,i[1].length-1)}k();return false})}var L=O();A(L[0],L[1].length-1)})},delGridRow:function(n,r){r=e.extend({top:0,left:0,width:240,height:"auto",dataheight:"auto",modal:false,drag:true,resize:true,url:"",mtype:"POST",reloadAfterSubmit:true,beforeShowForm:null,afterShowForm:null,beforeSubmit:null,onclickSubmit:null,afterSubmit:null,jqModal:true,closeOnEscape:false,delData:{},delicon:[],cancelicon:[],onClose:null,ajaxDelOptions:{},serializeDelData:null},e.jgrid.del,r||{});t=r;return this.each(function(){var i=this;if(!i.grid){return}if(!n){return}var s=typeof r.beforeShowForm==="function"?true:false,o=typeof r.afterShowForm==="function"?true:false,u=i.p.id,f={},l="DelTbl_"+u,h={themodal:"delmod"+u,modalhead:"delhd"+u,modalcontent:"delcnt"+u,scrollelm:l};if(isArray(n)){n=n.join()}if(e("#"+h.themodal).html()!=null){e("#DelData>td","#"+l).text(n);e("#DelError","#"+l).hide();if(r.processing===true){r.processing=false;e("#dData","#"+l).removeClass("ui-state-active")}if(s){r.beforeShowForm(e("#"+l))}viewModal("#"+h.themodal,{gbox:"#gbox_"+u,jqm:r.jqModal,jqM:false,modal:r.modal});if(o){r.afterShowForm(e("#"+l))}}else{var p=isNaN(r.dataheight)?r.dataheight:r.dataheight+"px";var v="<div id='"+l+"' class='formdata' style='width:100%;overflow:auto;position:relative;height:"+p+";'>";v+="<table class='DelTable'><tbody>";v+="<tr id='DelError' style='display:none'><td class='ui-state-error'></td></tr>";v+="<tr id='DelData' style='display:none'><td >"+n+"</td></tr>";v+='<tr><td class="delmsg" style="white-space:pre;">'+r.msg+"</td></tr><tr><td >&#160;</td></tr>";v+="</tbody></table></div>";var m="<a href='javascript:void(0)' id='dData' class='fm-button ui-state-default ui-corner-all'>"+r.bSubmit+"</a>",g="<a href='javascript:void(0)' id='eData' class='fm-button ui-state-default ui-corner-all'>"+r.bCancel+"</a>";v+="<table cellspacing='0' cellpadding='0' border='0' class='EditTable' id='"+l+"_2'><tbody><tr><td class='DataTD ui-widget-content'></td></tr><tr style='display:block;height:3px;'><td></td></tr><tr><td class='DelButton EditButton'>"+m+"&#160;"+g+"</td></tr></tbody></table>";r.gbox="#gbox_"+u;createModal(h,v,r,"#gview_"+i.p.id,e("#gview_"+i.p.id)[0]);e(".fm-button","#"+l+"_2").hover(function(){e(this).addClass("ui-state-hover")},function(){e(this).removeClass("ui-state-hover")});r.delicon=e.extend([true,"left","ui-icon-scissors"],r.delicon);r.cancelicon=e.extend([true,"left","ui-icon-cancel"],r.cancelicon);if(r.delicon[0]==true){e("#dData","#"+l+"_2").addClass(r.delicon[1]=="right"?"fm-button-icon-right":"fm-button-icon-left").append("<span class='ui-icon "+r.delicon[2]+"'></span>")}if(r.cancelicon[0]==true){e("#eData","#"+l+"_2").addClass(r.cancelicon[1]=="right"?"fm-button-icon-right":"fm-button-icon-left").append("<span class='ui-icon "+r.cancelicon[2]+"'></span>")}e("#dData","#"+l+"_2").click(function(n){var s=[true,""];f={};var o=e("#DelData>td","#"+l).text();if(typeof r.onclickSubmit==="function"){f=r.onclickSubmit(t)||{}}if(typeof r.beforeSubmit==="function"){s=r.beforeSubmit(o)}if(s[0]){var c=t.url?t.url:e(i).jqGrid("getGridParam","editurl");if(!c){s[0]=false;s[1]+=" "+e.jgrid.errors.nourl}}if(s[0]===false){e("#DelError>td","#"+l).html(s[1]);e("#DelError","#"+l).show()}else{if(!r.processing){r.processing=true;e(this).addClass("ui-state-active");var p=e.extend({oper:"del",id:o},t.delData,f);e.ajax(e.extend({url:c,type:r.mtype,data:e.isFunction(r.serializeDelData)?r.serializeDelData(p):p,complete:function(n,f){if(f!="success"){s[0]=false;if(e.isFunction(t.errorTextFormat)){s[1]=t.errorTextFormat(n)}else{s[1]=f+" Status: '"+n.statusText+"'. Error code: "+n.status}}else{if(typeof t.afterSubmit==="function"){s=t.afterSubmit(n,p)}}if(s[0]===false){e("#DelError>td","#"+l).html(s[1]);e("#DelError","#"+l).show()}else{if(t.reloadAfterSubmit){if(i.p.treeGrid){e(i).jqGrid("setGridParam",{treeANode:0,datatype:i.p.treedatatype})}e(i).trigger("reloadGrid")}else{var c=[];c=o.split(",");if(i.p.treeGrid===true){try{e(i).jqGrid("delTreeNode",c[0])}catch(v){}}else{for(var m=0;m<c.length;m++){e(i).jqGrid("delRowData",c[m])}}i.p.selrow=null;i.p.selarrrow=[]}if(e.isFunction(t.afterComplete)){setTimeout(function(){t.afterComplete(n,o)},500)}}r.processing=false;e("#dData","#"+l+"_2").removeClass("ui-state-active");if(s[0]){hideModal("#"+h.themodal,{gb:"#gbox_"+u,jqm:r.jqModal,onClose:t.onClose})}},error:function(t,n,i){e("#DelError>td","#"+l).html(n+" : "+i);e("#DelError","#"+l).show();r.processing=false;e("#dData","#"+l+"_2").removeClass("ui-state-active")}},e.jgrid.ajaxOptions,r.ajaxDelOptions))}}return false});e("#eData","#"+l+"_2").click(function(e){hideModal("#"+h.themodal,{gb:"#gbox_"+u,jqm:r.jqModal,onClose:t.onClose});return false});if(s){r.beforeShowForm(e("#"+l))}viewModal("#"+h.themodal,{gbox:"#gbox_"+u,jqm:r.jqModal,modal:r.modal});if(o){r.afterShowForm(e("#"+l))}}if(r.closeOnEscape===true){setTimeout(function(){e(".ui-jqdialog-titlebar-close","#"+h.modalhead).focus()},0)}})},navGrid:function(t,n,r,i,s,o,u){n=e.extend({edit:true,editicon:"ui-icon-pencil",add:true,addicon:"ui-icon-plus",del:true,delicon:"ui-icon-trash",search:true,searchicon:"ui-icon-search",refresh:true,refreshicon:"ui-icon-refresh",refreshstate:"firstpage",view:false,viewicon:"ui-icon-document",position:"left",closeOnEscape:true,afterRefresh:null},e.jgrid.nav,n||{});return this.each(function(){var t={themodal:"alertmod",modalhead:"alerthd",modalcontent:"alertcnt"},a=this,f,l,p,v;if(!a.grid){return}if(e("#"+t.themodal).html()==null){if(typeof window.innerWidth!="undefined"){f=window.innerWidth,l=window.innerHeight}else{if(typeof document.documentElement!="undefined"&&typeof document.documentElement.clientWidth!="undefined"&&document.documentElement.clientWidth!=0){f=document.documentElement.clientWidth,l=document.documentElement.clientHeight}else{f=1024;l=768}}createModal(t,"<div>"+n.alerttext+"</div><span tabindex='0'><span tabindex='-1' id='jqg_alrt'></span></span>",{gbox:"#gbox_"+a.p.id,jqModal:true,drag:true,resize:true,caption:n.alertcap,top:l/2-25,left:f/2-100,width:200,height:"auto",closeOnEscape:n.closeOnEscape},"","",true)}var m,y=e("<table cellspacing='0' cellpadding='0' border='0' class='ui-pg-table navtable' style='float:left;table-layout:auto;'><tbody><tr></tr></tbody></table>"),w="<td class='ui-pg-button ui-state-disabled' style='width:4px;'><span class='ui-separator'></span></td>",E=e(a.p.pager).attr("id")||"pager";if(a.p.direction=="rtl"){e(y).attr("dir","rtl").css("float","right")}if(n.add){i=i||{};m=e("<td class='ui-pg-button ui-corner-all'></td>");e(m).append("<div class='ui-pg-div'><span class='ui-icon "+n.addicon+"'></span>"+n.addtext+"</div>");e("tr",y).append(m);e(m,y).attr({title:n.addtitle||"",id:i.id||"add_"+a.p.id}).click(function(){if(typeof n.addfunc=="function"){n.addfunc()}else{e(a).jqGrid("editGridRow","new",i)}return false}).hover(function(){e(this).addClass("ui-state-hover")},function(){e(this).removeClass("ui-state-hover")});m=null}if(n.edit){m=e("<td class='ui-pg-button ui-corner-all'></td>");r=r||{};e(m).append("<div class='ui-pg-div'><span class='ui-icon "+n.editicon+"'></span>"+n.edittext+"</div>");e("tr",y).append(m);e(m,y).attr({title:n.edittitle||"",id:r.id||"edit_"+a.p.id}).click(function(){var i=a.p.selrow;if(i){if(typeof n.editfunc=="function"){n.editfunc(i)}else{e(a).jqGrid("editGridRow",i,r)}}else{viewModal("#"+t.themodal,{gbox:"#gbox_"+a.p.id,jqm:true});e("#jqg_alrt").focus()}return false}).hover(function(){e(this).addClass("ui-state-hover")},function(){e(this).removeClass("ui-state-hover")});m=null}if(n.view){m=e("<td class='ui-pg-button ui-corner-all'></td>");u=u||{};e(m).append("<div class='ui-pg-div'><span class='ui-icon "+n.viewicon+"'></span>"+n.viewtext+"</div>");e("tr",y).append(m);e(m,y).attr({title:n.viewtitle||"",id:u.id||"view_"+a.p.id}).click(function(){var t=a.p.selrow;if(t){e(a).jqGrid("viewGridRow",t,u)}return false}).hover(function(){e(this).addClass("ui-state-hover")},function(){e(this).removeClass("ui-state-hover")});m=null}if(n.del){m=e("<td class='ui-pg-button ui-corner-all'></td>");s=s||{};e(m).append("<div class='ui-pg-div'><span class='ui-icon "+n.delicon+"'></span>"+n.deltext+"</div>");e("tr",y).append(m);e(m,y).attr({title:n.deltitle||"",id:s.id||"del_"+a.p.id}).click(function(){var n;if(a.p.multiselect){n=a.p.selarrrow;if(n.length==0){n=null}}else{n=a.p.selrow}if(n){e(a).jqGrid("delGridRow",n,s)}else{viewModal("#"+t.themodal,{gbox:"#gbox_"+a.p.id,jqm:true});e("#jqg_alrt").focus()}return false}).hover(function(){e(this).addClass("ui-state-hover")},function(){e(this).removeClass("ui-state-hover")});m=null}if(n.add||n.edit||n.del||n.view){e("tr",y).append(w)}if(n.search){m=e("<td class='ui-pg-button ui-corner-all'></td>");o=o||{};e(m).append("<div class='ui-pg-div'><span class='ui-icon "+n.searchicon+"'></span>"+n.searchtext+"</div>");e("tr",y).append(m);e(m,y).attr({title:n.searchtitle||"",id:o.id||"search_"+a.p.id}).click(function(){e(a).jqGrid("searchGrid",o);return false}).hover(function(){e(this).addClass("ui-state-hover")},function(){e(this).removeClass("ui-state-hover")});m=null}if(n.refresh){m=e("<td class='ui-pg-button ui-corner-all'></td>");e(m).append("<div class='ui-pg-div'><span class='ui-icon "+n.refreshicon+"'></span>"+n.refreshtext+"</div>");e("tr",y).append(m);e(m,y).attr({title:n.refreshtitle||"",id:"refresh_"+a.p.id}).click(function(){a.p.search=false;try{var t=a.p.id;e("#fbox_"+t).searchFilter().reset();a.clearToolbar(false)}catch(r){}switch(n.refreshstate){case"firstpage":e(a).trigger("reloadGrid",[{page:1}]);break;case"current":e(a).trigger("reloadGrid",[{current:true}]);break}if(e.isFunction(n.afterRefresh)){n.afterRefresh()}return false}).hover(function(){e(this).addClass("ui-state-hover")},function(){e(this).removeClass("ui-state-hover")});m=null}v=e(".ui-jqgrid").css("font-size")||"11px";e("body").append("<div id='testpg2' class='ui-jqgrid ui-widget ui-widget-content' style='font-size:"+v+";visibility:hidden;' ></div>");p=e(y).clone().appendTo("#testpg2").width();e("#testpg2").remove();e("#"+E+"_"+n.position,"#"+E).append(y);if(a.p._nvtd){if(p>a.p._nvtd[0]){e("#"+E+"_"+n.position,"#"+E).width(p);a.p._nvtd[0]=p}a.p._nvtd[1]=p}})},navButtonAdd:function(t,n){n=e.extend({caption:"newButton",title:"",buttonicon:"ui-icon-newwin",onClickButton:null,position:"last",cursor:"pointer"},n||{});return this.each(function(){if(!this.grid){return}if(t.indexOf("#")!=0){t="#"+t}var r=e(".navtable",t)[0],i=this;if(r){var s=e("<td></td>");e(s).addClass("ui-pg-button ui-corner-all").append("<div class='ui-pg-div'><span class='ui-icon "+n.buttonicon+"'></span>"+n.caption+"</div>");if(n.id){e(s).attr("id",n.id)}if(n.position=="first"){if(r.rows[0].cells.length===0){e("tr",r).append(s)}else{e("tr td:eq(0)",r).before(s)}}else{e("tr",r).append(s)}e(s,r).attr("title",n.title||"").click(function(t){if(e.isFunction(n.onClickButton)){n.onClickButton.call(i,t)}return false}).hover(function(){e(this).addClass("ui-state-hover")},function(){e(this).removeClass("ui-state-hover")}).css("cursor",n.cursor?n.cursor:"normal")}})},navSeparatorAdd:function(t,n){n=e.extend({sepclass:"ui-separator",sepcontent:""},n||{});return this.each(function(){if(!this.grid){return}if(t.indexOf("#")!=0){t="#"+t}var r=e(".navtable",t)[0];if(r){var i="<td class='ui-pg-button ui-state-disabled' style='width:4px;'><span class='"+n.sepclass+"'></span>"+n.sepcontent+"</td>";e("tr",r).append(i)}})},GridToForm:function(t,n){return this.each(function(){var r=this;if(!r.grid){return}var i=e(r).jqGrid("getRowData",t);if(i){for(var s in i){if(e("[name="+s+"]",n).is("input:radio")||e("[name="+s+"]",n).is("input:checkbox")){e("[name="+s+"]",n).each(function(){if(e(this).val()==i[s]){e(this).attr("checked","checked")}else{e(this).attr("checked","")}})}else{e("[name="+s+"]",n).val(i[s])}}}})},FormToGrid:function(t,n,r,i){return this.each(function(){var s=this;if(!s.grid){return}if(!r){r="set"}if(!i){i="first"}var o=e(n).serializeArray();var u={};e.each(o,function(e,t){u[t.name]=t.value});if(r=="add"){e(s).jqGrid("addRowData",t,u,i)}else{if(r=="set"){e(s).jqGrid("setRowData",t,u)}}})}})})(jQuery);jQuery.fn.searchFilter=function(e,t){function n(e,t,n){this.$=e;this.add=function(t){if(t==null){e.find(".ui-add-last").click()}else{e.find(".sf:eq("+t+") .ui-add").click()}return this};this.del=function(t){if(t==null){e.find(".sf:last .ui-del").click()}else{e.find(".sf:eq("+t+") .ui-del").click()}return this};this.search=function(t){e.find(".ui-search").click();return this};this.reset=function(t){e.find(".ui-reset").click();return this};this.close=function(){e.find(".ui-closer").click();return this};if(t!=null){function r(){jQuery(this).toggleClass("ui-state-hover");return false}function i(e){jQuery(this).toggleClass("ui-state-active",e.type=="mousedown");return false}function s(e,t){return"<option value='"+e+"'>"+t+"</option>"}function o(e,t,n){return"<select class='"+e+"'"+(n?" style='display:none;'":"")+">"+t+"</select>"}function u(t,n){var r=e.find("tr.sf td.data "+t);if(r[0]!=null){n(r)}}function a(t,n){var r=e.find("tr.sf td.data "+t);if(r[0]!=null){jQuery.each(n,function(){if(this.data!=null){r.bind(this.type,this.data,this.fn)}else{r.bind(this.type,this.fn)}})}}var f=jQuery.extend({},jQuery.fn.searchFilter.defaults,n);var l=-1;var c="";jQuery.each(f.groupOps,function(){c+=s(this.op,this.text)});c="<select name='groupOp'>"+c+"</select>";e.html("").addClass("ui-searchFilter").append("<div class='ui-widget-overlay' style='z-index: -1'>&#160;</div><table class='ui-widget-content ui-corner-all'><thead><tr><td colspan='5' class='ui-widget-header ui-corner-all' style='line-height: 18px;'><div class='ui-closer ui-state-default ui-corner-all ui-helper-clearfix' style='float: right;'><span class='ui-icon ui-icon-close'></span></div>"+f.windowTitle+"</td></tr></thead><tbody><tr class='sf'><td class='fields'></td><td class='ops'></td><td class='data'></td><td><div class='ui-del ui-state-default ui-corner-all'><span class='ui-icon ui-icon-minus'></span></div></td><td><div class='ui-add ui-state-default ui-corner-all'><span class='ui-icon ui-icon-plus'></span></div></td></tr><tr><td colspan='5' class='divider'><div>&#160;</div></td></tr></tbody><tfoot><tr><td colspan='3'><span class='ui-reset ui-state-default ui-corner-all' style='display: inline-block; float: left;'><span class='ui-icon ui-icon-arrowreturnthick-1-w' style='float: left;'></span><span style='line-height: 18px; padding: 0 7px 0 3px;'>"+f.resetText+"</span></span><span class='ui-search ui-state-default ui-corner-all' style='display: inline-block; float: right;'><span class='ui-icon ui-icon-search' style='float: left;'></span><span style='line-height: 18px; padding: 0 7px 0 3px;'>"+f.searchText+"</span></span><span class='matchText'>"+f.matchText+"</span> "+c+" <span class='rulesText'>"+f.rulesText+"</span></td><td>&#160;</td><td><div class='ui-add-last ui-state-default ui-corner-all'><span class='ui-icon ui-icon-plusthick'></span></div></td></tr></tfoot></table>");var h=e.find("tr.sf");var p=h.find("td.fields");var d=h.find("td.ops");var v=h.find("td.data");var m="";jQuery.each(f.operators,function(){m+=s(this.op,this.text)});m=o("default",m,true);d.append(m);var g="<input type='text' class='default' style='display:none;' />";v.append(g);var y="";var b=false;var w=false;jQuery.each(t,function(t){var n=t;y+=s(this.itemval,this.text);if(this.ops!=null){b=true;var r="";jQuery.each(this.ops,function(){r+=s(this.op,this.text)});r=o("field"+n,r,true);d.append(r)}if(this.dataUrl!=null){if(t>l){l=t}w=true;var i=this.dataEvents;var c=this.dataInit;var h=this.buildSelect;jQuery.ajax(jQuery.extend({url:this.dataUrl,complete:function(r){var s;if(h!=null){s=jQuery("<div />").append(h(r))}else{s=jQuery("<div />").append(r.responseText)}s.find("select").addClass("field"+n).hide();v.append(s.html());if(c){u(".field"+t,c)}if(i){a(".field"+t,i)}if(t==l){e.find("tr.sf td.fields select[name='field']").change()}}},f.ajaxSelectOptions))}else{if(this.dataValues!=null){w=true;var p="";jQuery.each(this.dataValues,function(){p+=s(this.value,this.text)});p=o("field"+n,p,true);v.append(p)}else{if(this.dataEvents!=null||this.dataInit!=null){w=true;var p="<input type='text' class='field"+n+"' />";v.append(p)}}}if(this.dataInit!=null&&t!=l){u(".field"+t,this.dataInit)}if(this.dataEvents!=null&&t!=l){a(".field"+t,this.dataEvents)}});y="<select name='field'>"+y+"</select>";p.append(y);var E=p.find("select[name='field']");if(b){E.change(function(e){var t=e.target.selectedIndex;var n=jQuery(e.target).parents("tr.sf").find("td.ops");n.find("select").removeAttr("name").hide();var r=n.find(".field"+t);if(r[0]==null){r=n.find(".default")}r.attr("name","op").show()})}else{d.find(".default").attr("name","op").show()}if(w){E.change(function(e){var t=e.target.selectedIndex;var n=jQuery(e.target).parents("tr.sf").find("td.data");n.find("select,input").removeClass("vdata").hide();var r=n.find(".field"+t);if(r[0]==null){r=n.find(".default")}r.show().addClass("vdata")})}else{v.find(".default").show().addClass("vdata")}if(b||w){E.change()}e.find(".ui-state-default").hover(r,r).mousedown(i).mouseup(i);e.find(".ui-closer").click(function(t){f.onClose(jQuery(e.selector));return false});e.find(".ui-del").click(function(e){var t=jQuery(e.target).parents(".sf");if(t.siblings(".sf").length>0){if(f.datepickerFix===true&&jQuery.fn.datepicker!==undefined){t.find(".hasDatepicker").datepicker("destroy")}t.remove()}else{t.find("select[name='field']")[0].selectedIndex=0;t.find("select[name='op']")[0].selectedIndex=0;t.find(".data input").val("");t.find(".data select").each(function(){this.selectedIndex=0});t.find("select[name='field']").change()}return false});e.find(".ui-add").click(function(e){var t=jQuery(e.target).parents(".sf");var n=t.clone(true).insertAfter(t);n.find(".ui-state-default").removeClass("ui-state-hover ui-state-active");if(f.clone){n.find("select[name='field']")[0].selectedIndex=t.find("select[name='field']")[0].selectedIndex;var r=n.find("select[name='op']")[0]==null;if(!r){n.find("select[name='op']").focus()[0].selectedIndex=t.find("select[name='op']")[0].selectedIndex}var i=n.find("select.vdata");if(i[0]!=null){i[0].selectedIndex=t.find("select.vdata")[0].selectedIndex}}else{n.find(".data input").val("");n.find("select[name='field']").focus()}if(f.datepickerFix===true&&jQuery.fn.datepicker!==undefined){t.find(".hasDatepicker").each(function(){var e=jQuery.data(this,"datepicker").settings;n.find("#"+this.id).unbind().removeAttr("id").removeClass("hasDatepicker").datepicker(e)})}n.find("select[name='field']").change();return false});e.find(".ui-search").click(function(t){var n=jQuery(e.selector);var r;var i=n.find("select[name='groupOp'] :selected").val();if(!f.stringResult){r={groupOp:i,rules:[]}}else{r='{"groupOp":"'+i+'","rules":['}n.find(".sf").each(function(e){var t=jQuery(this).find("select[name='field'] :selected").val();var n=jQuery(this).find("select[name='op'] :selected").val();var i=jQuery(this).find("input.vdata,select.vdata :selected").val();i+="";i=i.replace(/\\/g,"\\\\").replace(/\"/g,'\\"');if(!f.stringResult){r.rules.push({field:t,op:n,data:i})}else{if(e>0){r+=","}r+='{"field":"'+t+'",';r+='"op":"'+n+'",';r+='"data":"'+i+'"}'}});if(f.stringResult){r+="]}"}f.onSearch(r);return false});e.find(".ui-reset").click(function(t){var n=jQuery(e.selector);n.find(".ui-del").click();n.find("select[name='groupOp']")[0].selectedIndex=0;f.onReset();return false});e.find(".ui-add-last").click(function(){var t=jQuery(e.selector+" .sf:last");var n=t.clone(true).insertAfter(t);n.find(".ui-state-default").removeClass("ui-state-hover ui-state-active");n.find(".data input").val("");n.find("select[name='field']").focus();if(f.datepickerFix===true&&jQuery.fn.datepicker!==undefined){t.find(".hasDatepicker").each(function(){var e=jQuery.data(this,"datepicker").settings;n.find("#"+this.id).unbind().removeAttr("id").removeClass("hasDatepicker").datepicker(e)})}n.find("select[name='field']").change();return false})}}return new n(this,e,t)};jQuery.fn.searchFilter.version="1.2.9";jQuery.fn.searchFilter.defaults={clone:true,datepickerFix:true,onReset:function(e){alert("Reset Clicked. Data Returned: "+e)},onSearch:function(e){alert("Search Clicked. Data Returned: "+e)},onClose:function(e){e.hide()},groupOps:[{op:"AND",text:"all"},{op:"OR",text:"any"}],operators:[{op:"eq",text:"is equal to"},{op:"ne",text:"is not equal to"},{op:"lt",text:"is less than"},{op:"le",text:"is less or equal to"},{op:"gt",text:"is greater than"},{op:"ge",text:"is greater or equal to"},{op:"in",text:"is in"},{op:"ni",text:"is not in"},{op:"bw",text:"begins with"},{op:"bn",text:"does not begin with"},{op:"ew",text:"ends with"},{op:"en",text:"does not end with"},{op:"cn",text:"contains"},{op:"nc",text:"does not contain"}],matchText:"match",rulesText:"rules",resetText:"Reset",searchText:"Search",stringResult:true,windowTitle:"Search Rules",ajaxSelectOptions:{}};(function(e){e.jgrid.extend({editRow:function(t,n,r,i,s,o,u,f,l){return this.each(function(){var p=this,v,m,y,w=0,E=null,S={},x,T;if(!p.grid){return}x=e(p).jqGrid("getInd",t,true);if(x==false){return}y=e(x).attr("editable")||"0";if(y=="0"&&!e(x).hasClass("not-editable-row")){T=p.p.colModel;e("td",x).each(function(n){v=T[n].name;var r=p.p.treeGrid===true&&v==p.p.ExpandColumn;if(r){m=e("span:first",this).html()}else{try{m=e.unformat(this,{colModel:T[n]},n)}catch(i){m=e(this).html()}}if(v!="cb"&&v!="subgrid"&&v!="rn"){S[v]=m;if(T[n].editable===true){if(E===null){E=n}if(r){e("span:first",this).html("")}else{e(this).html("")}var s=e.extend({},T[n].editoptions||{},{id:t+"_"+v,name:v});if(!T[n].edittype){T[n].edittype="text"}var o=createEl(T[n].edittype,s,m,true,e.extend({},e.jgrid.ajaxOptions,p.p.ajaxSelectOptions||{}));e(o).addClass("editable");if(r){e("span:first",this).append(o)}else{e(this).append(o)}if(T[n].edittype=="select"&&T[n].editoptions.multiple===true&&e.browser.msie){e(o).width(e(o).width())}w++}}});if(w>0){S.id=t;p.p.savedRow.push(S);e(x).attr("editable","1");e("td:eq("+E+") input",x).focus();if(n===true){e(x).bind("keydown",function(n){if(n.keyCode===27){e(p).jqGrid("restoreRow",t,l)}if(n.keyCode===13){e(p).jqGrid("saveRow",t,i,s,o,u,f,l);return false}n.stopPropagation()})}if(e.isFunction(r)){r(t)}}}})},saveRow:function(t,n,r,i,s,o,u){return this.each(function(){var l=this,p,v={},m={},y,w,E,S;if(!l.grid){return}S=e(l).jqGrid("getInd",t,true);if(S==false){return}y=e(S).attr("editable");r=r?r:l.p.editurl;if(y==="1"&&r){var x;e("td",S).each(function(t){x=l.p.colModel[t];p=x.name;if(p!="cb"&&p!="subgrid"&&x.editable===true&&p!="rn"){switch(x.edittype){case"checkbox":var n=["Yes","No"];if(x.editoptions){n=x.editoptions.value.split(":")}v[p]=e("input",this).attr("checked")?n[0]:n[1];break;case"text":case"password":case"textarea":case"button":v[p]=!l.p.autoencode?e("input, textarea",this).val():e.jgrid.htmlEncode(e("input, textarea",this).val());break;case"select":if(!x.editoptions.multiple){v[p]=e("select>option:selected",this).val();m[p]=e("select>option:selected",this).text()}else{var r=e("select",this),i=[];v[p]=e(r).val();if(v[p]){v[p]=v[p].join(",")}else{v[p]=""}e("select > option:selected",this).each(function(t,n){i[t]=e(n).text()});m[p]=i.join(",")}if(x.formatter&&x.formatter=="select"){m={}}break;case"custom":try{if(x.editoptions&&e.isFunction(x.editoptions.custom_value)){v[p]=x.editoptions.custom_value(e(".customelement",this),"get");if(v[p]===undefined){throw"e2"}}else{throw"e1"}}catch(s){if(s=="e1"){info_dialog(jQuery.jgrid.errors.errcap,"function 'custom_value' "+e.jgrid.edit.msg.nodefined,jQuery.jgrid.edit.bClose)}if(s=="e2"){info_dialog(jQuery.jgrid.errors.errcap,"function 'custom_value' "+e.jgrid.edit.msg.novalue,jQuery.jgrid.edit.bClose)}else{info_dialog(jQuery.jgrid.errors.errcap,s.message,jQuery.jgrid.edit.bClose)}}break}E=checkValues(v[p],t,l);if(E[0]===false){E[1]=v[p]+" "+E[1];return false}}});if(E[0]===false){try{info_dialog(e.jgrid.errors.errcap,E[1],e.jgrid.edit.bClose)}catch(T){alert(E[1])}return}if(v){v.id=t;if(i){v=e.extend({},v,i)}}if(!l.grid.hDiv.loading){l.grid.hDiv.loading=true;e("div.loading",l.grid.hDiv).fadeIn("fast");if(r=="clientArray"){v=e.extend({},v,m);var N=e(l).jqGrid("setRowData",t,v);e(S).attr("editable","0");for(var C=0;C<l.p.savedRow.length;C++){if(l.p.savedRow[C].id==t){w=C;break}}if(w>=0){l.p.savedRow.splice(w,1)}if(e.isFunction(s)){s(t,N)}}else{e.ajax(e.extend({url:r,data:e.isFunction(l.p.serializeRowData)?l.p.serializeRowData(v):v,type:"POST",complete:function(r,i){if(i==="success"){var o;if(e.isFunction(n)){o=n(r)}else{o=true}if(o===true){v=e.extend({},v,m);e(l).jqGrid("setRowData",t,v);e(S).attr("editable","0");for(var f=0;f<l.p.savedRow.length;f++){if(l.p.savedRow[f].id==t){w=f;break}}if(w>=0){l.p.savedRow.splice(w,1)}if(e.isFunction(s)){s(t,r)}}else{e(l).jqGrid("restoreRow",t,u)}}},error:function(n,r){if(e.isFunction(o)){o(t,n,r)}else{alert("Error Row: "+t+" Result: "+n.status+":"+n.statusText+" Status: "+r)}}},e.jgrid.ajaxOptions,l.p.ajaxRowOptions||{}))}l.grid.hDiv.loading=false;e("div.loading",l.grid.hDiv).fadeOut("fast");e(S).unbind("keydown")}}})},restoreRow:function(t,n){return this.each(function(){var r=this,i,s,o={};if(!r.grid){return}s=e(r).jqGrid("getInd",t,true);if(s==false){return}for(var u=0;u<r.p.savedRow.length;u++){if(r.p.savedRow[u].id==t){i=u;break}}if(i>=0){if(e.isFunction(e.fn.datepicker)){try{e("input.hasDatepicker","#"+s.id).datepicker("hide")}catch(f){}}e.each(r.p.colModel,function(e,t){if(this.editable==true&&this.name in r.p.savedRow[i]){o[this.name]=r.p.savedRow[i][this.name]}});e(r).jqGrid("setRowData",t,o);e(s).attr("editable","0").unbind("keydown");r.p.savedRow.splice(i,1)}if(e.isFunction(n)){n(t)}})}})})(jQuery);(function(e){e.jgrid.extend({editCell:function(t,n,r){return this.each(function(){var i=this,s,o,u;if(!i.grid||i.p.cellEdit!==true){return}n=parseInt(n,10);i.p.selrow=i.rows[t].id;if(!i.p.knv){e(i).jqGrid("GridNav")}if(i.p.savedRow.length>0){if(r===true){if(t==i.p.iRow&&n==i.p.iCol){return}}e(i).jqGrid("saveCell",i.p.savedRow[0].id,i.p.savedRow[0].ic)}else{window.setTimeout(function(){e("#"+i.p.knv).attr("tabindex","-1").focus()},0)}s=i.p.colModel[n].name;if(s=="subgrid"||s=="cb"||s=="rn"){return}u=e("td:eq("+n+")",i.rows[t]);if(i.p.colModel[n].editable===true&&r===true&&!u.hasClass("not-editable-cell")){if(parseInt(i.p.iCol)>=0&&parseInt(i.p.iRow)>=0){e("td:eq("+i.p.iCol+")",i.rows[i.p.iRow]).removeClass("edit-cell ui-state-highlight");e(i.rows[i.p.iRow]).removeClass("selected-row ui-state-hover")}e(u).addClass("edit-cell ui-state-highlight");e(i.rows[t]).addClass("selected-row ui-state-hover");try{o=e.unformat(u,{colModel:i.p.colModel[n]},n)}catch(f){o=e(u).html()}if(!i.p.colModel[n].edittype){i.p.colModel[n].edittype="text"}i.p.savedRow.push({id:t,ic:n,name:s,v:o});if(e.isFunction(i.p.formatCell)){var l=i.p.formatCell(i.rows[t].id,s,o,t,n);if(l!=undefined){o=l}}var h=e.extend({},i.p.colModel[n].editoptions||{},{id:t+"_"+s,name:s});var p=createEl(i.p.colModel[n].edittype,h,o,true,e.extend({},e.jgrid.ajaxOptions,i.p.ajaxSelectOptions||{}));if(e.isFunction(i.p.beforeEditCell)){i.p.beforeEditCell(i.rows[t].id,s,o,t,n)}e(u).html("").append(p).attr("tabindex","0");window.setTimeout(function(){e(p).focus()},0);e("input, select, textarea",u).bind("keydown",function(r){if(r.keyCode===27){if(e("input.hasDatepicker",u).length>0){if(e(".ui-datepicker").is(":hidden")){e(i).jqGrid("restoreCell",t,n)}else{e("input.hasDatepicker",u).datepicker("hide")}}else{e(i).jqGrid("restoreCell",t,n)}}if(r.keyCode===13){e(i).jqGrid("saveCell",t,n)}if(r.keyCode==9){if(r.shiftKey){e(i).jqGrid("prevCell",t,n)}else{e(i).jqGrid("nextCell",t,n)}}r.stopPropagation()});if(e.isFunction(i.p.afterEditCell)){i.p.afterEditCell(i.rows[t].id,s,o,t,n)}}else{if(parseInt(i.p.iCol)>=0&&parseInt(i.p.iRow)>=0){e("td:eq("+i.p.iCol+")",i.rows[i.p.iRow]).removeClass("edit-cell ui-state-highlight");e(i.rows[i.p.iRow]).removeClass("selected-row ui-state-hover")}u.addClass("edit-cell ui-state-highlight");e(i.rows[t]).addClass("selected-row ui-state-hover");if(e.isFunction(i.p.onSelectCell)){o=u.html().replace(/\&#160\;/ig,"");i.p.onSelectCell(i.rows[t].id,s,o,t,n)}}i.p.iCol=n;i.p.iRow=t})},saveCell:function(t,n){return this.each(function(){var r=this,i;if(!r.grid||r.p.cellEdit!==true){return}if(r.p.savedRow.length>=1){i=0}else{i=null}if(i!=null){var s=e("td:eq("+n+")",r.rows[t]),o,u,f=r.p.colModel[n],l=f.name,h=e.jgrid.jqID(l);switch(f.edittype){case"select":if(!f.editoptions.multiple){o=e("#"+t+"_"+h+">option:selected",r.rows[t]).val();u=e("#"+t+"_"+h+">option:selected",r.rows[t]).text()}else{var p=e("#"+t+"_"+h,r.rows[t]),d=[];o=e(p).val();if(o){o.join(",")}else{o=""}e("option:selected",p).each(function(t,n){d[t]=e(n).text()});u=d.join(",")}if(f.formatter){u=o}break;case"checkbox":var v=["Yes","No"];if(f.editoptions){v=f.editoptions.value.split(":")}o=e("#"+t+"_"+h,r.rows[t]).attr("checked")?v[0]:v[1];u=o;break;case"password":case"text":case"textarea":case"button":o=!r.p.autoencode?e("#"+t+"_"+h,r.rows[t]).val():e.jgrid.htmlEncode(e("#"+t+"_"+h,r.rows[t]).val());u=o;break;case"custom":try{if(f.editoptions&&e.isFunction(f.editoptions.custom_value)){o=f.editoptions.custom_value(e(".customelement",s),"get");if(o===undefined){throw"e2"}else{u=o}}else{throw"e1"}}catch(m){if(m=="e1"){info_dialog(jQuery.jgrid.errors.errcap,"function 'custom_value' "+e.jgrid.edit.msg.nodefined,jQuery.jgrid.edit.bClose)}if(m=="e2"){info_dialog(jQuery.jgrid.errors.errcap,"function 'custom_value' "+e.jgrid.edit.msg.novalue,jQuery.jgrid.edit.bClose)}else{info_dialog(jQuery.jgrid.errors.errcap,m.message,jQuery.jgrid.edit.bClose)}}break}if(u!=r.p.savedRow[i].v){if(e.isFunction(r.p.beforeSaveCell)){var g=r.p.beforeSaveCell(r.rows[t].id,l,o,t,n);if(g){o=g}}var y=checkValues(o,n,r);if(y[0]===true){var w={};if(e.isFunction(r.p.beforeSubmitCell)){w=r.p.beforeSubmitCell(r.rows[t].id,l,o,t,n);if(!w){w={}}}if(u==""){u=" "}if(e("input.hasDatepicker",s).length>0){e("input.hasDatepicker",s).datepicker("hide")}if(r.p.cellsubmit=="remote"){if(r.p.cellurl){var E={};E[l]=o;E.id=r.rows[t].id;E=e.extend(w,E);e.ajax(e.extend({url:r.p.cellurl,data:e.isFunction(r.p.serializeCellData)?r.p.serializeCellData(E):E,type:"POST",complete:function(i,f){if(f=="success"){if(e.isFunction(r.p.afterSubmitCell)){var h=r.p.afterSubmitCell(i,E.id,l,o,t,n);if(h[0]===true){e(s).empty();e(r).jqGrid("setCell",r.rows[t].id,n,u);e(s).addClass("dirty-cell");e(r.rows[t]).addClass("edited");if(e.isFunction(r.p.afterSaveCell)){r.p.afterSaveCell(r.rows[t].id,l,o,t,n)}r.p.savedRow.splice(0,1)}else{info_dialog(e.jgrid.errors.errcap,h[1],e.jgrid.edit.bClose);e(r).jqGrid("restoreCell",t,n)}}else{e(s).empty();e(r).jqGrid("setCell",r.rows[t].id,n,u);e(s).addClass("dirty-cell");e(r.rows[t]).addClass("edited");if(e.isFunction(r.p.afterSaveCell)){r.p.afterSaveCell(r.rows[t].id,l,o,t,n)}r.p.savedRow.splice(0,1)}}},error:function(i,s){if(e.isFunction(r.p.errorCell)){r.p.errorCell(i,s);e(r).jqGrid("restoreCell",t,n)}else{info_dialog(e.jgrid.errors.errcap,i.status+" : "+i.statusText+"<br/>"+s,e.jgrid.edit.bClose);e(r).jqGrid("restoreCell",t,n)}}},e.jgrid.ajaxOptions,r.p.ajaxCellOptions||{}))}else{try{info_dialog(e.jgrid.errors.errcap,e.jgrid.errors.nourl,e.jgrid.edit.bClose);e(r).jqGrid("restoreCell",t,n)}catch(m){}}}if(r.p.cellsubmit=="clientArray"){e(s).empty();e(r).jqGrid("setCell",r.rows[t].id,n,u);e(s).addClass("dirty-cell");e(r.rows[t]).addClass("edited");if(e.isFunction(r.p.afterSaveCell)){r.p.afterSaveCell(r.rows[t].id,l,o,t,n)}r.p.savedRow.splice(0,1)}}else{try{window.setTimeout(function(){info_dialog(e.jgrid.errors.errcap,o+" "+y[1],e.jgrid.edit.bClose)},100);e(r).jqGrid("restoreCell",t,n)}catch(m){}}}else{e(r).jqGrid("restoreCell",t,n)}}if(e.browser.opera){e("#"+r.p.knv).attr("tabindex","-1").focus()}else{window.setTimeout(function(){e("#"+r.p.knv).attr("tabindex","-1").focus()},0)}})},restoreCell:function(t,n){return this.each(function(){var r=this,i;if(!r.grid||r.p.cellEdit!==true){return}if(r.p.savedRow.length>=1){i=0}else{i=null}if(i!=null){var s=e("td:eq("+n+")",r.rows[t]);if(e.isFunction(e.fn.datepicker)){try{e("input.hasDatepicker",s).datepicker("hide")}catch(o){}}e(s).empty().attr("tabindex","-1");e(r).jqGrid("setCell",r.rows[t].id,n,r.p.savedRow[i].v);r.p.savedRow.splice(0,1)}window.setTimeout(function(){e("#"+r.p.knv).attr("tabindex","-1").focus()},0)})},nextCell:function(t,n){return this.each(function(){var r=this,i=false;if(!r.grid||r.p.cellEdit!==true){return}for(var s=n+1;s<r.p.colModel.length;s++){if(r.p.colModel[s].editable===true){i=s;break}}if(i!==false){e(r).jqGrid("editCell",t,i,true)}else{if(r.p.savedRow.length>0){e(r).jqGrid("saveCell",t,n)}}})},prevCell:function(t,n){return this.each(function(){var r=this,i=false;if(!r.grid||r.p.cellEdit!==true){return}for(var s=n-1;s>=0;s--){if(r.p.colModel[s].editable===true){i=s;break}}if(i!==false){e(r).jqGrid("editCell",t,i,true)}else{if(r.p.savedRow.length>0){e(r).jqGrid("saveCell",t,n)}}})},GridNav:function(){return this.each(function(){function s(n,r,i){if(i.substr(0,1)=="v"){var s=e(t.grid.bDiv)[0].clientHeight,o=e(t.grid.bDiv)[0].scrollTop,u=t.rows[n].offsetTop+t.rows[n].clientHeight,f=t.rows[n].offsetTop;if(i=="vd"){if(u>=s){e(t.grid.bDiv)[0].scrollTop=e(t.grid.bDiv)[0].scrollTop+t.rows[n].clientHeight}}if(i=="vu"){if(f<o){e(t.grid.bDiv)[0].scrollTop=e(t.grid.bDiv)[0].scrollTop-t.rows[n].clientHeight}}}if(i=="h"){var l=e(t.grid.bDiv)[0].clientWidth,c=e(t.grid.bDiv)[0].scrollLeft,h=t.rows[n].cells[r].offsetLeft+t.rows[n].cells[r].clientWidth,p=t.rows[n].cells[r].offsetLeft;if(h>=l+parseInt(c)){e(t.grid.bDiv)[0].scrollLeft=e(t.grid.bDiv)[0].scrollLeft+t.rows[n].cells[r].clientWidth}else{if(p<c){e(t.grid.bDiv)[0].scrollLeft=e(t.grid.bDiv)[0].scrollLeft-t.rows[n].cells[r].clientWidth}}}}function o(e,n){var r,i;if(n=="lft"){r=e+1;for(i=e;i>=0;i--){if(t.p.colModel[i].hidden!==true){r=i;break}}}if(n=="rgt"){r=e-1;for(i=e;i<t.p.colModel.length;i++){if(t.p.colModel[i].hidden!==true){r=i;break}}}return r}var t=this;if(!t.grid||t.p.cellEdit!==true){return}t.p.knv=t.p.id+"_kn";var n=e("<span style='width:0px;height:0px;background-color:black;' tabindex='0'><span tabindex='-1' style='width:0px;height:0px;background-color:grey' id='"+t.p.knv+"'></span></span>"),r,i;e(n).insertBefore(t.grid.cDiv);e("#"+t.p.knv).focus().keydown(function(n){i=n.keyCode;if(t.p.direction=="rtl"){if(i==37){i=39}else{if(i==39){i=37}}}switch(i){case 38:if(t.p.iRow-1>=0){s(t.p.iRow-1,t.p.iCol,"vu");e(t).jqGrid("editCell",t.p.iRow-1,t.p.iCol,false)}break;case 40:if(t.p.iRow+1<=t.rows.length-1){s(t.p.iRow+1,t.p.iCol,"vd");e(t).jqGrid("editCell",t.p.iRow+1,t.p.iCol,false)}break;case 37:if(t.p.iCol-1>=0){r=o(t.p.iCol-1,"lft");s(t.p.iRow,r,"h");e(t).jqGrid("editCell",t.p.iRow,r,false)}break;case 39:if(t.p.iCol+1<=t.p.colModel.length-1){r=o(t.p.iCol+1,"rgt");s(t.p.iRow,r,"h");e(t).jqGrid("editCell",t.p.iRow,r,false)}break;case 13:if(parseInt(t.p.iCol,10)>=0&&parseInt(t.p.iRow,10)>=0){e(t).jqGrid("editCell",t.p.iRow,t.p.iCol,true)}break}return false})})},getChangedCells:function(t){var n=[];if(!t){t="all"}this.each(function(){var r=this,i;if(!r.grid||r.p.cellEdit!==true){return}e(r.rows).each(function(s){var o={};if(e(this).hasClass("edited")){e("td",this).each(function(n){i=r.p.colModel[n].name;if(i!=="cb"&&i!=="subgrid"){if(t=="dirty"){if(e(this).hasClass("dirty-cell")){try{o[i]=e.unformat(this,{colModel:r.p.colModel[n]},n)}catch(s){o[i]=e.jgrid.htmlDecode(e(this).html())}}}else{try{o[i]=e.unformat(this,{colModel:r.p.colModel[n]},n)}catch(s){o[i]=e.jgrid.htmlDecode(e(this).html())}}}});o.id=this.id;n.push(o)}})});return n}})})(jQuery);(function(e){e.fn.jqm=function(r){var i={overlay:50,closeoverlay:true,overlayClass:"jqmOverlay",closeClass:"jqmClose",trigger:".jqModal",ajax:s,ajaxText:"",target:s,modal:s,toTop:s,onShow:s,onHide:s,onLoad:s};return this.each(function(){if(this._jqm){return n[this._jqm].c=e.extend({},n[this._jqm].c,r)}t++;this._jqm=t;n[t]={c:e.extend(i,e.jqm.params,r),a:s,w:e(this).addClass("jqmID"+t),s:t};if(i.trigger){e(this).jqmAddTrigger(i.trigger)}})};e.fn.jqmAddClose=function(e){return l(this,e,"jqmHide")};e.fn.jqmAddTrigger=function(e){return l(this,e,"jqmShow")};e.fn.jqmShow=function(t){return this.each(function(){e.jqm.open(this._jqm,t)})};e.fn.jqmHide=function(t){return this.each(function(){e.jqm.close(this._jqm,t)})};e.jqm={hash:{},open:function(t,u){var f=n[t],l=f.c,p="."+l.closeClass,v=parseInt(f.w.css("z-index"));v=v>0?v:3e3;var m=e("<div></div>").css({height:"100%",width:"100%",position:"fixed",left:0,top:0,"z-index":v-1,opacity:l.overlay/100});if(f.a){return s}f.t=u;f.a=true;f.w.css("z-index",v);if(l.modal){if(!r[0]){setTimeout(function(){a("bind")},1)}r.push(t)}else{if(l.overlay>0){if(l.closeoverlay){f.w.jqmAddClose(m)}}else{m=s}}f.o=m?m.addClass(l.overlayClass).prependTo("body"):s;if(i){e("html,body").css({height:"100%",width:"100%"});if(m){m=m.css({position:"absolute"})[0];for(var g in{Top:1,Left:1}){m.style.setExpression(g.toLowerCase(),"(_=(document.documentElement.scroll"+g+" || document.body.scroll"+g+"))+'px'")}}}if(l.ajax){var y=l.target||f.w,b=l.ajax;y=typeof y=="string"?e(y,f.w):e(y);b=b.substr(0,1)=="@"?e(u).attr(b.substring(1)):b;y.html(l.ajaxText).load(b,function(){if(l.onLoad){l.onLoad.call(this,f)}if(p){f.w.jqmAddClose(e(p,f.w))}o(f)})}else{if(p){f.w.jqmAddClose(e(p,f.w))}}if(l.toTop&&f.o){f.w.before('<span id="jqmP'+f.w[0]._jqm+'"></span>').insertAfter(f.o)}l.onShow?l.onShow(f):f.w.show();o(f);return s},close:function(t){var i=n[t];if(!i.a){return s}i.a=s;if(r[0]){r.pop();if(!r[0]){a("unbind")}}if(i.c.toTop&&i.o){e("#jqmP"+i.w[0]._jqm).after(i.w).remove()}if(i.c.onHide){i.c.onHide(i)}else{i.w.hide();if(i.o){i.o.remove()}}return s},params:{}};var t=0,n=e.jqm.hash,r=[],i=e.browser.msie&&e.browser.version=="6.0",s=false,o=function(t){var n=e('<iframe src="javascript:false;document.write(\'\');" class="jqm"></iframe>').css({opacity:0});if(i){if(t.o){t.o.html('<p style="width:100%;height:100%"/>').prepend(n)}else{if(!e("iframe.jqm",t.w)[0]){t.w.prepend(n)}}}u(t)},u=function(t){try{e(":input:visible",t.w)[0].focus()}catch(n){}},a=function(t){e()[t]("keypress",f)[t]("keydown",f)[t]("mousedown",f)},f=function(t){var i=n[r[r.length-1]],s=!e(t.target).parents(".jqmID"+i.s)[0];if(s){u(i)}return!s},l=function(t,r,i){return t.each(function(){var t=this._jqm;e(r).each(function(){if(!this[i]){this[i]=[];e(this).click(function(){for(var e in{jqmShow:1,jqmHide:1}){for(var t in this[e]){if(n[this[e][t]]){n[this[e][t]].w[e](this)}}}return s})}this[i].push(t)})})}})(jQuery);(function(e){e.fn.jqDrag=function(e){return s(this,e,"d")};e.fn.jqResize=function(e,t){return s(this,e,"r",t)};e.jqDnR={dnr:{},e:0,drag:function(e){if(n.k=="d"){r.css({left:n.X+e.pageX-n.pX,top:n.Y+e.pageY-n.pY})}else{r.css({width:Math.max(e.pageX-n.pX+n.W,0),height:Math.max(e.pageY-n.pY+n.H,0)});if(M1){i.css({width:Math.max(e.pageX-M1.pX+M1.W,0),height:Math.max(e.pageY-M1.pY+M1.H,0)})}}return false},stop:function(){e().unbind("mousemove",t.drag).unbind("mouseup",t.stop)}};var t=e.jqDnR,n=t.dnr,r=t.e,i,s=function(t,s,u,f){return t.each(function(){s=s?e(s,t):t;s.bind("mousedown",{e:t,k:u},function(t){var s=t.data,u={};r=s.e;i=f?e(f):false;if(r.css("position")!="relative"){try{r.position(u)}catch(l){}}n={X:u.left||o("left")||0,Y:u.top||o("top")||0,W:o("width")||r[0].scrollWidth||0,H:o("height")||r[0].scrollHeight||0,pX:t.pageX,pY:t.pageY,k:s.k};if(i&&s.k!="d"){M1={X:u.left||f1("left")||0,Y:u.top||f1("top")||0,W:i[0].offsetWidth||f1("width")||0,H:i[0].offsetHeight||f1("height")||0,pX:t.pageX,pY:t.pageY,k:s.k}}else{M1=false}e().mousemove(e.jqDnR.drag).mouseup(e.jqDnR.stop);return false})})},o=function(e){return parseInt(r.css(e))||false};f1=function(e){return parseInt(i.css(e))||false}})(jQuery);(function(e){e.jgrid.extend({setSubGrid:function(){return this.each(function(){var t=this,n;t.p.colNames.unshift("");t.p.colModel.unshift({name:"subgrid",width:e.browser.safari?t.p.subGridWidth+t.p.cellLayout:t.p.subGridWidth,sortable:false,resizable:false,hidedlg:true,search:false,fixed:true});n=t.p.subGridModel;if(n[0]){n[0].align=e.extend([],n[0].align||[]);for(i=0;i<n[0].name.length;i++){n[0].align[i]=n[0].align[i]||"left"}}})},addSubGridCell:function(e,t){var n="",r;this.each(function(){n=this.formatCol(e,t);r=this.p.gridview});if(r===false){return"<td role='grid' class='ui-sgcollapsed sgcollapsed' "+n+"><a href='javascript:void(0);'><span class='ui-icon ui-icon-plus'></span></a></td>"}else{return"<td role='grid' "+n+"></td>"}},addSubGrid:function(t,n){return this.each(function(){var r=this;if(!r.grid){return}var i,s,o,u,f,l,h;e("td:eq("+n+")",t).click(function(t){if(e(this).hasClass("sgcollapsed")){o=r.p.id;i=e(this).parent();u=n>=1?"<td colspan='"+n+"'>&#160;</td>":"";s=e(i).attr("id");h=true;if(e.isFunction(r.p.subGridBeforeExpand)){h=r.p.subGridBeforeExpand(o+"_"+s,s)}if(h===false){return false}f=0;e.each(r.p.colModel,function(e,t){if(this.hidden===true||this.name=="rn"||this.name=="cb"){f++}});l="<tr role='row' class='ui-subgrid'>"+u+"<td class='ui-widget-content subgrid-cell'><span class='ui-icon ui-icon-carat-1-sw'/></td><td colspan='"+parseInt(r.p.colNames.length-1-f)+"' class='ui-widget-content subgrid-data'><div id="+o+"_"+s+" class='tablediv'>";e(this).parent().after(l+"</div></td></tr>");if(e.isFunction(r.p.subGridRowExpanded)){r.p.subGridRowExpanded(o+"_"+s,s)}else{p(i)}e(this).html("<a href='javascript:void(0);'><span class='ui-icon ui-icon-minus'></span></a>").removeClass("sgcollapsed").addClass("sgexpanded")}else{if(e(this).hasClass("sgexpanded")){h=true;if(e.isFunction(r.p.subGridRowColapsed)){i=e(this).parent();s=e(i).attr("id");h=r.p.subGridRowColapsed(o+"_"+s,s)}if(h===false){return false}e(this).parent().next().remove(".ui-subgrid");e(this).html("<a href='javascript:void(0);'><span class='ui-icon ui-icon-plus'></span></a>").removeClass("sgexpanded").addClass("sgcollapsed")}}return false});var p=function(t){var n,i,s,o,u;i=e(t).attr("id");s={id:i,nd_:(new Date).getTime()};if(!r.p.subGridModel[0]){return false}if(r.p.subGridModel[0].params){for(u=0;u<r.p.subGridModel[0].params.length;u++){for(o=0;o<r.p.colModel.length;o++){if(r.p.colModel[o].name==r.p.subGridModel[0].params[u]){s[r.p.colModel[o].name]=e("td:eq("+o+")",t).text().replace(/\&#160\;/ig,"")}}}}if(!r.grid.hDiv.loading){r.grid.hDiv.loading=true;e("#load_"+r.p.id).show();if(!r.p.subgridtype){r.p.subgridtype=r.p.datatype}r.p.subgridtype=r.p.subgridtype.toLowerCase();if(e.isFunction(r.p.subgridtype)){r.p.subgridtype(s)}switch(r.p.subgridtype){case"xml":case"json":e.ajax(e.extend({type:r.p.mtype,url:r.p.subGridUrl,dataType:r.p.subgridtype,data:e.isFunction(r.p.serializeSubGridData)?r.p.serializeSubGridData(s):s,complete:function(t){if(r.p.subgridtype=="xml"){v(t.responseXML,i)}else{m(e.jgrid.parse(t.responseText),i)}t=null}},e.jgrid.ajaxOptions,r.p.ajaxSubgridOptions||{}));break}}return false};var d=function(t,n,i){var s=e("<td align='"+r.p.subGridModel[0].align[i]+"'></td>").html(n);e(t).append(s)};var v=function(t,n){var i,s,o,u,f=e("<table cellspacing='0' cellpadding='0' border='0'><tbody></tbody></table>"),l=e("<tr></tr>");for(s=0;s<r.p.subGridModel[0].name.length;s++){i=e("<th class='ui-state-default ui-th-column ui-th-"+r.p.direction+"'></th>");e(i).html(r.p.subGridModel[0].name[s]);e(i).width(r.p.subGridModel[0].width[s]);e(l).append(i)}e(f).append(l);if(t){u=r.p.xmlReader.subgrid;e(u.root+" "+u.row,t).each(function(){l=e("<tr class='ui-widget-content ui-subtblcell'></tr>");if(u.repeatitems===true){e(u.cell,this).each(function(t){d(l,e(this).text()||"&#160;",t)})}else{var t=r.p.subGridModel[0].mapping||r.p.subGridModel[0].name;if(t){for(s=0;s<t.length;s++){d(l,e(t[s],this).text()||"&#160;",s)}}}e(f).append(l)})}var c=e("table:first",r.grid.bDiv).attr("id")+"_";e("#"+c+n).append(f);r.grid.hDiv.loading=false;e("#load_"+r.p.id).hide();return false};var m=function(t,n){var i,s,o,u,f,l=e("<table cellspacing='0' cellpadding='0' border='0'><tbody></tbody></table>"),c=e("<tr></tr>");for(o=0;o<r.p.subGridModel[0].name.length;o++){i=e("<th class='ui-state-default ui-th-column ui-th-"+r.p.direction+"'></th>");e(i).html(r.p.subGridModel[0].name[o]);e(i).width(r.p.subGridModel[0].width[o]);e(c).append(i)}e(l).append(c);if(t){f=r.p.jsonReader.subgrid;s=t[f.root];if(typeof s!=="undefined"){for(o=0;o<s.length;o++){u=s[o];c=e("<tr class='ui-widget-content ui-subtblcell'></tr>");if(f.repeatitems===true){if(f.cell){u=u[f.cell]}for(var h=0;h<u.length;h++){d(c,u[h]||"&#160;",h)}}else{var p=r.p.subGridModel[0].mapping||r.p.subGridModel[0].name;if(p.length){for(var h=0;h<p.length;h++){d(c,u[p[h]]||"&#160;",h)}}}e(l).append(c)}}}var v=e("table:first",r.grid.bDiv).attr("id")+"_";e("#"+v+n).append(l);r.grid.hDiv.loading=false;e("#load_"+r.p.id).hide();return false};r.subGridXml=function(e,t){v(e,t)};r.subGridJson=function(e,t){m(e,t)}})},expandSubGridRow:function(t){return this.each(function(){var n=this;if(!n.grid&&!t){return}if(n.p.subGrid===true){var r=e(this).jqGrid("getInd",t,true);if(r){var i=e("td.sgcollapsed",r)[0];if(i){e(i).trigger("click")}}}})},collapseSubGridRow:function(t){return this.each(function(){var n=this;if(!n.grid&&!t){return}if(n.p.subGrid===true){var r=e(this).jqGrid("getInd",t,true);if(r){var i=e("td.sgexpanded",r)[0];if(i){e(i).trigger("click")}}}})},toggleSubGridRow:function(t){return this.each(function(){var n=this;if(!n.grid&&!t){return}if(n.p.subGrid===true){var r=e(this).jqGrid("getInd",t,true);if(r){var i=e("td.sgcollapsed",r)[0];if(i){e(i).trigger("click")}else{i=e("td.sgexpanded",r)[0];if(i){e(i).trigger("click")}}}}})}})})(jQuery);(function(e){e.jgrid.extend({setTreeNode:function(t,n){return this.each(function(){var r=this;if(!r.grid||!r.p.treeGrid){return}var i=r.p.expColInd;var s=r.p.treeReader.expanded_field;var o=r.p.treeReader.leaf_field;var u=r.p.treeReader.level_field;n.level=t[u];if(r.p.treeGridModel=="nested"){n.lft=t[r.p.treeReader.left_field];n.rgt=t[r.p.treeReader.right_field];if(!t[o]){t[o]=parseInt(n.rgt,10)===parseInt(n.lft,10)+1?"true":"false"}}else{n.parent_id=t[r.p.treeReader.parent_id_field]}var f=parseInt(n.level,10),l,h;if(r.p.tree_root_level===0){l=f+1;h=f}else{l=f;h=f-1}var p="<div class='tree-wrap tree-wrap-"+r.p.direction+"' style='width:"+l*18+"px;'>";p+="<div style='"+(r.p.direction=="rtl"?"right:":"left:")+h*18+"px;' class='ui-icon ";if(t[o]=="true"||t[o]==true){p+=r.p.treeIcons.leaf+" tree-leaf'";n.isLeaf=true}else{if(t[s]=="true"||t[s]==true){p+=r.p.treeIcons.minus+" tree-minus treeclick'";n.expanded=true}else{p+=r.p.treeIcons.plus+" tree-plus treeclick'";n.expanded=false}n.isLeaf=false}p+="</div></div>";if(parseInt(t[u],10)!==parseInt(r.p.tree_root_level,10)){if(!e(r).jqGrid("isVisibleNode",n)){e(n).css("display","none")}}e("td:eq("+i+")",n).wrapInner("<span></span>").prepend(p);e(".treeclick",n).bind("click",function(t){var n=t.target||t.srcElement;var i=e(n,r.rows).parents("tr.jqgrow")[0].rowIndex;if(!r.rows[i].isLeaf){if(r.rows[i].expanded){e(r).jqGrid("collapseRow",r.rows[i]);e(r).jqGrid("collapseNode",r.rows[i])}else{e(r).jqGrid("expandRow",r.rows[i]);e(r).jqGrid("expandNode",r.rows[i])}}return false});if(r.p.ExpandColClick===true){e("span",n).css("cursor","pointer").bind("click",function(t){var n=t.target||t.srcElement;var i=e(n,r.rows).parents("tr.jqgrow")[0].rowIndex;if(!r.rows[i].isLeaf){if(r.rows[i].expanded){e(r).jqGrid("collapseRow",r.rows[i]);e(r).jqGrid("collapseNode",r.rows[i])}else{e(r).jqGrid("expandRow",r.rows[i]);e(r).jqGrid("expandNode",r.rows[i])}}e(r).jqGrid("setSelection",r.rows[i].id);return false})}})},setTreeGrid:function(){return this.each(function(){var t=this,n=0,r;if(!t.p.treeGrid){return}if(!t.p.treedatatype){e.extend(t.p,{treedatatype:t.p.datatype})}t.p.subGrid=false;t.p.altRows=false;t.p.pgbuttons=false;t.p.pginput=false;t.p.multiselect=false;t.p.rowList=[];r="ui-icon-triangle-1-"+(t.p.direction=="rtl"?"w":"e");t.p.treeIcons=e.extend({plus:r,minus:"ui-icon-triangle-1-s",leaf:"ui-icon-radio-off"},t.p.treeIcons||{});if(t.p.treeGridModel=="nested"){t.p.treeReader=e.extend({level_field:"level",left_field:"lft",right_field:"rgt",leaf_field:"isLeaf",expanded_field:"expanded"},t.p.treeReader)}else{if(t.p.treeGridModel=="adjacency"){t.p.treeReader=e.extend({level_field:"level",parent_id_field:"parent",leaf_field:"isLeaf",expanded_field:"expanded"},t.p.treeReader)}}for(var i in t.p.colModel){if(t.p.colModel[i].name==t.p.ExpandColumn){t.p.expColInd=n;break}n++}if(!t.p.expColInd){t.p.expColInd=0}e.each(t.p.treeReader,function(e,n){if(n){t.p.colNames.push(n);t.p.colModel.push({name:n,width:1,hidden:true,sortable:false,resizable:false,hidedlg:true,editable:true,search:false})}})})},expandRow:function(t){this.each(function(){var n=this;if(!n.grid||!n.p.treeGrid){return}var r=e(n).jqGrid("getNodeChildren",t);e(r).each(function(t){e(this).css("display","");if(this.expanded){e(n).jqGrid("expandRow",this)}})})},collapseRow:function(t){this.each(function(){var n=this;if(!n.grid||!n.p.treeGrid){return}var r=e(n).jqGrid("getNodeChildren",t);e(r).each(function(t){e(this).css("display","none");if(this.expanded){e(n).jqGrid("collapseRow",this)}})})},getRootNodes:function(){var t=[];this.each(function(){var n=this;if(!n.grid||!n.p.treeGrid){return}switch(n.p.treeGridModel){case"nested":var r=n.p.treeReader.level_field;e(n.rows).each(function(e){if(parseInt(this[r],10)===parseInt(n.p.tree_root_level,10)){t.push(this)}});break;case"adjacency":e(n.rows).each(function(e){if(this.parent_id==null||this.parent_id.toLowerCase()=="null"){t.push(this)}});break}});return t},getNodeDepth:function(t){var n=null;this.each(function(){var r=this;if(!this.grid||!this.p.treeGrid){return}switch(r.p.treeGridModel){case"nested":n=parseInt(t.level,10)-parseInt(this.p.tree_root_level,10);break;case"adjacency":n=e(r).jqGrid("getNodeAncestors",t).length;break}});return n},getNodeParent:function(t){var n=null;this.each(function(){var r=this;if(!r.grid||!r.p.treeGrid){return}switch(r.p.treeGridModel){case"nested":var i=parseInt(t.lft,10),s=parseInt(t.rgt,10),o=parseInt(t.level,10);e(this.rows).each(function(){if(parseInt(this.level,10)===o-1&&parseInt(this.lft)<i&&parseInt(this.rgt)>s){n=this;return false}});break;case"adjacency":e(this.rows).each(function(){if(this.id==t.parent_id){n=this;return false}});break}});return n},getNodeChildren:function(t){var n=[];this.each(function(){var r=this;if(!r.grid||!r.p.treeGrid){return}switch(r.p.treeGridModel){case"nested":var i=parseInt(t.lft,10),s=parseInt(t.rgt,10),o=parseInt(t.level,10);e(this.rows).each(function(e){if(parseInt(this.level,10)===o+1&&parseInt(this.lft,10)>i&&parseInt(this.rgt,10)<s){n.push(this)}});break;case"adjacency":e(this.rows).each(function(e){if(this.parent_id==t.id){n.push(this)}});break}});return n},getFullTreeNode:function(t){var n=[];this.each(function(){var r=this;if(!r.grid||!r.p.treeGrid){return}switch(r.p.treeGridModel){case"nested":var i=parseInt(t.lft,10),s=parseInt(t.rgt,10),o=parseInt(t.level,10);e(this.rows).each(function(e){if(parseInt(this.level,10)>=o&&parseInt(this.lft,10)>=i&&parseInt(this.lft,10)<=s){n.push(this)}});break;case"adjacency":n.push(t);e(this.rows).each(function(e){len=n.length;for(e=0;e<len;e++){if(n[e].id==this.parent_id){n.push(this);break}}});break}});return n},getNodeAncestors:function(t){var n=[];this.each(function(){if(!this.grid||!this.p.treeGrid){return}var r=e(this).jqGrid("getNodeParent",t);while(r){n.push(r);r=e(this).jqGrid("getNodeParent",r)}});return n},isVisibleNode:function(t){var n=true;this.each(function(){var r=this;if(!r.grid||!r.p.treeGrid){return}var i=e(r).jqGrid("getNodeAncestors",t);e(i).each(function(){n=n&&this.expanded;if(!n){return false}})});return n},isNodeLoaded:function(t){var n;this.each(function(){var r=this;if(!r.grid||!r.p.treeGrid){return}if(t.loaded!==undefined){n=t.loaded}else{if(t.isLeaf||e(r).jqGrid("getNodeChildren",t).length>0){n=true}else{n=false}}});return n},expandNode:function(t){return this.each(function(){if(!this.grid||!this.p.treeGrid){return}if(!t.expanded){if(e(this).jqGrid("isNodeLoaded",t)){t.expanded=true;e("div.treeclick",t).removeClass(this.p.treeIcons.plus+" tree-plus").addClass(this.p.treeIcons.minus+" tree-minus")}else{t.expanded=true;e("div.treeclick",t).removeClass(this.p.treeIcons.plus+" tree-plus").addClass(this.p.treeIcons.minus+" tree-minus");this.p.treeANode=t.rowIndex;this.p.datatype=this.p.treedatatype;if(this.p.treeGridModel=="nested"){e(this).jqGrid("setGridParam",{postData:{nodeid:t.id,n_left:t.lft,n_right:t.rgt,n_level:t.level}})}else{e(this).jqGrid("setGridParam",{postData:{nodeid:t.id,parentid:t.parent_id,n_level:t.level}})}e(this).trigger("reloadGrid");if(this.p.treeGridModel=="nested"){e(this).jqGrid("setGridParam",{postData:{nodeid:"",n_left:"",n_right:"",n_level:""}})}else{e(this).jqGrid("setGridParam",{postData:{nodeid:"",parentid:"",n_level:""}})}}}})},collapseNode:function(t){return this.each(function(){if(!this.grid||!this.p.treeGrid){return}if(t.expanded){t.expanded=false;e("div.treeclick",t).removeClass(this.p.treeIcons.minus+" tree-minus").addClass(this.p.treeIcons.plus+" tree-plus")}})},SortTree:function(t){return this.each(function(){if(!this.grid||!this.p.treeGrid){return}var n,r,i,s=[],o=this,u=e(this).jqGrid("getRootNodes");u.sort(function(e,n){if(e.sortKey<n.sortKey){return-t}if(e.sortKey>n.sortKey){return t}return 0});if(u[0]){e("td",u[0]).each(function(t){e(this).css("width",o.grid.headers[t].width+"px")});o.grid.cols=u[0].cells}for(n=0,r=u.length;n<r;n++){i=u[n];s.push(i);e(this).jqGrid("collectChildrenSortTree",s,i,t)}e.each(s,function(t,n){e("tbody",o.grid.bDiv).append(n);n.sortKey=null})})},collectChildrenSortTree:function(t,n,r){return this.each(function(){if(!this.grid||!this.p.treeGrid){return}var i,s,o,u=e(this).jqGrid("getNodeChildren",n);u.sort(function(e,t){if(e.sortKey<t.sortKey){return-r}if(e.sortKey>t.sortKey){return r}return 0});for(i=0,s=u.length;i<s;i++){o=u[i];t.push(o);e(this).jqGrid("collectChildrenSortTree",t,o,r)}})},setTreeRow:function(t,n){var r,i=false;this.each(function(){var r=this;if(!r.grid||!r.p.treeGrid){return}i=e(r).jqGrid("setRowData",t,n)});return i},delTreeNode:function(t){return this.each(function(){var n=this;if(!n.grid||!n.p.treeGrid){return}var r=e(n).jqGrid("getInd",t,true);if(r){var i=e(n).jqGrid("getNodeChildren",r);if(i.length>0){for(var s=0;s<i.length;s++){e(n).jqGrid("delRowData",i[s].id)}}e(n).jqGrid("delRowData",r.id)}})}})})(jQuery);(function(e){e.jgrid.extend({jqGridImport:function(t){t=e.extend({imptype:"xml",impstring:"",impurl:"",mtype:"GET",impData:{},xmlGrid:{config:"roots>grid",data:"roots>rows"},jsonGrid:{config:"grid",data:"data"}},t||{});return this.each(function(){var n=this;var r=function(t,r){var i=e(r.xmlGrid.config,t)[0];var s=e(r.xmlGrid.data,t)[0];if(xmlJsonClass.xml2json&&e.jgrid.parse){var o=xmlJsonClass.xml2json(i," ");var o=e.jgrid.parse(o);for(var u in o){var l=o[u]}if(s){var c=o.grid.datatype;o.grid.datatype="xmlstring";o.grid.datastr=t;e(n).jqGrid(l).jqGrid("setGridParam",{datatype:c})}else{e(n).jqGrid(l)}o=null;l=null}else{alert("xml2json or parse are not present")}};var i=function(t,r){if(t&&typeof t=="string"){var i=e.jgrid.parse(t);var s=i[r.jsonGrid.config];var o=i[r.jsonGrid.data];if(o){var u=s.datatype;s.datatype="jsonstring";s.datastr=o;e(n).jqGrid(s).jqGrid("setGridParam",{datatype:u})}else{e(n).jqGrid(s)}}};switch(t.imptype){case"xml":e.ajax({url:t.impurl,type:t.mtype,data:t.impData,dataType:"xml",complete:function(n,i){if(i=="success"){r(n.responseXML,t);if(e.isFunction(t.importComplete)){t.importComplete(n)}}n=null}});break;case"xmlstring":if(t.impstring&&typeof t.impstring=="string"){var s=e.jgrid.stringToDoc(t.impstring);if(s){r(s,t);if(e.isFunction(t.importComplete)){t.importComplete(s)}t.impstring=null}s=null}break;case"json":e.ajax({url:t.impurl,type:t.mtype,data:t.impData,dataType:"json",complete:function(n,r){if(r=="success"){i(n.responseText,t);if(e.isFunction(t.importComplete)){t.importComplete(n)}}n=null}});break;case"jsonstring":if(t.impstring&&typeof t.impstring=="string"){i(t.impstring,t);if(e.isFunction(t.importComplete)){t.importComplete(t.impstring)}t.impstring=null}break}})},jqGridExport:function(t){t=e.extend({exptype:"xmlstring",root:"grid",ident:"	"},t||{});var n=null;this.each(function(){if(!this.grid){return}var r=e(this).jqGrid("getGridParam");if(r.rownumbers){r.colNames.splice(0);r.colModel.splice(0)}if(r.multiselect){r.colNames.splice(0);r.colModel.splice(0)}if(r.subgrid){r.colNames.splice(0);r.colModel.splice(0)}if(r.treeGrid){for(var i in r.treeReader){r.colNames.splice(r.colNames.length-1);r.colModel.splice(r.colModel.length-1)}}switch(t.exptype){case"xmlstring":n="<"+t.root+">"+xmlJsonClass.json2xml(r,t.ident)+"</"+t.root+">";break;case"jsonstring":n="{"+xmlJsonClass.toJson(r,t.root,t.ident)+"}";break}});return n}})})(jQuery);var xmlJsonClass={xml2json:function(e,t){if(e.nodeType===9){e=e.documentElement}var n=this.removeWhite(e);var r=this.toObj(n);var i=this.toJson(r,e.nodeName,"	");return"{\n"+t+(t?i.replace(/\t/g,t):i.replace(/\t|\n/g,""))+"\n}"},json2xml:function(e,t){var n=function(e,t,r){var i="";var s,o;if(e instanceof Array){if(e.length===0){i+=r+"<"+t+">__EMPTY_ARRAY_</"+t+">\n"}else{for(s=0,o=e.length;s<o;s+=1){var u=r+n(e[s],t,r+"	")+"\n";i+=u}}}else{if(typeof e==="object"){var a=false;i+=r+"<"+t;var f;for(f in e){if(e.hasOwnProperty(f)){if(f.charAt(0)==="@"){i+=" "+f.substr(1)+'="'+e[f].toString()+'"'}else{a=true}}}i+=a?">":"/>";if(a){for(f in e){if(e.hasOwnProperty(f)){if(f==="#text"){i+=e[f]}else{if(f==="#cdata"){i+="<![CDATA["+e[f]+"]]>"}else{if(f.charAt(0)!=="@"){i+=n(e[f],f,r+"	")}}}}}i+=(i.charAt(i.length-1)==="\n"?r:"")+"</"+t+">"}}else{if(typeof e==="function"){i+=r+"<"+t+"><![CDATA["+e+"]]></"+t+">"}else{if(e.toString()==='""'||e.toString().length===0){i+=r+"<"+t+">__EMPTY_STRING_</"+t+">"}else{i+=r+"<"+t+">"+e.toString()+"</"+t+">"}}}}return i};var r="";var i;for(i in e){if(e.hasOwnProperty(i)){r+=n(e[i],i,"")}}return t?r.replace(/\t/g,t):r.replace(/\t|\n/g,"")},toObj:function(e){var t={};var n=/function/i;if(e.nodeType===1){if(e.attributes.length){var r;for(r=0;r<e.attributes.length;r+=1){t["@"+e.attributes[r].nodeName]=(e.attributes[r].nodeValue||"").toString()}}if(e.firstChild){var i=0,s=0,o=false;var u;for(u=e.firstChild;u;u=u.nextSibling){if(u.nodeType===1){o=true}else{if(u.nodeType===3&&u.nodeValue.match(/[^ \f\n\r\t\v]/)){i+=1}else{if(u.nodeType===4){s+=1}}}}if(o){if(i<2&&s<2){this.removeWhite(e);for(u=e.firstChild;u;u=u.nextSibling){if(u.nodeType===3){t["#text"]=this.escape(u.nodeValue)}else{if(u.nodeType===4){if(n.test(u.nodeValue)){t[u.nodeName]=[t[u.nodeName],u.nodeValue]}else{t["#cdata"]=this.escape(u.nodeValue)}}else{if(t[u.nodeName]){if(t[u.nodeName]instanceof Array){t[u.nodeName][t[u.nodeName].length]=this.toObj(u)}else{t[u.nodeName]=[t[u.nodeName],this.toObj(u)]}}else{t[u.nodeName]=this.toObj(u)}}}}}else{if(!e.attributes.length){t=this.escape(this.innerXml(e))}else{t["#text"]=this.escape(this.innerXml(e))}}}else{if(i){if(!e.attributes.length){t=this.escape(this.innerXml(e));if(t==="__EMPTY_ARRAY_"){t="[]"}else{if(t==="__EMPTY_STRING_"){t=""}}}else{t["#text"]=this.escape(this.innerXml(e))}}else{if(s){if(s>1){t=this.escape(this.innerXml(e))}else{for(u=e.firstChild;u;u=u.nextSibling){if(n.test(e.firstChild.nodeValue)){t=e.firstChild.nodeValue;break}else{t["#cdata"]=this.escape(u.nodeValue)}}}}}}}if(!e.attributes.length&&!e.firstChild){t=null}}else{if(e.nodeType===9){t=this.toObj(e.documentElement)}else{alert("unhandled node type: "+e.nodeType)}}return t},toJson:function(e,t,n){var r=t?'"'+t+'"':"";if(e==="[]"){r+=t?":[]":"[]"}else{if(e instanceof Array){var i,s,o=[];for(s=0,i=e.length;s<i;s+=1){o[s]=this.toJson(e[s],"",n+"	")}r+=(t?":[":"[")+(o.length>1?"\n"+n+"	"+o.join(",\n"+n+"	")+"\n"+n:o.join(""))+"]"}else{if(e===null){r+=(t&&":")+"null"}else{if(typeof e==="object"){var u=[];var a;for(a in e){if(e.hasOwnProperty(a)){u[u.length]=this.toJson(e[a],a,n+"	")}}r+=(t?":{":"{")+(u.length>1?"\n"+n+"	"+u.join(",\n"+n+"	")+"\n"+n:u.join(""))+"}"}else{if(typeof e==="string"){var f=/(^-?\d+\.?\d*$)/;var l=/function/i;var c=e.toString();if(f.test(c)||l.test(c)||c==="false"||c==="true"){r+=(t&&":")+c}else{r+=(t&&":")+'"'+e+'"'}}else{r+=(t&&":")+e.toString()}}}}}return r},innerXml:function(e){var t="";if("innerHTML"in e){t=e.innerHTML}else{var n=function(e){var t="",r;if(e.nodeType===1){t+="<"+e.nodeName;for(r=0;r<e.attributes.length;r+=1){t+=" "+e.attributes[r].nodeName+'="'+(e.attributes[r].nodeValue||"").toString()+'"'}if(e.firstChild){t+=">";for(var i=e.firstChild;i;i=i.nextSibling){t+=n(i)}t+="</"+e.nodeName+">"}else{t+="/>"}}else{if(e.nodeType===3){t+=e.nodeValue}else{if(e.nodeType===4){t+="<![CDATA["+e.nodeValue+"]]>"}}}return t};for(var r=e.firstChild;r;r=r.nextSibling){t+=n(r)}}return t},escape:function(e){return e.replace(/[\\]/g,"\\\\").replace(/[\"]/g,'\\"').replace(/[\n]/g,"\\n").replace(/[\r]/g,"\\r")},removeWhite:function(e){e.normalize();var t;for(t=e.firstChild;t;){if(t.nodeType===3){if(!t.nodeValue.match(/[^ \f\n\r\t\v]/)){var n=t.nextSibling;e.removeChild(t);t=n}else{t=t.nextSibling}}else{if(t.nodeType===1){this.removeWhite(t);t=t.nextSibling}else{t=t.nextSibling}}}return e}};(function(e){e.jgrid.extend({setColumns:function(t){t=e.extend({top:0,left:0,width:200,height:"auto",dataheight:"auto",modal:false,drag:true,beforeShowForm:null,afterShowForm:null,afterSubmitForm:null,closeOnEscape:true,ShrinkToFit:false,jqModal:false,saveicon:[true,"left","ui-icon-disk"],closeicon:[true,"left","ui-icon-close"],onClose:null,colnameview:true,closeAfterSubmit:true,updateAfterCheck:false,recreateForm:false},e.jgrid.col,t||{});return this.each(function(){var n=this;if(!n.grid){return}var r=typeof t.beforeShowForm==="function"?true:false;var s=typeof t.afterShowForm==="function"?true:false;var o=typeof t.afterSubmitForm==="function"?true:false;var u=n.p.id,f="ColTbl_"+u,l={themodal:"colmod"+u,modalhead:"colhd"+u,modalcontent:"colcnt"+u,scrollelm:f};if(t.recreateForm===true&&e("#"+l.themodal).html()!=null){e("#"+l.themodal).remove()}if(e("#"+l.themodal).html()!=null){if(r){t.beforeShowForm(e("#"+f))}viewModal("#"+l.themodal,{gbox:"#gbox_"+u,jqm:t.jqModal,jqM:false,modal:t.modal});if(s){t.afterShowForm(e("#"+f))}}else{var c=isNaN(t.dataheight)?t.dataheight:t.dataheight+"px";var h="<div id='"+f+"' class='formdata' style='width:100%;overflow:auto;position:relative;height:"+c+";'>";h+="<table class='ColTable' cellspacing='1' cellpading='2' border='0'><tbody>";for(i=0;i<this.p.colNames.length;i++){if(!n.p.colModel[i].hidedlg){h+="<tr><td style='white-space: pre;'><input type='checkbox' style='margin-right:5px;' id='col_"+this.p.colModel[i].name+"' class='cbox' value='T' "+(this.p.colModel[i].hidden===false?"checked":"")+"/><label for='col_"+this.p.colModel[i].name+"'>"+this.p.colNames[i]+(t.colnameview?" ("+this.p.colModel[i].name+")":"")+"</label></td></tr>"}}h+="</tbody></table></div>";var p=!t.updateAfterCheck?"<a href='javascript:void(0)' id='dData' class='fm-button ui-state-default ui-corner-all'>"+t.bSubmit+"</a>":"",d="<a href='javascript:void(0)' id='eData' class='fm-button ui-state-default ui-corner-all'>"+t.bCancel+"</a>";h+="<table border='0' class='EditTable' id='"+f+"_2'><tbody><tr style='display:block;height:3px;'><td></td></tr><tr><td class='DataTD ui-widget-content'></td></tr><tr><td class='ColButton EditButton'>"+p+"&#160;"+d+"</td></tr></tbody></table>";t.gbox="#gbox_"+u;createModal(l,h,t,"#gview_"+n.p.id,e("#gview_"+n.p.id)[0]);if(t.saveicon[0]==true){e("#dData","#"+f+"_2").addClass(t.saveicon[1]=="right"?"fm-button-icon-right":"fm-button-icon-left").append("<span class='ui-icon "+t.saveicon[2]+"'></span>")}if(t.closeicon[0]==true){e("#eData","#"+f+"_2").addClass(t.closeicon[1]=="right"?"fm-button-icon-right":"fm-button-icon-left").append("<span class='ui-icon "+t.closeicon[2]+"'></span>")}if(!t.updateAfterCheck){e("#dData","#"+f+"_2").click(function(r){for(i=0;i<n.p.colModel.length;i++){if(!n.p.colModel[i].hidedlg){var s=n.p.colModel[i].name.replace(".","\\.");if(e("#col_"+s,"#"+f).attr("checked")){e(n).jqGrid("showCol",n.p.colModel[i].name);e("#col_"+s,"#"+f).attr("defaultChecked",true)}else{e(n).jqGrid("hideCol",n.p.colModel[i].name);e("#col_"+s,"#"+f).attr("defaultChecked","")}}}if(t.ShrinkToFit===true){e(n).jqGrid("setGridWidth",n.grid.width-.001,true)}if(t.closeAfterSubmit){hideModal("#"+l.themodal,{gb:"#gbox_"+u,jqm:t.jqModal,onClose:t.onClose})}if(o){t.afterSubmitForm(e("#"+f))}return false})}else{e(":input","#"+f).click(function(r){var i=this.id.substr(4);if(i){if(this.checked){e(n).jqGrid("showCol",i)}else{e(n).jqGrid("hideCol",i)}if(t.ShrinkToFit===true){e(n).jqGrid("setGridWidth",n.grid.width-.001,true)}}return this})}e("#eData","#"+f+"_2").click(function(e){hideModal("#"+l.themodal,{gb:"#gbox_"+u,jqm:t.jqModal,onClose:t.onClose});return false});e("#dData, #eData","#"+f+"_2").hover(function(){e(this).addClass("ui-state-hover")},function(){e(this).removeClass("ui-state-hover")});if(r){t.beforeShowForm(e("#"+f))}viewModal("#"+l.themodal,{gbox:"#gbox_"+u,jqm:t.jqModal,jqM:true,modal:t.modal});if(s){t.afterShowForm(e("#"+f))}}})}})})(jQuery);(function(e){e.jgrid.extend({getPostData:function(){var e=this[0];if(!e.grid){return}return e.p.postData},setPostData:function(e){var t=this[0];if(!t.grid){return}if(typeof e==="object"){t.p.postData=e}else{alert("Error: cannot add a non-object postData value. postData unchanged.")}},appendPostData:function(t){var n=this[0];if(!n.grid){return}if(typeof t==="object"){e.extend(n.p.postData,t)}else{alert("Error: cannot append a non-object postData value. postData unchanged.")}},setPostDataItem:function(e,t){var n=this[0];if(!n.grid){return}n.p.postData[e]=t},getPostDataItem:function(e){var t=this[0];if(!t.grid){return}return t.p.postData[e]},removePostDataItem:function(e){var t=this[0];if(!t.grid){return}delete t.p.postData[e]},getUserData:function(){var e=this[0];if(!e.grid){return}return e.p.userData},getUserDataItem:function(e){var t=this[0];if(!t.grid){return}return t.p.userData[e]}})})(jQuery);(function($){if($.browser.msie&&$.browser.version==8){$.expr[":"].hidden=function(e){return e.offsetWidth===0||e.offsetHeight===0||e.style.display=="none"}}if($.ui&&$.ui.multiselect&&$.ui.multiselect.prototype._setSelected){var setSelected=$.ui.multiselect.prototype._setSelected;$.ui.multiselect.prototype._setSelected=function(e,t){var n=setSelected.call(this,e,t);if(t&&this.selectedList){var r=this.element;this.selectedList.find("li").each(function(){if($(this).data("optionLink")){$(this).data("optionLink").remove().appendTo(r)}})}return n}}$.jgrid.extend({sortableColumns:function(e){return this.each(function(){function n(){t.p.disableClick=true}var t=this;var r={tolerance:"pointer",axis:"x",items:">th:not(:has(#jqgh_cb,#jqgh_rn,#jqgh_subgrid),:hidden)",placeholder:{element:function(e){var t=$(document.createElement(e[0].nodeName)).addClass(e[0].className+" ui-sortable-placeholder ui-state-highlight").removeClass("ui-sortable-helper")[0];return t},update:function(e,t){t.height(e.currentItem.innerHeight()-parseInt(e.currentItem.css("paddingTop")||0,10)-parseInt(e.currentItem.css("paddingBottom")||0,10));t.width(e.currentItem.innerWidth()-parseInt(e.currentItem.css("paddingLeft")||0,10)-parseInt(e.currentItem.css("paddingRight")||0,10))}},update:function(e,n){var r=$(n.item).parent();var i=$(">th",r);var s=t.p.colModel;var o={};$.each(s,function(e){o[this.name]=e});var u=[];i.each(function(e){var t=$(">div",this).get(0).id.replace(/^jqgh_/,"");if(t in o){u.push(o[t])}});$(t).jqGrid("remapColumns",u,true,true);if($.isFunction(t.p.sortable.update)){t.p.sortable.update(u)}setTimeout(function(){t.p.disableClick=false},50)}};if(t.p.sortable.options){$.extend(r,t.p.sortable.options)}else{if($.isFunction(t.p.sortable)){t.p.sortable={update:t.p.sortable}}}if(r.start){var i=r.start;r.start=function(e,t){n();i.call(this,e,t)}}else{r.start=n}if(t.p.sortable.exclude){r.items+=":not("+t.p.sortable.exclude+")"}e.sortable(r).data("sortable").floating=true})},columnChooser:function(e){function a(e,t){if(!e){return}if(typeof e=="string"){if($.fn[e]){$.fn[e].apply(t,$.makeArray(arguments).slice(2))}}else{if($.isFunction(e)){e.apply(t,$.makeArray(arguments).slice(2))}}}var t=this;var n=$('<div style="position:relative;overflow:hidden"><div><select multiple="multiple"></select></div></div>');var r=$("select",n);e=$.extend({width:420,height:240,classname:null,done:function(e){if(e){t.jqGrid("remapColumns",e,true)}},msel:"multiselect",dlog:"dialog",dlog_opts:function(e){var t={};t[e.bSubmit]=function(){e.apply_perm();e.cleanup(false)};t[e.bCancel]=function(){e.cleanup(true)};return{buttons:t,close:function(){e.cleanup(true)},modal:false,resizable:false,width:e.width+20}},apply_perm:function(){$("option",r).each(function(e){if(this.selected){t.jqGrid("showCol",i[this.value].name)}else{t.jqGrid("hideCol",i[this.value].name)}});var n=u.slice(0);$("option[selected]",r).each(function(){n.push(parseInt(this.value))});$.each(n,function(){delete o[i[this].name]});$.each(o,function(){n.push(parseInt(this))});if(e.done){e.done.call(t,n)}},cleanup:function(i){a(e.dlog,n,"destroy");a(e.msel,r,"destroy");n.remove();if(i&&e.done){e.done.call(t)}}},$.jgrid.col,e||{});if(e.caption){n.attr("title",e.caption)}if(e.classname){n.addClass(classname);r.addClass(classname)}if(e.width){$(">div",n).css({width:e.width,margin:"0 auto"});r.css("width",e.width)}if(e.height){$(">div",n).css("height",e.height);r.css("height",e.height-10)}var i=t.jqGrid("getGridParam","colModel");var s=t.jqGrid("getGridParam","colNames");var o={},u=[];r.empty();$.each(i,function(e){o[this.name]=e;if(this.hidedlg){if(!this.hidden){u.push(e)}return}r.append("<option value='"+e+"' "+(this.hidden?"":"selected='selected'")+">"+s[e]+"</option>")});var f=$.isFunction(e.dlog_opts)?e.dlog_opts.call(t,e):e.dlog_opts;a(e.dlog,n,f);var l=$.isFunction(e.msel_opts)?e.msel_opts.call(t,e):e.msel_opts;a(e.msel,r,e.msel_opts)},sortableRows:function(e){return this.each(function(){var t=this;if(!t.grid){return}if(t.p.treeGrid){return}if($.fn.sortable){e=$.extend({cursor:"move",axis:"y",items:".jqgrow"},e||{});if(e.start&&$.isFunction(e.start)){e._start_=e.start;delete e.start}else{e._start_=false}if(e.update&&$.isFunction(e.update)){e._update_=e.update;delete e.update}else{e._update_=false}e.start=function(n,r){$(r.item).css("border-width","0px");$("td",r.item).each(function(e){this.style.width=t.grid.cols[e].style.width});if(t.p.subGrid){var i=$(r.item).attr("id");try{$(t).jqGrid("collapseSubGridRow",i)}catch(s){}}if(e._start_){e._start_.apply(this,[n,r])}};e.update=function(n,r){$(r.item).css("border-width","");t.updateColumns();if(t.p.rownumbers===true){$("td.jqgrid-rownum",t.rows).each(function(e){$(this).html(e+1)})}if(e._update_){e._update_.apply(this,[n,r])}};$("tbody:first",t).sortable(e)}})},gridDnD:function(e){return this.each(function(){function n(){var e=$.data(t,"dnd");$("tr.jqgrow:not(.ui-draggable)",t).draggable($.isFunction(e.drag)?e.drag.call($(t),e):e.drag)}var t=this;if(!t.grid){return}if(t.p.treeGrid){return}if(!$.fn.draggable||!$.fn.droppable){return}var r="<table id='jqgrid_dnd' class='ui-jqgrid-dnd'></table>";if($("#jqgrid_dnd").html()==null){$("body").append(r)}if(typeof e=="string"&&e=="updateDnD"&&t.p.jqgdnd==true){n();return}e=$.extend({drag:function(e){return $.extend({start:function(n,r){if(t.p.subGrid){var i=$(r.helper).attr("id");try{$(t).jqGrid("collapseSubGridRow",i)}catch(s){}}for(var o=0;o<e.connectWith.length;o++){if($(e.connectWith[o]).jqGrid("getGridParam","reccount")=="0"){$(e.connectWith[o]).jqGrid("addRowData","jqg_empty_row",{})}}r.helper.addClass("ui-state-highlight");$("td",r.helper).each(function(e){this.style.width=t.grid.headers[e].width+"px"});if(e.onstart&&$.isFunction(e.onstart)){e.onstart.call($(t),n,r)}},stop:function(n,r){if(r.helper.dropped){var i=$(r.helper).attr("id");$(t).jqGrid("delRowData",i)}for(var s=0;s<e.connectWith.length;s++){$(e.connectWith[s]).jqGrid("delRowData","jqg_empty_row")}if(e.onstop&&$.isFunction(e.onstop)){e.onstop.call($(t),n,r)}}},e.drag_opts||{})},drop:function(e){return $.extend({accept:function(e){var t=$(e).closest("table.ui-jqgrid-btable");var n=$.data(t[0],"dnd").connectWith;return $.inArray("#"+this.id,n)!=-1?true:false},drop:function(n,r){var i=$(r.draggable).attr("id");var s=$("#"+t.id).jqGrid("getRowData",i);if(!e.dropbyname){var o=0,u={},a;var f=$("#"+this.id).jqGrid("getGridParam","colModel");try{for(key in s){if(f[o]){a=f[o].name;u[a]=s[key]}o++}s=u}catch(l){}}r.helper.dropped=true;if(e.beforedrop&&$.isFunction(e.beforedrop)){var c=e.beforedrop.call(this,n,r,s,$("#"+t.id),$(this));if(typeof c!="undefined"&&c!==null&&typeof c=="object"){s=c}}if(r.helper.dropped){var h;if(e.autoid){if($.isFunction(e.autoid)){h=e.autoid.call(this,s)}else{h=Math.ceil(Math.random()*1e3);h=e.autoidprefix+h}}$("#"+this.id).jqGrid("addRowData",h,s,e.droppos)}if(e.ondrop&&$.isFunction(e.ondrop)){e.ondrop.call(this,n,r,s)}}},e.drop_opts||{})},onstart:null,onstop:null,beforedrop:null,ondrop:null,drop_opts:{activeClass:"ui-state-active",hoverClass:"ui-state-hover"},drag_opts:{revert:"invalid",helper:"clone",cursor:"move",appendTo:"#jqgrid_dnd",zIndex:5e3},dropbyname:false,droppos:"first",autoid:true,autoidprefix:"dnd_"},e||{});if(!e.connectWith){return}e.connectWith=e.connectWith.split(",");e.connectWith=$.map(e.connectWith,function(e){return $.trim(e)});$.data(t,"dnd",e);if(t.p.reccount!="0"&&!t.p.jqgdnd){n()}t.p.jqgdnd=true;for(var i=0;i<e.connectWith.length;i++){var s=e.connectWith[i];$(s).droppable($.isFunction(e.drop)?e.drop.call($(t),e):e.drop)}})},gridResize:function(opts){return this.each(function(){var $t=this;if(!$t.grid||!$.fn.resizable){return}opts=$.extend({},opts||{});if(opts.alsoResize){opts._alsoResize_=opts.alsoResize;delete opts.alsoResize}else{opts._alsoResize_=false}if(opts.stop&&$.isFunction(opts.stop)){opts._stop_=opts.stop;delete opts.stop}else{opts._stop_=false}opts.stop=function(e,t){$($t).jqGrid("setGridParam",{height:$("#gview_"+$t.p.id+" .ui-jqgrid-bdiv").height()});$($t).jqGrid("setGridWidth",t.size.width,opts.shrinkToFit);if(opts._stop_){opts._stop_.call($t,e,t)}};if(opts._alsoResize_){var optstest="{'#gview_"+$t.p.id+" .ui-jqgrid-bdiv':true,'"+opts._alsoResize_+"':true}";opts.alsoResize=eval("("+optstest+")")}else{opts.alsoResize=$(".ui-jqgrid-bdiv","#gview_"+$t.p.id)}delete opts._alsoResize_;$("#gbox_"+$t.p.id).resizable(opts)})}})})(jQuery)